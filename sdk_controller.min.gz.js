!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Eventics=e()}}(function(){return function r(o,s,c){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[n]={exports:{}};o[n][0].call(a.exports,function(e){return l(o[n][1][e]||e)},a,a.exports,r,o,s,c)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,n,t){n.exports=function(n){var a,r=["ironBeastEventicsProvider"],o=[],s={},c={},t=this,l=[],e=(n=n||1,"undefined"!=typeof jQuery?jQuery:{}),i=void 0!==window.angular?window.angular:{};function d(e){for(var n=o.length,t=0;t<n;t++)e(o[t])}function u(e){t.extend(c||{},e)}return t.extend=e.extend||i.extend||function(){for(var e,n,t=arguments.length,i=1,a=arguments[0]||{};i<t;i++)if(null!=(e=arguments[i]))for(n in e)void 0!==e[n]&&(a[n]=e[n]);return a},t.trackEvent=function(n,t,i){n&&(i=extend(i||{},c),a?d(function(e){e.trackEvent(n,t,i)}):l.push({eName:n,label:t,data:i,eType:"event"}))},t.trackTiming=function(n,t,i){n&&0<=parseInt(t)&&(i=extend(i||{},c),a?d(function(e){e.trackTiming(n,t,i)}):l.push({eName:n,time:t,data:i,eType:"timing"}))},{setProvidersHandlers:function(e){if(e){"string"==typeof e&&(e=[e]),r=[];for(var n=e.length,t=0;t<n;t++)r.push(e[t])}},setProvidersConfig:function(e){s=e},init:function(e){a||(e&&u(e),function(){o=[];for(var e=r.length,n=0;n<e;n++){var t=r[n];if("function"==typeof window[t]){var i=new window[t];i.init(s),o.push(i)}}}(),a=!0,function(){for(var e in l){var n=l[e]||{};"event"===n.eType?t.trackEvent(n.eName,n.label,n.data):"timing"===n.eType&&t.trackTiming(n.eName,n.time,n.data)}l=[]}())},updateBaseData:u,createEventic:function(e){return(e=e||{}).userChance=n,new f(t,e)},updateUserChance:function(e){n=e}}};var f=e("./eventicsHelper.js");window.ironBeastEventicsProvider=e("./providers/ironBeastEventicsProvider.js"),window.QAEventicsProvider=e("./providers/QAEventicsProvider.js"),window.KuduEventicsProvider=e("./providers/KuduEventicsProvider.js")},{"./eventicsHelper.js":2,"./providers/KuduEventicsProvider.js":3,"./providers/QAEventicsProvider.js":4,"./providers/ironBeastEventicsProvider.js":5}],2:[function(e,n,t){n.exports=function(e,n){var t=void 0!==(n=n||{}).productChance?n.productChance:1,i=void 0!==n.userChance?n.userChance:1,s=e||{},c=n.baseData||{},l={},d=s.extend,a={};function u(e){return e&&e.name&&e.id}return a.trackEvent=function(e,n,t){if(!u(e))return!1;var i=e.name,a=e.id;t||(t={}),t.eventId=a,t=d({},c,t||{}),s.trackEvent(i,n,t)},a.trackTimingStart=function(e,n){if(!u(e))return!1;var t=e.name;return n=n||Date.now(),l[t]=n,!0},a.trackTimingStop=function(e,n){if(!u(e))return!1;var t,i,a=e.name;if(n||(n={}),n.eventId=e.id,n&&n.timeStamp?(i=n.timeStamp,delete n.timeStamp):i=Date.now(),n&&n.eNameStart&&n.eNameStart.name?(t=l[n.eNameStart.name],delete n.eNameStart):l[a]&&(t=l[a],l[a]=null),t){var r=i-t,o=d({},c);return n=d(o,n||{}),s.trackTiming(a,r,n),!0}},a.updateBaseData=function(e){for(var n in e)c[n]=e[n];return!0},a.resetBaseData=function(e){for(var n=0;n<e.length;n++)a.unsetParamFromBaseData(e[n])},a.unsetParamFromBaseData=function(e){c.hasOwnProperty(e)&&delete c[e]},a.incrementSessionNumber=function(){return c.sessionDepth?c.sessionDepth++:c.sessionDepth=1,!0},0<i&&i<=t?a:function(){var e={};for(var n in a)"function"==typeof a[n]&&(e[n]=function(){});return e}()}},{}],3:[function(e,n,t){n.exports=function(){var t,i,a="https://logs.supersonic.com/logs",r={table:"supersonic.adunitanalytics.ad_unit_events"},o=["generalmessage","emptyowreason","landingid"];function s(e,n){switch(e){case"landingid":n=parseInt(n);break;case"generalmessage":case"emptyowreason":n=t=void 0===(t=n)?"undefined":null===t?"null":t.toString()}var t;return n}function c(e){if(e){e=function(e){if(!e)return e;for(var n=Object.keys(e),t=n.length;t--;){var i=n[t],a=i.toLowerCase(),r=e[i];-1!==o.indexOf(a)&&(r=s(a,r)),e[a]=r,i!==a&&delete e[i]}return e}(e);var n={table:r.table,data:e};i(n)}}function n(e){var n=new XMLHttpRequest;n.open("POST",t,!0),n.onerror=function(){e&&0<=e.retry&&e.retry<2&&(e.retry++,i(e))},n.send(JSON.stringify(e))}function l(n){var t;try{t=btoa(JSON.stringify(n))}catch(e){n.data.applicationUserId="badName",n.data.userId="badName",n.data.eventName="errorEvent",t=btoa(JSON.stringify(n))}var e=a+"?data="+t,i=new XMLHttpRequest;i.open("GET",e,!0),i.send()}return{init:function(e){i=e&&"POST"===e.method?(t="https://postlog.supersonic.com/logs",n):(t=a,l)},trackEvent:function(e,n,t){if(e){if(n&&"object"==typeof n){var i=Object.keys(n)[0];i&&(t[i]=n[i])}t.eventName=e,c(t)}},trackTiming:function(e,n,t){e&&0<=parseInt(n)&&(t.eventName=e,t.timingValue=n,c(t))}}}},{}],4:[function(e,n,t){n.exports=function(){var i,a={};function r(e){if(e){a.data=e;var n=function e(n,t){var i=[];for(var a in n)if(n.hasOwnProperty(a)){var r=t?t+"["+a+"]":a,o=n[a];i.push("object"==typeof o?e(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o))}return i.join("&")}(a);delete a.data,(t=i+"?"+n)&&((new Image).src=t)}var t}return{init:function(e){i="http://qa.eventics.qa"},trackEvent:function(e,n,t){if(e){if(n&&"object"==typeof n){var i=Object.keys(n)[0];i&&(t[i]=n[i])}t.eventName=e,r(t)}},trackTiming:function(e,n,t){e&&0<=parseInt(n)&&(t.eventName=e,t.timingValue=n,r(t))}}}},{}],5:[function(e,n,t){n.exports=function(){var i,a={table:"supersonic.adunitanalytics.ad_unit_events"};function r(e){if(e){var n;a.data=e;try{n=btoa(JSON.stringify(a))}catch(e){a.data.applicationUserId="badName",a.data.userId="badName",a.data.eventName="errorEvent",n=btoa(JSON.stringify(a))}delete a.data,(t=i+"?data="+n)&&((new Image).src=t)}var t}return{init:function(e){i=e.isSecured?"https://secure.ironbeast.io":"http://supersonic.ironbeast.io"},trackEvent:function(e,n,t){if(e){if(n&&"object"==typeof n){var i=Object.keys(n)[0];i&&(t[i]=n[i])}t.eventName=e,r(t)}},trackTiming:function(e,n,t){e&&0<=parseInt(n)&&(t.eventName=e,t.timingValue=n,r(t))}}}},{}]},{},[1])(1)}),function r(o,s,c){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[n]={exports:{}};o[n][0].call(a.exports,function(e){return l(o[n][1][e]||e)},a,a.exports,r,o,s,c)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,n,t){n.exports=function(e){var n={v:1,controllerId:1,applicationKey:1,applicationUserId:0,debug:0,language:0,disableCache:0,applicationUserGender:0,applicationUserAgeGroup:0,demoCampaigns:0,appOrientation:1,mobileCarrier:0,connectionType:1,iphoneAppOnIpadDevice:0,deviceOs:1,SDKVersion:1,deviceOSVersion:1,deviceOEM:0,deviceVolume:0,immersiveMode:0,"deviceIds[IFA]":0,"deviceIds[IDFV]":0,"deviceIds[SERIAL]":0,"deviceIds[AndroidID]":0,"deviceIds[IMEI]":0,"deviceIds[AID]":0,displaySizeWidth:0,displaySizeHeight:0,deviceWidthDP:0,deviceHeightDP:0,deviceScreenScale:0,deviceLanguage:0,deviceModel:0,diskFreeSize:1,country:0,campaignId:0,customParams:0,isLimitAdTrackingEnabled:0,SDKPluginType:0,bundleId:0,jb:0,gpi:0,allowArbitraryLoads:0,allowArbitraryLoadsInWebContent:0,mcc:0,mnc:0,appVersion:0,batteryLevel:0,maxVideoLength:0,itemName:0,itemCount:0,timestamp:0,localTime:0,timezoneOffset:0,itemSignature:0,showDeliveryLimitationsLog:0,minimumOfferCommission:0,minimumOfferCommissionSignature:0,applicationUserCreationDate:0,applicationUserCreationDateSignature:0,mraid:0,numOfCampaigns:0,androidIsVersion:0,cdnCn:0,sdkAbName:0,segmentId:0,segmentName:0,consent:0,moatSupported:0};return{init:function(){"android"===e.getConfig().mobileSDKSettings.deviceOs&&(n.deviceApiLevel=0)},getCommonRequiredData:function(){return n}}}},{}],2:[function(e,n,t){n.exports=function(c,l,d){var u=l.appInfo.orientation.portrait,f=l.appInfo.orientation.landscape,g={android:function(e,n,t){return e.ext.forceOrientation.toLowerCase()},ios:function(e,n,t){return i=e,a=n.getABTestConfiguration(i.productType,i.ext.landingId).ignoreAppOrientationInForceCampaigns||!1,c.log("shouldIgnoreAppOrientationInForcedCampaign: "+Boolean(a),c.LogLevels.verbose),!a&&d.getOrientation()&&d.isAppOrientation(e.ext.forceOrientation.toLowerCase())?(c.log("forced campaign | application is locked on the same orientation - sending  default: "+t,c.LogLevels.verbose),t):e.ext.forceOrientation.toLowerCase();var i,a}};function p(e){return e&&e.controllerConfig&&("499b4845"===e.controllerConfig.applicationKey||"406ff65d"===e.controllerConfig.applicationKey)}return{getAdDisplayOrientation:function(e,n,t){if(t){var i,a,r,o="undefined",s=l.defaultOrientation[t.productType];return p(e)&&t.settings&&(t.settings.orientation=u),a=e,(r=t).ext&&r.ext.forceOrientation&&(!p(a)||p(a)&&r.ext.forceOrientation.toLowerCase()===f)?o=s=g[e.mobileSDKSettings.deviceOs](t,n,s):s=(i=t).settings&&i.settings.orientation?t.settings.orientation:d.getOrientation(),s.toLowerCase()===l.appInfo.orientation.none&&(s=l.defaultOrientation[t.productType]),c.log("adOrientation | forceByCampaign:"+o+" , forceBySession:"+t.settings.orientation+" ,forceByNative:"+d.getOrientation()+" , ChosenOrientation:"+s,c.LogLevels.info),s.toLowerCase()}}}}},{}],3:[function(e,n,t){n.exports=function(o,s,a){var t=e("../components/Constants.js"),c="MRAID",l="VAST",d="EXTERNAL",u="INTERNAL",f="PLAYABLE",g="HYBRID",p="IMAGE_INTERSTITIAL",v="STATIC_BANNER",m="OTHER",i={};function r(e){if(e)return e.id||S(e,b(e),h(e)),e.id&&e.id.toString()}function b(e){if(e){var n=e.crid||e.bannerId||e.bannerID;return n&&n.toString()}}function h(e){if(e){var n=e.creativeId||"0";return n&&n.toString()}}function S(e,n,t){e.id=n+"_"+t}function y(e,n){if(!e)return"";var t=C(e,n);return i[t]||i.other}i[c]="MR",i[l]="VA",i[d]="EX",i[u]="AT",i[f]="PL",i[g]="HY",i[p]="IM",i[v]="SB",i[m]="OT";var C=function(e,n){var t,i,a=e&&e.ext,r="";return a?r=(i=a)&&i.type&&"imageInterstitial"===i.type?p:o.VastUtils.isVastCampaign(e)?l:s.HybridService.isHybridCampaign(e,n)?g:A(a)?f:D(a)?c:I(a)?d:w(a)?u:(t=a)&&t.type&&"staticBanner"===t.type?v:m:r};function A(e){return e&&e.type&&"playableAd"===e.type}function D(e){return e&&e.type&&"MRAID"===e.type}function I(e){return e&&e.videoData&&e.videoData.videoType&&"ssa-external-video-player"===e.videoData.videoType}function w(e){return e&&e.videoData&&e.videoData.videoType&&"ssa-internal-video-player"===e.videoData.videoType}function L(e){var n={};return n.id=r(e),n.title="",n.credits=e.credits,n.staticContent=o.AdAssets.extractStaticFiles(e,P(e)),n.lastUpdateTime=e.lastUpdateTime,n.inventoryIndex=e.inventoryIndex,n.isCacheable=e.isCacheable=0<n.staticContent.length,n}function P(e){var n=e.ext;return A(n)&&n.videoData&&n.videoData.videoSource&&n.videoData.videoSource.html&&-1<n.videoData.videoSource.html.indexOf(o.AdAssets.getPlayableCacheFlag())}function T(e){var n=s.getApiData({deviceOs:1}).deviceOs;e.standaloneView=n===t.deviceOs.ios,e.translucentView=n===t.deviceOs.android}function O(e,n){var t={};return n&&n.ext&&n.ext.opportunityID&&(t.opportunityId=n.ext.opportunityID),e&&e.requestID&&(t.requestId=e.requestID),t}return{getAdId:r,getBannerId:b,getCreativeId:h,getAdType:y,formatParamsToAdId:function(e){if(e){if(!e.id){var n=b(e);n&&S(e,n,t.legacyCreativeId)}return e}},formatAdsForPrecache:function(e){var i=[];return a.each(e,function(e,n){var t=L(n);t.isCacheable&&i.push(t)}),i},isCacheableAd:function(e){return e&&e.isCacheable},getStoreAppId:function(e){if(e.ext.clickTags.storeAppId)return e.ext.clickTags.storeAppId;var n,t="",i=e.ext.clickTags.clickURL;return i&&((n=i.match(/id\d+/g))&&(n=(n=(n=n[n.length-1]).match(/\d+/g))[0]),t=n)&&(e.ext.clickTags.storeAppId=t),t},formatVastAdForPrecache:function(e,n){var t;return(t=L(e)).preProcessing=n,t.isCacheable=e.isCacheable=!0,t},setViewType:function(e,n,t){var i;n&&n.ext&&(i=n.ext)&&i.layoutData&&(i.layoutData.portrait&&i.layoutData.portrait.frameUrl&&i.layoutData.portrait.closeButtonUrl||i.layoutData.landscape&&i.layoutData.landscape.frameUrl&&i.layoutData.landscape.closeButtonUrl)&&T(e),t&&(e.viewType=t)},getViewType:function(e){return e&&e.settings?e.settings.viewType:null},getRequestOppParams:O,updateEventWithAdParams:function(e,n,t){return n&&(a.extend(t,O(e,n)),t.bannerId=b(n),t.creativeId=h(n),t.campaignType=y(n,e)),t},isPlayableCampaign:A,isPlayablePrecachedAd:P,isInternalCampaign:w,isMRAIDCampaign:D,isExternalCampaign:I,isCampaignShouldStartMuted:function(e,n){return!(!e||!e[t.sspProductNames[n]]||!0!==e[t.sspProductNames[n]].startVideoOnMute)},extendAdObjectWithConfig:function(e,n,t,i){n.settings=a.extend(!0,n.settings,i),n.ext&&n.ext.forceOrientation&&(n.settings.orientation=n.ext.forceOrientation.toLowerCase()),a.extend(!0,n,t,{url:e})},extendSettingsWithStandaloneViewSupport:T,getIntegrationType:function(e){if(e&&e.productType){var n=s[e.productType];if(e.demandSourceName&&n)return n[e.demandSourceName].getIntegrationType()}return null}}}},{"../components/Constants.js":9}],4:[function(n,e,t){e.exports=function(t,a,e){var r=n("./NativeLifeCycleEventsConstants.js"),o=a.jQuery(),s={};function c(e){a.log("AndroidLifeCycleEventHandlers | handleOnDestroy:",a.LogLevels.verbose);var n={};e&&(n.eventParams=e),t.PubSub.publish(r.serviceCallback+"."+r.AndroidEvents.onDestroy,[n])}return{publishEvent:function(e,n){var t,i;a.log("AndroidLifeCycleEventHandlers | _handleEvent:",a.LogLevels.verbose),s[r.AndroidEvents.onDestroy]=c,t=e,i=Object.keys(s),a.log("AndroidLifeCycleEventHandlers | _isEventSupported: "+t+" supportedEvents: "+i,a.LogLevels.verbose),t&&-1<o.inArray(t,i)&&s[e](n)}}}},{"./NativeLifeCycleEventsConstants.js":27}],5:[function(e,n,t){n.exports={eventicsCategories:{nomediaFileDownloadFail:{name:"nomediaFileDownloadFail",id:210},nomediaFileDownloadSuccess:{name:"nomediaFileDownloadSuccess",id:211}},noMediaFileUrl:"/users/android/.nomedia",logMessage:{tag:"AndroidNomediaFileHandler | ",fileInCache:"nomedia file already in cache",saveFileToCache:"save nomedia file to cache"},errorMessage:{fileAlreadyExist:"file_already_exist"}}},{}],6:[function(e,n,t){n.exports=function(a){var r,o=e("./AndroidNomediaFileConstants.js"),s=o.noMediaFileUrl;return{init:function(e){r=e},updateNomediaFileToCache:function(){var e,n=a.getConfig(),t=a.Cache.getRootCacheStructure(),i=(e=n).mobileSDKSettings.protocol+"//"+e.mobileSDKSettings.cdn+s;t&&-1!==a.Cache.getFileIndexInCache(t.cache,i)?a.log(o.logMessage.tag+o.logMessage.fileInCache):(a.log(o.logMessage.tag+o.logMessage.saveFileToCache),a.saveFileToCache("./",i).then(function(){r.trackEvent(o.eventicsCategories.nomediaFileDownloadSuccess)},function(e){e!==o.errorMessage.fileAlreadyExist&&r.trackEvent(o.eventicsCategories.nomediaFileDownloadFail,{generalMessage:e})}))}}}},{"./AndroidNomediaFileConstants.js":5}],7:[function(e,n,t){n.exports=function(n){var a={},t=!1;function r(e,n){var t=a[e],i=[];return t&&t[n]?i=t[n]:t[n]=i,i}return{init:function(e){t||(a[n.RV]={},a[n.IS]={},a[n.BN]={},t=!0)},addToBlacklistedCampaigns:function(e,n,t){if(e&&n&&t){var i=r(e,n);i&&-1===i.indexOf(t)&&i.push(t)}},getBlacklistedCampaigns:function(e,n){var t=[];return e&&n&&(t=r(e,n)),t},isEmpty:function(e,n){var t=r(e,n);return!t||0===t.length}}}},{}],8:[function(e,n,t){n.exports=function(l,u){var t,f,d="NativeCallback",i={deviceOs:1,"deviceIds[IFA]":0,"deviceIds[AID]":0},g=1500,p=l.Utils;function n(e){var n,t,i,a=new jQuery.Deferred,r="checkInstalledAppsSuccess",o="checkInstalledAppsFailed",s={appIds:e,requestId:Date.now().toString()},c=function(){l.PubSub.unsubscribe(n),l.PubSub.unsubscribe(t)};return n=l.PubSub.subscribe(d+"."+r,function(e){e.requestId===s.requestId&&(clearTimeout(i),c(),u.log("successfully check apps installed "+JSON.stringify(e.result),u.LogLevels.info),a.resolve(e.result))}),t=l.PubSub.subscribe(d+"."+o,function(e){clearTimeout(i),c(),u.log("failed to check apps installed."+JSON.stringify(e),u.LogLevels.info),a.reject()}),i=setTimeout(function(){c(),a.reject("SDK check apps installed timeout request")},g),u.callSDKFunction("checkInstalledApps",s,r,o),a.promise()}function r(e){var r={deviceId:"ios"===(t=u.getApiData(i)).deviceOs?t["deviceIds[IFA]"]:t["deviceIds[AID]"],os:t.deviceOs,campaignIds:{}},n=f.urlPaths&&f.urlPaths.campaignsStatus;n?(jQuery.each(e,function(e,n){var t,i,a;r.campaignIds[n.campaignId]=(t=n.isInstalled,a=t?(i=50,100):(i=0,50),Math.floor(Math.random()*(a-i))+i)}),jQuery.ajax({url:n,data:r,type:"GET",dataType:"jsonp",success:function(e){u.log("Success update campaigns status to server",u.LogLevels.verbose)},error:function(e,n){u.log("Success update campaigns status to server: response:"+e+".status: "+n,u.LogLevels.verbose)}})):u.log("No url in settings to update server on campaigns status",u.LogLevels.verbose)}function v(e,n){var t=!0;return e||(u.log("filter apps installed flag is false",u.LogLevels.verbose),t=!1),n&&0!==n.length||(u.log("get 0 campaigns to filter",u.LogLevels.verbose),t=!1),u.isLegacy({ios:"5.14",android:"5.16"})&&(u.log("NewController: Old controller version. filter campaigns by app installed is not supported in this version of SDK.",u.LogLevels.verbose),t=!1),t}function m(t,i,e){var a=new jQuery.Deferred;return jQuery.isEmptyObject(i)?a.resolve():n(e).then(function(e){var o,n;return jQuery.each(e,function(e,n){var t=i[e];t&&(n.bannerIds=t)}),o=t,n=e,jQuery.each(n,function(e,n){if(n.isInstalled){for(var t=[],i=0;i<o.length;i++){var a=u.AdUtils.getAdId(o[i]);n.bannerIds&&-1===n.bannerIds.indexOf(a)&&t.push(o[i])}for(var r=o.length=0;r<t.length;r++)o.push(t[r])}}),u.log("Campaigns after filtering: "+JSON.stringify(o),u.LogLevels.verbose),t=o,a.resolve(),e}).then(r).fail(function(e){u.log("failed filter campaigns by app installed. "+e,u.LogLevels.verbose),a.resolve()}),a.promise()}function a(e,n,t){if(t=t||[],!v((f=n).filterAppsInstalled,e))return p.returnResolvedPromise();for(var i={},a=e.length,r=[],o=0;o<a;o++){var s=e[o],c=u.AdUtils.getAdId(s),l=s&&s.ext,d=l&&l.appData;l&&d&&d.appId&&(0===t.length||-1===t.indexOf(l.type))&&(i[d.appId]||(i[d.appId]=[]),i[d.appId].push(c),-1===r.indexOf(d.appId)&&r.push(d.appId))}return m(e,i,r)}function o(e,n){if(f=n,!v(!0,e))return p.returnResolvedPromise();for(var t={},i=e.length,a=[],r=0;r<i;r++){var o=e[r],s=u.AdUtils.getAdId(o),c=o.appData;c&&c.filterIfInstalled&&c.appId&&(t[c.appId]||(t[c.appId]=[]),t[c.appId].push(s),-1===a.indexOf(c.appId)&&a.push(c.appId))}return m(e,t,a)}return{factory:function(e){return t=u.getApiData(i),"RewardedVideo"===e||"BrandConnect"===e||"Interstitial"===e||"Banner"===e?{filterByAppInstalled:a}:"OfferWall"===e?{filterByAppInstalled:o}:"Controller"===e?{checkIfAppInstallOnDevice:n}:void 0}}}},{}],9:[function(e,n,t){var i=e("../constants/featureCompatibilityMap");n.exports={CB:"NativeCallback",WebControls:"WebControls",BC:"BrandConnect",RV:"RewardedVideo",OW:"OfferWall",IS:"Interstitial",BN:"Banner",RIS:"RIS",taskManager:"TaskManagerDS",libs:"libs",fakeOWLoader:"fakeOWLoader",timeunit:6e4,closeAndBackDisabledTimer:1e4,closeAndBackDisabledTimerOW:8e3,vastResponseTimeout:8e3,vastMinimumResponseTimeout:500,legacyCreativeId:0,domainUrls:{local:"local.ssacdn.com",prod:"www.supersonicads.com"},environment:{develop:"dev",production:"prod",stage:"stage"},errors:{missing:"Missing required parameter: ",invalid:"Invalid parameter: ",unknown:"Unknown parameter: ",appInfo:"Failed to retrieve application info",device:"Failed to retrieve device status",filemap:"Failed to retrieve file map",showAdFailedReasons:{preloadNoAd:"No ad on preload function",showNoAd:"No ad on show function",taskManagerPreload:"taskManager failed to preload",taskManagerEngage:"taskManager failed to engage"}},noMoreOffersReason:{refreshFeedAfterClosingAd:"Refresh Feed after closing ad",noMoreOffersToShowInFeed:"Finish view all campaigns (engageEnd)"},DebugLevels:{0:"NONE",1:"ERROR",2:"INFO",3:"VERBOSE"},videoStates:{none:0,play:1,stop:2},confirmCloseMsg:{close:"Are you sure you want to quit the offer?",yes:"OK",no:"Cancel"},confirmCloseMsgMap:{0:"during",1:"after"},protocol:{http:"http:",https:"https:",file:"file:"},styleAccordingToProtocol:{secured:"secured",unsecured:"unsecured"},labels:{noInternet:"No internet connection. Please connect and try again.",noOffers:"Sorry, There are no offers at the moment"},closeButtonStates:{close:"close",confirm:"confirm",back:"back",confirmNextFrame:"confirmNextFrame",nextFrame:"nextFrame",ignore:"ignore"},openUrlMethods:{storeKit:"storeKit",external_browser:"external_browser",store:"store",webview:"webview"},deviceOs:{android:"android",ios:"ios"},deviceOEM:{amazon:"amazon"},nativeInterfaceMethod:{displayWebView:"displayWebView"},nativeCallBacks:{hideSuccess:"onHideSuccess",hideFailed:"onHideFailed"},offerWallSetting:{immersive:"immersive",OLXD:"OLXD"},appInfo:{orientation:{landscape:"landscape",portrait:"portrait",none:"none"}},sspProductNames:{RewardedVideo:"rewardedVideo",Interstitial:"interstitial",OfferWall:"offerWall",Banner:"banner"},demandSourceType:{demandSource:"demandSource",instance:"instance"},demandSourceStates:{notInitiated:0,initFail:1,initiated:2,available:3,notAvailable:4,exhausted:5,cappedPerSession:6,initPending:7,loadPending:8},templateStyle:{template4:{minDialogBtnWidth:187,baseDialogBtnWidth:187,maxDialogBtnWidth:187,maxDialogBtnTextWidth:165},defaultTemplate:{minDialogBtnWidth:75,baseDialogBtnWidth:100,maxDialogBtnWidth:133,maxDialogBtnTextWidth:115}},viewsStates:{hybrid:2,normal:0},hybridViews:[{viewType:"controller",screenRatio:.999},{viewType:"store",screenRatio:.001}],baseDataKeys:["bannerId","creativeId","campaignType","opportunityId","requestId"],iphoneXDeviceModels:["iPhone10,3","iPhone10,6","iPhone11,6","iPhone11,4","iPhone11,2","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5"],iphoneXDeviceResolution:{type1:{width:375,height:812},type2:{width:414,height:896}},requiredDeviceInfo:["appOrientation","connectionType","deviceOs","SDKVersion","deviceOSVersion","deviceModel","diskFreeSize"],requiredAppInfo:["applicationKey","applicationUserId"],optionalAppInfo:["campaignId","showDeliveryLimitationsLog","numOfCampaigns","disableCache","disableSession","country","language","itemName","itemCount","itemSignature","timestamp","demoCampaigns","mraid","admin","page","pageSize","landingId","maxVideoLength","minimumOfferCommission","minimumOfferCommissionSignature","useClientSideCallbacks","applicationUserGender","applicationUserAgeGroup","applicationUserCreationDate","applicationUserCreationDateSignature","placementId","SDKPluginType"],abTests:{CnCcCdn:"CC2",CnNonCcCdn:"NCC2",CnUser:"CN",NonCnUser:"NCN",WithoutCC:"WOCC",abt:"abt"},abtParamByProductType:{RewardedVideo:"rewardedVideo",Interstitial:"interstitial",Banner:"banner",OfferWall:"offerwall"},deviceLimitations:["iPod5,1","iPad2,1","iPad4,8","iPad3,5","iPad3,6","iPad4,5","iPhone4,1","iPhone7,1","iPad4,4","iPad4,2","iPad2,2","iPad2,5","iPad4,1","iPad3,4","iPad3,3","iPad4,7","iPad3,1","iPad2,4"],applicationsLimitations:["49726195"],moat:{disabled:"off"},MOAT_PC:"ironsourceinappvideo555077879249",testAppBundleIds:["com.supersonic.mediation.test","com.ironsrcmobile.UltraApp","com.ironsrcmobile.UltraApp-enterprise","com.supersonic.automationapp","com.ironsrcmobile.Bridge","com.ironsource.othermediationtester","com.ironsrc.ISMedAdapters"],defaultOrientation:{BrandConnect:"application",RewardedVideo:"application",Interstitial:"application",OfferWall:"application",Banner:"application",general:"device",undefined:"application"},vastRequestPlaceholders:{moatEnabled:"{MT_ENABLED}",requestId:"{REQ_ID}",opportunityId:"{OPP_ID}"},featureCompatibilityMap:i,blockedProductsPerApiLevel:{BrandConnect:{android:/^10/,ios:/^7/},RewardedVideo:{android:/^10/,ios:/^7/},OfferWall:{android:/^10/,ios:/^7/},Interstitial:{android:/^10/,ios:/^7/},Banner:{android:/^10/,ios:/^7|8|9/}},storeSearchKeys:{ios:["itunes.apple.com"],android:["market://","play.google.com"]},gatewayDestinationMap:{RV:{production:"//rv-gateway.supersonicads.com/gateway/sdk/request",staging:"//staging-rv-gateway.sonic-us.supersonicads.com/gateway/sdk/request"},IS:{production:"//is-gateway.supersonicads.com/gateway/sdk/request/",staging:"//staging-is-gateway.sonic-us.supersonicads.com/gateway/sdk/request/"},OW:{production:"//ow-gateway.supersonicads.com/gateway/offerwall/request",staging:"//staging-ow-gateway.sonic-us.supersonicads.com/gateway/offerwall/request"},BN:{production:"//banner-gateway.supersonicads.com/gateway/sdk/request",staging:"//staging-banner-gateway.sonic-us.supersonicads.com/gateway/sdk/admin/request"}},appConfigPath:"/delivery/mobile/adUnit/getAppConfig.php",appExtConfigPath:"/users/microjob/sdkconfig.json",appExtConfigPathStaging:"/users/microjob/sdkconfig_staging.json",requiredSDKDataKeys:{applicationKey:"applicationKey",applicationUserId:"applicationUserId",appOrientation:"appOrientation",deviceLanguage:"deviceLanguage",bundleId:"bundleId",sdkAbName:"sdkAbName"},HTTPMethods:{GET:"GET",POST:"POST"},adClosedErrorReason:{unexpectedCloseActivityDestroy:"unexpectedClose_ActivityDestroy"},viewTypes:{externalView:"external"},integrationType:{manual:"M",automatic:"A"},DEFAULT_AMOUNT_OF_INVENTORIES:1,iOS_UIModalPresentationFullScreen:0}},{"../constants/featureCompatibilityMap":56}],10:[function(e,n,t){n.exports=function(i,a,t){function r(e){var n=e?e.productType:null;return!n||a.isLegacy(a.featureMap.MDS[n])}function o(e,n){return n=n||{},e&&e.demandSourceName&&!a.isLegacy(a.featureMap.MDS[t.RV])&&(n.demandSourceName=e.demandSourceName,n.demandSourceId=e.demandSourceId,n.isInAppBidding=e.isInAppBidding,n.integrationType=e.integrationType),n}return{isLegacy:r,extendCallbackParamsWithDemandConfig:o,extendCallbackParamsWithProductConfig:function(e,n){return n=o(e,n),e&&e.productType&&(n.productType=e.productType),n},extendCallbackParamsWithParentProductConfig:function(e,n){if(n=o(e,n),e&&e.productType){var t=a[e.productType];t&&(n.productType=i.Utils.isFunction(t.getProductType)?t.getProductType():e.productType)}return n},shouldReceiveMessage:function(e,n){return!(!e||!n)&&!(!e.productType||!e.demandSourceName)&&n.productType===e.productType&&(r(e)||n.demandSourceName===e.demandSourceName)},isManualRewardedVideoIntegration:function(){return a.RewardedVideo&&!0===a.RewardedVideo.isManualIntegration},setManualRewardedVideoTypeForNative:function(e){return e&&e.productType&&e.productType===t.RV&&(e.productType=t.IS),e}}}},{}],11:[function(e,n,t){n.exports=function(n){var t=null;return{set:function(e){t=e},get:function(){return t||null},reset:function(){t=null},getDisplayedAdType:function(){return t?t.productType:null},getDisplayedAdDemandName:function(){return t?t.demandSourceName:null},getDisplayedAdSettings:function(){return t?t.settings:null},isDisplayed:function(){return null!==t},isAdDisplayed:function(e){return t&&e&&n.getAdId(t)===n.getAdId(e)}}}},{}],12:[function(e,n,t){n.exports=function(){var r={};return{getABTestConfiguration:function(e,n){var t=r[e]&&r[e].abtest&&r[e].abtest.default,i=r[e]&&r[e].abtest&&r[e].abtest[t]||{},a=r[e]&&r[e].abtest&&r[e].abtest[n]||{};return jQuery.extend(i,a)},setConfig:function(e){r=e||{}},getExtConfig:function(){return r},getGeneralConfig:function(){return r.general},reset:function(){r={}}}}},{}],13:[function(e,n,t){n.exports=function(e,i,n){var a,r=e||"",o=n||6e4,s="Invalid API response",c=function(n){var t=!0;return jQuery.each(i,function(e){t=t&&void 0!==n[e]}),t};return{getInventory:function(e,n,t){a=new jQuery.Deferred;var i=n||r;return jQuery.ajax({url:i,data:e,type:"GET",dataType:t||"jsonp",timeout:o}).then(function(e){e&&e.errorCode&&e.errorMessage?a.reject({errorMessage:e.errorMessage,errorCode:e.errorCode}):c(e)?a.resolve(e):a.reject({errorMessage:s})},function(e,n,t){var i={errorMessage:"Error fetching inventory. Error data: "+n};a.reject(i)}),a.promise()},isValidResponseStructure:c}}},{}],14:[function(e,n,t){n.exports=function(o,s){var c,i={hit:1,miss:2,eventResult:"eventResult",resultReason:"resultReason"};function n(e){function r(e,n){var t;return e&&e.url&&(t={url:function(e,n){if(!e)return"";if(n)for(var t=n.length,i=0;i<t;i++)e=e.replace("{{"+n[i].key+"}}",encodeURIComponent(n[i].value));return e=e.replace(/\{\{[\w\d\s]*\}\}/g,"ok")}(e.url,n),type:e.type}),t}function t(e,n){var t,i,a=c[e];"object"==typeof a&&(0<a.length&&(a=a[0]),(t=r(a,n))&&(i=t,s.firePixel(i),o.log("Callback: "+JSON.stringify(i),o.LogLevels.info)))}return c=e,{track:function(e){var n;if(e&&c)switch(e.trackingType){case"request":t("requestTracking",null);break;case"responseHit":t("responseTracking",[{key:i.eventResult,value:i.hit}]);break;case"responseMiss":n=e.data,t("responseTracking",[{key:i.eventResult,value:i.miss},{key:i.resultReason,value:n}])}}}}return{init:function(e){return new n(e)}}}},{}],15:[function(e,n,t){n.exports=function(e,i,n){function t(){var e=n("#displayedFrame");return e&&0<e.length?e:null}return{getDisplayedAdFrame:t,isFrameDisplayed:function(e){var n=t();return e&&n&&e[0]===n[0]},getAdUnitClassObj:function(e){var n="ssaAdUnit",t={class:n+" ",selector:"."+n};return e&&e.productType?(t.class+=e.productType+" ",t.selector+="."+e.productType,e.demandSourceName&&(t.class+=e.demandSourceName+" ",t.selector+="."+e.demandSourceName)):i.log("In getAdUnitClass with no ad",i.LogLevels.error),t},hideFrame:function(){var e=t();e&&e.addClass("hidden")},displayFrame:function(){var e=t();e&&e.removeClass("hidden")}}}},{}],16:[function(e,n,t){n.exports={NativeAPI:{updateConsentInfo:".updateConsentInfo"}}},{}],17:[function(s,e,n){e.exports=function(n,t,e){var i=s("./GDPRConstants.js"),a=!1,r=e.CB;function o(e){"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(t.getConfig().applicationSettings.consent=e)}return{init:function(e){e&&!a&&(n.PubSub.subscribe(r+i.NativeAPI.updateConsentInfo,function(e){if(e&&e.gdprConsentStatus)return t.log("updateConsentInfo | controller | params: "+JSON.stringify(e),t.LogLevels.info),void o(e.gdprConsentStatus);t.log("updateConsentInfo | controller | without params or gdprConsentStatus key",t.LogLevels.info)}),a=!0)},setConsent:o,getConsent:function(){return t.getConfig().applicationSettings.consent}}}},{"./GDPRConstants.js":16}],18:[function(e,n,t){function i(a,o){var e="NativeCallback",n=!1,r=[],t={GET:"GET",POST:"POST"},s={requestUnknown:"requestUnknown",requestStarted:"requestStarted",responseReceived:"responseReceived",requestError:"requestError"};function i(){a.PubSub.subscribe(e+".httpRequestStatusChanged",function(e){o.checkRequiredCallbackParams(["identifier","status"],e,"httpRequestStatusChanged").didSucceed&&c(e)})}function c(e){o.log("HTTPService - request status changed",o.LogLevels.verbose);var n=g(e.identifier,r);if(e.status===s.requestStarted)l(n);else if(e.status===s.responseReceived){var t={headers:e.responseParams.headers,statusCode:e.responseParams.statusCode,ranOnNative:!0},i=e.data;e.data&&(i=decodeURIComponent(i)),d(n,i,t)}else u(n,e.errMsg)}function l(e){o.log("onRequestStarted "+e.identifier,o.LogLevels.verbose),a.Utils.isFunction(e.onRequestStarted)&&e.onRequestStarted()}function d(e,n,t){o.log("_onResponseReceived "+e.identifier,o.LogLevels.verbose),f(e),a.Utils.isFunction(e.onResponseReceived)&&e.onResponseReceived(n,t)}function u(e,n){o.log("onRequestError "+n,o.LogLevels.verbose),f(e),a.Utils.isFunction(e.onRequestError)&&e.onRequestError(n)}function f(e){if(e){var n=r.indexOf(e);-1<n&&r.splice(n,1)}}function g(n,e){var t=jQuery.grep(e,function(e){return e.identifier===n});return 1!==t.length?null:t[0]}function p(){return+new Date+""+Math.random()}function v(e){return(!a.Utils.isDefined(e.allowNative)||e.allowNative)&&n}function m(e,n){return jQuery.extend(n,{url:e},{identifier:p()}),a.Utils.isDefined(n.background)||(n.background=!1),n}function b(e){o.log("_sendNativeEngineRequest",o.LogLevels.verbose);var i={};jQuery.each(e,function(e,n){if(!a.Utils.isFunction(n)){var t={};t[e]=n,jQuery.extend(i,t)}}),o.callSDKFunction("sendHttpRequest",i,"httpRequestStatusChanged","httpRequestStatusChanged")}function h(i){var a;o.log("_sendWebEngineRequest",o.LogLevels.verbose);var e=i;l(i);var r=function(e,n){var t={headers:e.getAllResponseHeaders(),statusCode:e.status,ranOnNative:!1};d(i,n,t)},n=jQuery.ajax(e);n.done(function(e,n,t){var i=t.responseText;r(t,i)}),n.fail(function(e,n,t){a=t,0===e.status?u(i,a&&""!==a?a:"unknown error"):r(e)})}function S(e){r.push(e),v(e)?b(e):h(e)}function y(e,n){n||(n={}),n.type=t.GET,S(m(e,n))}function C(e,n){n||(n={}),n.type=t.POST,S(m(e,n))}function A(){return r}function D(){return n}function I(e){n=e,i()}var w={GETRequest:y,POSTRequest:C,getPendingRequests:A,getIsNativeEngineExist:D,init:I};return w}n.exports=i},{}],19:[function(e,n,t){n.exports=function(d,u){var f="NativeCallback",g=!1;return{isHybridCampaign:function(e,n){return!u.isLegacy(u.featureMap.hybrid)&&"ios"===u.getApiData({deviceOs:1}).deviceOs&&e&&e.ext&&d.Utils.isDefined(e.ext.features)&&(n&&n.hybridOnClick&&!e.ext.forceOrientation||e.ext.features.allowHybrid&&!e.ext.forceOrientation||e.ext.isHybridFlow&&e.ext.forceOrientation)&&e.ext.clickTags&&u.AdUtils.getStoreAppId(e)&&e.ext.clickTags.pixelURL&&"CPVI"===e.ext.type},clearAppPage:function(e){e&&u.callSDKFunction("clearAppPage",{viewUniqueId:e})},loadHybridCampaign:function(e,s){var c=new jQuery.Deferred;if(u.isLegacy(u.featureMap.hybrid))c.reject();else{u.callSDKFunction("preLoadAppPage",{appId:e,viewUniqueId:s});var l=d.PubSub.subscribe(f+".appStoreInsideLoaded",function(e){var i,t,a,n,r,o;e&&"object"==typeof e&&e.viewUniqueId&&e.viewUniqueId===s&&(d.PubSub.unsubscribe(l),e.isLoaded?(i=s,t=d.PubSub.subscribe(f+".appStoreInsideClosed",function(e){if(e.viewUniqueId===i){var n=jQuery.extend({name:"appStoreInsideClosed"},e);d.PubSub.unsubscribe(t),g&&d.PubSub.publish("ViewsManager.viewClosed"),u.postAdUnitEvent(JSON.stringify(n))}}),a=d.PubSub.subscribe(f+".appStoreInsideDisplayHybrid",function(e){if(e.viewUniqueId===i){var n=jQuery.extend({name:"appStoreInsideDisplayHybrid"},e);d.PubSub.unsubscribe(a),u.postAdUnitEvent(JSON.stringify(n))}}),n=d.PubSub.subscribe(f+".appStoreInsideHideHybrid",function(){d.PubSub.publish("SDKController.HybridAdDidClosed"),d.PubSub.unsubscribe(n)}),r=d.PubSub.subscribe("SDKController.HybridChangeRatio",function(e){var n=e.hybridJson,t=e.viewUniqueId;t===i&&(0===n[0].screenRatio?(d.PubSub.unsubscribe(r),g=!0):1===n[0].screenRatio&&(d.PubSub.unsubscribe(r),d.PubSub.publish("ViewsManager.viewClosed")),u.callSDKFunction("hybridChangeRatio",{hybridJson:JSON.stringify(n),viewUniqueId:t}))}),o=d.PubSub.subscribe("HybridService.closeHybridFlow",function(e){e.viewUniqueId!==i&&(d.PubSub.unsubscribe(o),d.PubSub.unsubscribe(t),d.PubSub.unsubscribe(a),d.PubSub.unsubscribe(r),d.PubSub.unsubscribe(n))}),c.resolve()):c.reject())})}return c.promise()},createHybridId:function(e,n){var t="";return void 0!==n.demandSourceName&&(t=n.demandSourceName),t+=n.productType+u.AdUtils.getAdId(e)+u.AdUtils.getStoreAppId(e)}}}},{}],20:[function(e,n,t){n.exports=function(r,i,o,a,s,c,l,d){function u(e,n,t,i){a.extendAdObjectWithConfig(n,e,t,i),c.ifShouldSetIphoneXBG(e)&&(e.settings.isTransparentLayout=!0),l.isInitiated()&&(e.settings.ringerMuteOnStart=!0),r.log("Extended ad object, ad is "+JSON.stringify(e),r.LogLevels.verbose)}function f(e){var n="ssaAdUnit",t={class:n+" ",selector:"."+n};return e&&e.productType?(t.class+=e.productType+" ",t.selector+="."+e.productType,e.demandSourceName&&(t.class+=e.demandSourceName+" ",t.selector+="."+e.demandSourceName)):r.log("In getAdUnitClass with no ad",r.LogLevels.error),t}function g(e){var n,t=a.getAdId(e),i=null;return n=f(e).selector,o.each(o(n),function(){return o(this).data("id")!=t||(i=o(this),!1)}),i}function p(e,n,t,i){u(e,n,t,i),r.log("line[2717]: load ad unit url",r.LogLevels.verbose),g(e)||function(e,n){r.log("SDKController | loading ad to frame: "+a.getAdId(e)+e.productType,r.LogLevels.verbose);var t=f(e).class;n&&(t+="hidden "),o("<iframe />",{class:t,src:e.url}).data("id",a.getAdId(e)).data("close",!0).appendTo("body")}(e,i.preload)}function v(){var e=o(".loaderOW");e.addClass("loaderOWFadeOut"),setTimeout(function(){r.log("enter timeOut",r.LogLevels.verbose),o(".loaderOW").addClass("hidden"),e[0].offsetWidth=e[0].offsetWidth},600),o("#ssaLoaderWrap").addClass("hidden")}function m(e,n,t,i){v(),t(!1),d.set(n),e.removeClass("hidden").attr("id","displayedFrame"),i()}function b(e){e===i.OW?o(".loaderOW").removeClass("loaderOWFadeOut hidden"):o("#ssaLoaderWrap").removeClass("hidden")}return{createAndLoadAdUnitFrame:p,updateAdUnitUrl:function(e,n,t,i){var a;u(e,n,t,i),(a=g(e))?(r.log("line[3054]: updated iframe url for product "+t.productType,r.LogLevels.verbose),a[0].src=e.url):i.forceCreation?(r.log("Cannot find iframe to update, creating new one",r.LogLevels.verbose),p(e,n,t,i)):r.log("line[3051]: cannot find iframe to update url",r.LogLevels.verbose)},displayAdUnitFrame:function(e,n,t,i){var a=g(e);a.data("loaded")?(r.log("display frame",r.LogLevels.verbose),o.when(i(e,!1)).done(function(){m(a,e,n,t)})):(r.log("display frame with loader",r.LogLevels.verbose),d.set(e),o.when(i(e,!0)).done(function(){!function(e,n,t,i){if(e.data("loaded"))return m(e,n,t,i);t(!0),r.log("SDKController | Display with loader, frame "+e.data("id"),r.LogLevels.verbose),n&&n.productType&&(b(n.productType),e.attr("id","displayedFrame"))}(a,e,n,t)}))},handleScreenVisible:function(e,n,t){e&&b(t.productType),n&&(r.log("ad unit open error",r.LogLevels.verbose),n.addClass("hidden").attr("id",""))},unloadAdUnitFrame:function(t){r.log("SDKController | unloading ad from frame: "+a.getAdId(t)+t.productType,r.LogLevels.verbose),o.each(o(s.getAdUnitClassObj(t).selector),function(e,n){return o(n).data("id")!==a.getAdId(t)||(t.engaged=s.isFrameDisplayed(o(n)),t.engaged&&n.removeAttribute("id"),t.productType===i.OW?setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},0):n&&n.parentNode&&n.parentNode.removeChild(n),!1)})},displayLoader:b,hideLoader:v,hideFrame:s.hideFrame,displayFrame:s.displayFrame,isContainerLoaded:function(e){return!!g(e)},onAdUnitLoaded:function(e,n,t){var i=g(e);if(i)if(i.data("loaded"))r.log("SDKController | We already received the loaded event for this frame",r.LogLevels.verbose);else{i.data("loaded",!0);var a=s.isFrameDisplayed(i);r.log("SDKController | ad loaded: "+r.AdUtils.getAdId(e)+"|"+a?"frame Displayed: true":"frame Displayed: false|"+f(e).selector,r.LogLevels.verbose),a&&m(i,e,n,t)}},getAdFrameByProductAndId:g}}},{}],21:[function(e,n,t){function i(e){var n=e,a=[],i=-1,t;function r(){return a.length}function o(){return a}function s(e){Array.isArray(e)&&(i=0,a=e)}function c(){return a[i]}function l(){return t}function d(e){t=e}function u(e){var n,t=p(e);return-1<t&&(n=a.splice(t,1)[0])&&(m()?i=-1:i<t?i=(i+1)%r():t<i&&i--),n}function f(e){var n=p(e);if(-1<n)return a[n]}function g(e,n){var t=p(n);if(-1<t)return a[t]=e,a[t]}function p(e){if(void 0===e)return-1;for(var n=0,t=r(),i=e.toString();n<t&&e;n++)if(a[n].id===i)return n;return-1}function v(){return!m()&&(i+1)%r()!==i}function m(){return 0===r()}function b(){a=[],i=-1,t=null}var h={getOffers:o,getCurrentOffer:c,getOfferById:f,getBackfillOffer:l,setOffers:s,setBackfillOffer:d,removeOfferById:u,replaceOfferById:g,isNextOfferAvailable:v,isEmpty:m,size:r,reset:b};return h}n.exports=i},{}],22:[function(e,n,t){n.exports=function(i,a){var r=0,o=0;function n(){return r}return{setLastDisplayedAdCampaignId:function(e,n,t){i.getApplicationExternalConfig().getABTestConfiguration(t,n).sendLastCampaignId&&t===a.IS&&(r=e,o=n)},getLastDisplayedAdCampaignId:n,shouldAddLastDisplayedAdCampaignIdToPayload:function(e){return i.getApplicationExternalConfig().getABTestConfiguration(e,o).sendLastCampaignId&&e===a.IS&&0!==n()}}}},{}],23:[function(e,n,t){function i(r){var o,s,c,l,d,u,a={none:0,error:1,info:2,verbose:3},f={0:"NONE",1:"ERROR",2:"INFO",3:"VERBOSE"};function g(e,n){var t=r.isDefined(e)?e:"Controller",i=r.isDefined(n)?f[n]:f[c];return c?"SupersonicAds "+t+" ["+i+"] :":""}return{init:function(e,n,t,i){d=window.console||{},o=e,l=n,u=i,(c=t)?(s=d.log,d.log=function(e){this.log(e,a.verbose)}):d.log=function(){}},log:function(e,n,t){var i,a;(window.productionDebug&&u&&u({url:"http://iron-debug-controller.com?log="+e,type:"pixel"}),n&&c<n)||(r.isString(e)||(e=JSON.stringify(e)),r.isFunction(s)&&"android"===o?s.call(d,g(t,n)+e):(i=g(t,n)+e,(a={eventName:"log",prefix:"logmessage"}).parameters={message:i,acknowledgeWith:"acknowledgeMessage",declineWith:"errorTest"},l&&l.postMessage(a)))},debugMsg:g,LogLevels:a,DebugLevels:f}}var a;n.exports=function(e){return a||(a=new i(e)),a}},{}],24:[function(f,e,n){e.exports=function(e,t){var i=f("./Constants.js"),a="moatAPI",n="moatStartTrackingSuccess",r="moatStartTrackingFail",o="moatStopTrackingSuccess",s=!1,c=!1,l=!1;function d(){return s}function u(){return c}return{initWithOptions:function(e){u()&&t.log("MOATService - initWithOptions MOAT is already initialized",t.LogLevels.verbose),l||(t.setAllowFileAccessFromFileURLs(!0),l=!0);var n=e||{};n.loggingEnabled="prod"!==t.getEnv()&&(t.getConfig().mobileSDKSettings.deviceOs!==i.deviceOs.ios||"true"),t.getConfig().mobileSDKSettings.deviceOs===i.deviceOs.android&&(n.disableAdIdCollection=!0),t.callSDKFunction(a,{moatFunction:"initWithOptions",moatParams:n}),c=!0},containsMOATData:function(e){return!!(e.ext&&e.ext.ivt&&e.ext.ivt.mt)},vastContainsMOATData:function(e){return e.ext&&e.ext.videoData&&e.ext.videoData.videoSource&&e.ext.videoData.videoSource.vast&&-1!==e.ext.videoData.videoSource.vast.indexOf("mt=")},createAdTracker:function(){d()&&t.callSDKFunction(a,{moatFunction:"createAdTracker"})},startTracking:function(){d()&&(e.PubSub.subscribe(i.CB+"."+n,function(e){t.log(a+" Start tracking success: "+JSON.stringify(e),t.LogLevels.verbose)}),e.PubSub.subscribe(i.CB+"."+r,function(e){t.log(a+" Start tracking fail: "+JSON.stringify(e),t.LogLevels.verbose)}),t.callSDKFunction(a,{moatFunction:"startTracking"},n,r))},stopTracking:function(){d()&&(e.PubSub.subscribe(i.CB+"."+o,function(e){t.log(a+"Stop tracking success: "+JSON.stringify(e),t.LogLevels.verbose)}),t.callSDKFunction(a,{moatFunction:"stopTracking"},o))},isTrackingEnabled:d,isInitialized:u,enableTracking:function(){s=c},disableTracking:function(){s=!1},extractMoatDataFromAd:function(e){var n={};return n.ids=e.ext.ivt.mt||{},n.publisherCode=e.ext.ivt&&e.ext.ivt.mtpcode?e.ext.ivt.mtpcode:i.MOAT_PC,n}}}},{"./Constants.js":9}],25:[function(e,n,t){function i(){var e,n={init:function(n,t,e){return this.receiveMessage(function(e){t.call(n,e)},e),this},postMessage:function(e,n,t){n&&(t=t||parent).postMessage(e,n.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(n,t){n&&(e=function(e){"string"==typeof t&&e.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(e.origin)||("function"!=typeof t||t(e.data))&&n(e)}),window.addEventListener?window[n?"addEventListener":"removeEventListener"]("message",e,!1):window[n?"attachEvent":"detachEvent"]("onmessage",e)}};return n}n.exports=i},{}],26:[function(O,e,n){function t(){var e=O("./Inventory.js"),a={},n=[],t,i;function r(){i=4}function o(){if(I())return Math.max(1,t-1)}function s(){if(0!==Object.keys(a).length)return a[o()]}function c(e){return I()&&w()?e?a[e].size():a[o()].size():0}function l(e){return I()&&w()?e?a[e].getOffers():a[o()].getOffers():[]}function d(){Array.isArray(n)&&n.length>i&&delete a[n.shift()]}function u(e,n){if(Array.isArray(e)&&0!==e.length){var t=void 0!==n?n:D();void 0===a[t]&&(t=D());for(var i=0;i<e.length;i++)e[i].inventoryId=t;return a[t].setOffers(e),t}}function f(e,n){if(e){var t=void 0!==n?n:D();return void 0===a[t]&&(t=D()),e.inventoryId=t,a[t].setBackfillOffer(e),t}}function g(e){if(I()&&w())return e?a[e].getCurrentOffer():a[o()].getCurrentOffer()}function p(e){if(I()&&w())return e?a[e].getBackfillOffer():a[o()].getBackfillOffer()}function v(e,n){if(I()&&w())return n?a[n].removeOfferById(e):a[o()].removeOfferById(e)}function m(e,n){if(I()&&w())return n?a[n].getOfferById(e):a[o()].getOfferById(e)}function b(e,n,t){if(I()&&w())return t?a[t].replaceOfferById(e,n):a[o()].replaceOfferById(e,n)}function h(e){return!(!I()||!w())&&(e?a[e].isNextOfferAvailable():a[o()].isNextOfferAvailable())}function S(e){return!I()||!w()||(e?a[e].isEmpty():a[o()].isEmpty())}function y(){n=[],a={},t=void 0}function C(e){var n=void 0!==e?e:o();n&&a[n]&&(delete a[n],t--)}function A(){return a}function D(){return void 0===t&&(t=1),a[t]=new e(t),n.push(t),t++,d(),t-1}function I(){return 0!==n.length&&void 0!==t}function w(){return void 0!==a[o()]}function L(){return i}function P(){return t}r();var T={getOffers:l,getCurrentOffer:g,getOfferById:m,getBackfillOffer:p,setOffers:u,setBackfillOffer:f,removeOfferById:v,replaceOfferById:b,isNextOfferAvailable:h,isEmpty:S,size:c,reset:y,getActiveInventoryId:o,getActiveInventory:s,removeInventory:C,getInventories:A,getAmountOfInventoriesAllowed:L,getAvailableInventoryId:P};return T}e.exports=t},{"./Inventory.js":21}],27:[function(e,n,t){n.exports={CB:"NativeCallback",serviceCallback:"serviceCallback",NativeAPI:{onNativeLifeCycleEvent:"onNativeLifeCycleEvent"},AndroidEvents:{onStart:"onStart",onPause:"onPause",onResume:"onResume",onDestroy:"onDestroy"}}},{}],28:[function(l,e,n){e.exports=function(e,i,n){var t=l("./NativeLifeCycleEventsConstants.js"),a=i.jQuery(),r=[],o=new(l("./AndroidLifeCycleEventHandlers.js"))(e,i,n);function s(){e.PubSub.subscribe(t.CB+"."+t.NativeAPI.onNativeLifeCycleEvent,function(e){var n,t;i.log("LifeCycleEventsService | received new event: "+JSON.stringify(e),i.LogLevels.info),e&&(n=e.lifeCycleEvent,t=e,c(n)&&o.publishEvent(n,t))})}function c(e){return e&&-1<a.inArray(e,r)}return{init:function(){s()},startNotify:function(e){i.log("LifeCycleEventsService | startNotify | event: "+e,i.LogLevels.info),c(e)||r.push(e)},stopNotify:function(e){i.log("LifeCycleEventsService | stopNotify | event: "+e,i.LogLevels.info),c(e)&&r.splice(a.inArray(e,r),1)}}}},{"./AndroidLifeCycleEventHandlers.js":4,"./NativeLifeCycleEventsConstants.js":27}],29:[function(e,n,t){n.exports=function(){var i,a={iframe:"#adSandbox",url:"",adData:"",templateClass:"obfuscationIframe",src:"{{url}}",frameBorder:"0",scrolling:"no",style:{},id:""},r={};return{init:function(e,n){if((r=jQuery.extend(a,e)).adData&&""!==r.adData){var t=r.src.replace("{{url}}",r.url);(i=jQuery("<iframe />",{id:r.id,class:r.templateClass,src:t,scrolling:r.scrolling,frameborder:r.frameBorder}).css(r.style)).on("load",function(){n(i)}),document.documentElement.appendChild(i[0])}},removeIframe:function(e){if(e){var n=document.getElementById(e);n&&n.parentNode.removeChild(n)}}}}},{}],30:[function(e,n,t){n.exports=function(o){var s=e("./Constants.js");return{open:function(e){if(e&&e.type){if("openUrl"!==e.type)return!1;var n,t=e.callback;e.method||(o.getApiData({deviceOs:1}).deviceOs===s.deviceOs.ios?!e.appId||!o.isLegacy(o.featureMap.hybrid)&&o.isLegacy({ios:"5.38",android:"99"})?e.method=s.openUrlMethods.external_browser:e.method=s.openUrlMethods.storeKit:e.method=s.openUrlMethods.store);var i=(a=e,(r={default:{}})[s.openUrlMethods.storeKit]={appId:a.appId,viewUniqueId:o.StoreKitService.getViewUniqueId(a)},r[s.openUrlMethods.external_browser]={},r[s.openUrlMethods.store]={},r[s.openUrlMethods.webview]={controls:!0},r[a.method]||r.default);return n=jQuery.extend({url:e.url,method:e.method},i),o.openUrl(n,t),!0}var a,r;return!1},openForOW:function(e){if(e&&e.type&&"openUrl"===e.type){var n={},t=e.callback;return n=e.externalBrowser?{url:e.url,controls:!0,method:"external_browser"}:e.method===s.openUrlMethods.external_browser?{url:e.url,method:"external_browser"}:e.install?"ios"===o.getApiData({deviceOs:1}).deviceOs?{url:e.url,controls:!0,method:"external_browser"}:{url:e.url,controls:!0,method:"store"}:{url:e.url,controls:!0,method:"webview"},o.openUrl(n,t),!0}return!1}}}},{"./Constants.js":9}],31:[function(e,n,t){n.exports={NativeAPI:{failCallback:"handleAppOrientationDataFailed",successCallback:"handleAppOrientationDataSuccess",oldApiSuccessCallback:"getOrientationSuccess"},ControllerNativeAPI:{getAppOrientationData:"getAppOrientationData",oldSetOrientation:"setOrientation",oldGetOrientation:"getOrientation",setAppOrientation:"setAppOrientation"},eventicsCategories:{failCallback:{name:"AppOrientationFailed",id:263},successCallback:{name:"AppOrientationSuccess",id:264}},iosOrientationsMap:{UIInterfaceOrientationPortrait:2,UIInterfaceOrientationPortraitUpsideDown:4,UIInterfaceOrientationLandscapeLeft:16,UIInterfaceOrientationLandscapeRight:8},iosOrientations:{2:"Portrait",4:"PortraitUpsideDown",16:"LandscapeLeft",8:"LandscapeRight"},appOrientationAPI:"appOrientationAPI"}},{}],32:[function(e,n,t){n.exports=function(r,o,s){var t,c=e("./OrientationConstants.js"),i=!1,l=s.CB;function a(e){o.log("_setAppOrientation | send orientation: "+e,o.LogLevels.info),o.callSDKFunction(c.ControllerNativeAPI.setAppOrientation,{appOrientation:e})}return{init:function(e,n){e&&!i&&(r.PubSub.subscribe(l+"."+c.NativeAPI.successCallback,function(e){t.trackEvent(c.eventicsCategories.successCallback),e||(o.log("getAppOrientationData | Orientation data structure not exist.",o.LogLevels.info),t.trackEvent(c.eventicsCategories.failCallback))}),r.PubSub.subscribe(l+"."+c.NativeAPI.failCallback,function(e){o.log("getAppOrientationData failed, errorMsg:"+e.errMsg,o.LogLevels.info),t.trackEvent(c.eventicsCategories.failCallback)}),r.PubSub.subscribe("AppOrientationManager.appOrientationChanged",function(e){e&&e.appOrientation&&(o.log("appOrientationChanged | updating native with orientation: "+e.appOrientation,o.LogLevels.info),a(e.appOrientation))}),t=n,i=!0)},getAppOrientationData:function(){o.callSDKFunction(c.ControllerNativeAPI.getAppOrientationData,{},c.NativeAPI.successCallback,c.NativeAPI.failCallback)},setOrientation:function(e){o.callSDKFunction(c.ControllerNativeAPI.oldSetOrientation,{orientation:e})},oldGetOrientation:function(){var t=new jQuery.Deferred,i=r.PubSub.subscribe(l+"."+c.NativeAPI.oldApiSuccessCallback,function(e){if(r.PubSub.unsubscribe(i),"resolved"!==t.state()){clearTimeout(a);var n=e&&e.orientation||s.appInfo.orientation.portrait;t.resolve(n)}}),a=setTimeout(function(){t.resolve(s.appInfo.orientation.portrait)},2e3);return o.callSDKFunction(c.ControllerNativeAPI.oldGetOrientation,null,c.NativeAPI.oldApiSuccessCallback,c.NativeAPI.oldApiSuccessCallback),t.promise()},setAppOrientation:a}}},{"./OrientationConstants.js":31}],33:[function(e,n,t){n.exports=function(){var r=e("./OrientationConstants.js");function o(e){var n=parseInt(e.replace(/^"|"$/g,"")),t=[],i=n.toString(2);if(i.length>Object.keys(r.iosOrientations).length+1||"0"!==i.substr(i.length-1,1))return[];for(var a in r.iosOrientations)(n|a)===n&&t.push(r.iosOrientations[a]);return t}var n=function(n,e){return e.some(function(e){return 0<=n.indexOf(e)})};return{convertOrientationsArrayToNumber:function(e){var i=0;return e.forEach(function(e){var n,t;i+=Number((n=r.iosOrientations,t=e,Object.keys(n).filter(function(e){return n[e]===t})))}),i},convertNumberToOrientations:o,isContainPortrait:function(e){return n(o(e),[r.iosOrientations[2],r.iosOrientations[4]])},isContainLandscape:function(e){return n(o(e),[r.iosOrientations[8],r.iosOrientations[16]])},sharedOrientationBetweenOrientations:function(e,n){var t=o(e),i=o(n),a=t.filter(function(e){return-1<i.indexOf(e)});return a||(a=[]),a}}}},{"./OrientationConstants.js":31}],34:[function(e,n,t){n.exports=function(a,r){var i,o=e("./Constants.js"),s=e("./PermissionsConstants.js"),c=s.nativeFunction,l={};return{getPermissions:function(){if(i&&"pending"===i.status)return i;i=new jQuery.Deferred;var e,n=a.PubSub.subscribe(o.CB+"."+s.handleGetPermissionsSuccess,function(e){r.log(s.handleGetPermissionsSuccess+": "+JSON.stringify(e)),a.PubSub.unsubscribe(n),a.PubSub.unsubscribe(t),i.resolve(e)}),t=a.PubSub.subscribe(o.CB+"."+s.handleGetPermissionsFailure,function(e){r.log(s.handleGetPermissionsFailure+": "+JSON.stringify(e)),a.PubSub.unsubscribe(t),a.PubSub.unsubscribe(n),i.reject(e)});return r.callSDKFunction(s.nativeFunction,{functionName:s.NativeAPI.getPermissions,functionParams:(e=r.getConfig().mobileSDKSettings.deviceOs===o.deviceOs.ios?o.deviceOs.ios:o.deviceOs.android,{permissions:s.supportedPermissions[e]})},s.handleGetPermissionsSuccess,s.handleGetPermissionsFailure),i.promise()},isPermissionGranted:function(e){if(!e)return!1;if(l[e]&&"pending"===l[e].status)return l[e];l[e]=new jQuery.Deferred;var t=a.PubSub.subscribe(o.CB+"."+s.handleIsPermissionGrantedSuccess,function(e){if(e&&e.permission){var n=e.permission;l[n]?(r.log(s.handleIsPermissionGrantedSuccess+": "+JSON.stringify(e)),a.PubSub.unsubscribe(t),a.PubSub.unsubscribe(i),l[n].resolve(e)):r.log("Unrecognised permission name "+n,r.LogLevels.error)}}),i=a.PubSub.subscribe(o.CB+"."+s.handleIsPermissionGrantedFailure,function(e){if(e&&e.permission){r.log(c+s.NativeAPI.isPermissionGranted+JSON.stringify(e),r.LogLevels.verbose);var n=e.permission;l[n]?(a.PubSub.unsubscribe(i),a.PubSub.unsubscribe(t),l[n].reject(e)):r.log("Unrecognised permission name "+n,r.LogLevels.error)}else e&&e.errMsg&&r.log("Error calling isPermissionGranted "+e.errMsg,r.LogLevels.error)});return r.callSDKFunction(s.nativeFunction,{functionName:s.NativeAPI.isPermissionGranted,functionParams:{permission:e}},s.handleIsPermissionGrantedSuccess,s.handleIsPermissionGrantedFailure),l[e].promise()}}}},{"./Constants.js":9,"./PermissionsConstants.js":35}],35:[function(e,n,t){n.exports={CB:"NativeCallback",NativeAPI:{getPermissions:"getPermissions",isPermissionGranted:"isPermissionGranted"},nativeFunction:"permissionsAPI",supportedPermissions:{ios:["NSCameraUsageDescription","NSLocationAlwaysUsageDescription","NSLocationWhenInUseUsageDescription","NSLocationAlwaysAndWhenInUseUsageDescription","NSMicrophoneUsageDescription"],android:[]},handleGetPermissionsSuccess:"handleGetPermissionsSuccess",handleGetPermissionsFailure:"handleGetPermissionsFailure",handleIsPermissionGrantedSuccess:"handleIsPermissionGrantedSuccess",handleIsPermissionGrantedFailure:"handleIsPermissionGrantedFailure"}},{}],36:[function(e,n,t){n.exports=function(t){return{firePixel:function(e){if(void 0!==e.url&&""!==e.url){if("pixel"===e.type){var n=new Image;""===e.at||isNaN(parseInt(e.at))?n.src=e.url:(n.src=e.url,n.time=e.at)}}else t.log("Missing callback data. At: directive ssaPixel"+(new Date).getTime(),t.LogLevels.info)}}}},{}],37:[function(e,n,t){function i(a){var r={},e,o,n={init:function(){o=jQuery,e=this},publish:function(n,e){o=o||jQuery;try{var t=o.extend(!0,[],r[n]);o.each(t,function(){this.apply(o,e||[])})}catch(e){if(a.Utils.isDefined(e)){a.log({type:"in PubSub "+n,data:e.message,trace:e.stack});var i={name:e.name,message:e.stack};window.onerror(e.name+": "+e.message,null,null,null,i)}}},subscribe:function(e,n){return r[e]||(r[e]=[]),r[e].push(n),[e,n]},unsubscribe:function(n){if(n){var t=n[0];r[t]&&o.each(r[t],function(e){r[t][e]===n[1]&&r[t].splice(e,1)})}},subscribeOnce:function(e,n){var t=this,i=this.subscribe(e,function(){n(),t.unsubscribe(i)})}};return n}n.exports=i},{}],38:[function(e,n,t){n.exports={CB:"NativeCallback",NativeAPI:{startListenerSuccessKey:"startListenerSuccess",startListenerFailKey:"startListenerFailed",stopListenerSuccessKey:"stopListenerSuccess",stopListenerFailKey:"stopListenerFailed",initSuccessKey:"initSuccess",initFailKey:"initFailed",statusChanged:"ringerSwitchStatusChanged"},ControllerNativeAPI:{startListener:"startListener",stopListener:"stopListener",init:"init"},eventicsCategories:{startListenerFail:{name:"startListenerFail",id:263},stopListenerFail:{name:"stopListenerFail",id:264},initFail:{name:"initRingerFail",id:265}},notifyAdunitOnState:"ringerSwitchState",ringerNativeFunction:"ringerSwitchAPI"}},{}],39:[function(e,n,t){n.exports=function(n,t){var i,a,r,o=e("./RingerSwitchConstants.js"),s=!0,c=!1,l=1e3,d=!1;function u(e){t.postAdUnitEvent(JSON.stringify({name:o.notifyAdunitOnState,isRingerSwitchSilent:e}))}return{init:function(){var e;c||(n.PubSub.subscribe(o.CB+"."+o.NativeAPI.statusChanged,function(e){e&&(s=e.ringerSwitchSilent,d&&!s?a=setTimeout(function(){u(s)},i):(a&&clearTimeout(a),u(s)))}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.startListenerSuccessKey,function(e){t.log("Ringer | start detecting function performed successfully.",t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.startListenerFailKey,function(e){r.trackEvent(o.eventicsCategories.startListenerFail),e&&t.log("Ringer start detecting failed to perform, errorMsg:"+e.errMsg,t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.stopListenerSuccessKey,function(e){t.log("Ringer stop detecting successfully.",t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.stopListenerFailKey,function(e){r.trackEvent(o.eventicsCategories.stopListenerFail),e&&t.log("Ringer stop detecting failed to perform, errorMsg:"+e.errMsg,t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.initSuccessKey,function(e){t.log("Ringer prepare detector successfully.",t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.initFailKey,function(e){r.trackEvent(o.eventicsCategories.initFail),e&&t.log("Ringer prepare detector failed to perform, errorMsg:"+e.errMsg,t.LogLevels.info)}),t.log("Ringer | calling init native function",t.LogLevels.info),t.callSDKFunction(o.ringerNativeFunction,{functionName:o.ControllerNativeAPI.init},o.NativeAPI.initSuccessKey,o.NativeAPI.initFailKey),e={productChance:(t.getEnv(),1),baseData:{}},r=n.Eventics.createEventic(e),c=!0)},startListener:function(e){t.postAdUnitEvent(JSON.stringify({name:o.notifyAdunitOnState,isRingerSwitchSilent:s})),d=e&&e.shouldSetRingerUpdateDelay,i=e&&e.ringerUpdateDelay||l,t.log("Ringer | Set listener config to should delay?"+d+", with delay "+i,t.LogLevels.verbose),t.callSDKFunction(o.ringerNativeFunction,{functionName:o.ControllerNativeAPI.startListener},o.NativeAPI.startListenerSuccessKey,o.NativeAPI.startListenerFailKey)},stopListener:function(){d=!1,i=l,t.callSDKFunction(o.ringerNativeFunction,{functionName:o.ControllerNativeAPI.stopListener},o.NativeAPI.stopListenerSuccessKey,o.NativeAPI.stopListenerFailKey)},isInitiated:function(){return c}}}},{"./RingerSwitchConstants.js":38}],40:[function(e,n,t){n.exports=function(l,d,e){var u="NativeCallback",n=!1;function f(e){return e.viewIdentifier?e.viewIdentifier:e.viewUniqueId}function g(e,n){var t={isViewable:e,changeReason:n};l.PubSub.publish(u+".viewableChange",[t])}function p(e){n=e}function v(e){if(m()){if(!e)return;d.callSDKFunction("clearAppPage",{viewUniqueId:e})}}function m(e){return!(e&&!0===e.standaloneView||d.isLegacy(d.featureMap.hybrid)||"ios"!==d.getApiData({deviceOs:1}).deviceOs)}return l.PubSub.subscribe("SDKController.PreloadAppInstallPage",function(e){d.checkRequiredCallbackParams(["appId"],e,"preloadAppInstallPage").didSucceed?function(n){var t,e,i=f(n),a=(e=n.productType)&&d.getApplicationExternalConfig().getABTestConfiguration(e).storeKitLoadingTimeout||3e4;if(m(n)){d.callSDKFunction("preLoadAppPage",{appId:n.appId,viewUniqueId:i},"preloadAppInstallPageSuccess","preloadAppInstallPageFailure");var r=l.PubSub.subscribe(u+".appStoreInsideLoaded",function(e){e&&"object"==typeof e&&e.viewUniqueId&&e.viewUniqueId===i&&(clearTimeout(t),l.PubSub.unsubscribe(r),n.callback&&n.callback.call(null,e))}),o=l.PubSub.subscribe(u+".appStoreInsideDisplayStoreKit",function(e){if(e.viewUniqueId=f(e),d.log("appStoreInsideDisplayStoreKit "+e.viewUniqueId,d.LogLevels.verbose),e.viewUniqueId===i){p(!0);var n=jQuery.extend({name:"appStoreInsideVisible"},e);l.PubSub.unsubscribe(o),d.postAdUnitEvent(JSON.stringify(n)),g(!1,"storeKitOpen")}}),s=l.PubSub.subscribe(u+".appStoreInsideClosed",function(e){if(e.viewUniqueId===i){if(!1===e.isClosed)return d.log("storeKit Failed to Load ",d.LogLevels.verbose),void c();p(!1);var n=jQuery.extend({name:"appStoreInsideClosed"},e);l.PubSub.unsubscribe(s),d.postAdUnitEvent(JSON.stringify(n)),g(!0,"storeKitClose")}}),c=function(){l.PubSub.unsubscribe(r),l.PubSub.unsubscribe(s),l.PubSub.unsubscribe(o)};t=setTimeout(function(){d.log("reach appstoreinside loading timeout",d.LogLevels.verbose),c(),v(i)},a)}}(e):d.log("error calling preload App install page with "+JSON.stringify(e),d.LogLevels.error)}),l.PubSub.subscribe("SDKController.ClearAppPage",function(e){e.viewUniqueId=f(e),d.checkRequiredCallbackParams(["viewUniqueId"],e,"ClearAppPage").didSucceed?e&&e.viewUniqueId&&v(e.viewUniqueId):d.log("error calling clear App install page with "+JSON.stringify(e),d.LogLevels.error)}),{isStoreKitSupported:m,updateAdWithStoreAppId:function(e,n){if(n&&(null===(i=n.extractAppIdForStoreKit)||!l.Utils.isDefined(i)||i)&&m(n)&&e&&e.ext&&e.ext.clickTags&&!e.ext.clickTags.storeAppId&&e.ext.clickTags.pixelURL){var t=d.AdUtils.getStoreAppId(e);t&&(e.ext.clickTags.storeAppId=t)}var i;return e},getViewUniqueId:f,isStoreKitVisible:function(){return n}}}},{}],41:[function(e,n,t){n.exports=function(i,a){return{shouldFetchNewFeedOnAdCloseFlag:function(e){var n=i.getConfig().controllerConfig;return(n&&n[a.sspProductNames[e]]||{}).shouldFetchNewFeedOnAdClose},getValueByKeyAndProductType:function(e,n){var t=i.getConfig().controllerConfig;return(t&&t[a.sspProductNames[n]]||{})[e]}}}},{}],42:[function(e,n,t){function i(o,a,s,c){function i(e,n){return e[0]&&n[0]?(e=new Date(e[0]))<(n=new Date(n[0]))?-1:n<e?1:0:0}function e(e,n){if(void 0===e&&(e=1),e=parseInt(e),n=parseInt(n),!isNaN(e)&&!isNaN(n))return e===n?0:n<e?1:-1;o.log("Function variables are not valid, must be numbers representation: versionToCheck ="+e+" , versionToCompareTo ="+n,o.LogLevels.error)}var n={extend:function(e,n){jQuery.extend(e,n)},getScript:function(e,n,t){var i=s.createElement("script");i.src=e;var a=s.getElementsByTagName("head")[0],r=!1;i.onload=i.onreadystatechange=function(e){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,n(e),i.onload=i.onreadystatechange=null,a.removeChild(i))},i.onerror=function(e){o.log(["script load error",e]),t&&t()},a.appendChild(i)},getQueryString:function(e,n,t){t=this.isDefined(t)?t:a.location.href,null===n&&(n=""),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===i?n:i[1]},getUrlInfo:function(e){var n=s.createElement("a");return n.href=e,{host:n.hostname,port:n.port,path:n.pathname,protocol:n.protocol}},changeUrlProtocol:function(e,n){var t=s.createElement("a");return t.href=e,t.protocol=n,t.href},serialize:function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},isDefined:function(e){return typeof e!==c},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},parseJSON:function(e){var n={};if(!this.isString(e))return null;try{n=jQuery.parseJSON(e)}catch(e){o.log(e.message,o.LogLevels.error)}return n},getParams:function(e){var n,t=[],i=e.split("/"),a=i.length;if(-1===e.indexOf("JSON:")){if(2<=a&&a%2==0)for(n=0;n<a;n+=2)t[i[n]]=i.length>=n+1?decodeURIComponent(i[n+1]):null}else{var r=e.split("JSON:");typeof r[1]!==c&&(t=jQuery.parseJSON(r[1]))}return t},decodeValues:function(n){jQuery.each(n,function(e){n.hasOwnProperty(e)&&("string"==typeof n[e]&&(n[e]=decodeURIComponent(n[e])),"object"==typeof n[e]&&n[e]&&o.Utils.decodeValues(n[e]))})},renderTemplate:function(i,e){return e&&jQuery.each(e,function(e,n){var t=new RegExp("{{"+e+"}}","g");i=i.replace(t,n)}),i},isVisible:function(e){return"none"!==e.css("display")&&"hidden"!==e.css("visibility")},versionCompare:function(e,n){var t=function(e){1===e.length&&e.push("0"),2===e.length&&e.push("0")},i=function(n){jQuery.each(n,function(e){n[e]=parseInt(n[e])})};"5.02"===e&&(e="5.0.2");var a=e.split("."),r=n.split(".");t(a),t(r);try{i(a),i(r)}catch(e){throw"parse error"}return a[0]===r[0]?a[1]===r[1]?a[2]===r[2]?0:a[2]>r[2]?1:-1:a[1]>r[1]?1:-1:a[0]>r[0]?1:-1},returnResolvedPromise:function(){var e,n=new jQuery.Deferred;return 0<arguments.length&&(e=[].slice.call(arguments)),n.resolve.apply(n.resolve,e),n.promise()},returnRejectedPromise:function(){var e,n=new jQuery.Deferred;return 0<arguments.length&&(e=[].slice.call(arguments)),n.reject.apply(n.reject,e),n.promise()},replacePlaceHolder:function(e,n){var t;for(var i in n){t=n[i];var a=new RegExp(i+"|"+encodeURIComponent(i),"i");e=e.replace(a,"function"==typeof t?t():t)}return e},fileArrayIncludes:function(e,n){if(e||0===e.length)return!1;for(var t=0;t<e.length;t++)if(n===e[t])return!0;return!1},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){if(!e)return!0;if(this.isString(e)||this.isArray(e))return 0===e.length;for(var n in e)if(e.hasOwnProperty(n))return!1;return!0},sortDataByDateKey:function(e){var n=[];for(var t in e)n.push([t,e[t]]);return n.sort(i)},apiVersionCompareTo:e};return n}n.exports=i},{}],43:[function(e,n,t){n.exports=function(g,p){var v=e("../components/PixelTrackingService.js")(p),m=e("../components/FillRateTrackingService.js")(p,v),b=e("../components/ObfuscationService.js")(),h=e("../modules/DemandSource/EventCategories")(),S=e("./Constants"),y=p.DemandUtils,C={url:1,xmlResponse:2};function A(e){return e.ext.vastData?e.ext.vastData.xmlResponse:null}return{parseVast:function(e,n,t){var i,a,r=new jQuery.Deferred;a="prod"!==p.getEnv()?(i=e.settings.urltocdn+"/common/sdk/1.0.9/vastObfuscator.html",e.settings.urltocdn+"/common/sdk/1.0.9/vast-vmap.js"):(i=e.settings.urltocdn+"/common/sdk/1.0.9/vastObfuscator.4f4eb4fb.min.html",e.settings.urltocdn+"/common/sdk/1.0.9/vast-vmap.4f4eb4fb.min.js");var o,s,c,l=(c=A(o=e)?(s=A(o),C.xmlResponse):(s=o.ext.videoData.videoSource.vast,C.url),{adData:s,adSource:c});l.adSource===C.url&&(l.adData=function(e,n,t){if(e&&void 0!==e){var i;e=e.replace(S.vastRequestPlaceholders.moatEnabled,(i=n,p.MOATService.isInitialized()&&i?1:0));var a=t.requestID;a&&(e=e.replace(S.vastRequestPlaceholders.requestId,a));var r=function(e){var n=e.ext.opportunityID;if(e.ext.squeezeOpportunityIds&&"[object Array]"===Object.prototype.toString.call(e.ext.squeezeOpportunityIds)){var t=e.controllerSpace&&e.controllerSpace.viewCount||0;n=e.ext.squeezeOpportunityIds[t]}return n}(t);return r&&(e=e.replace(S.vastRequestPlaceholders.opportunityId,r)),e}}(l.adData,n,e));var d,u={adData:l.adData,style:"height:100%;",adUnitData:e,vastParserUrl:a,isAdDataTypeURL:(d=l,d.adSource===C.url)},f={adData:l.adData,url:i,templateClass:"obfuscationIframe",style:{width:"1px",height:"1px",border:"0"},id:e.vastIframeId};return function(t,n,e){var i,a;if("[object Array]"===Object.prototype.toString.call(t.ext.callbacks)){var r=t.controllerSpace&&t.controllerSpace.viewCount||0;i=t.ext.callbacks[r]}else i=t.ext.callbacks;var o=m.init(i),s=t.vastIframeId,c=g.PubSub.subscribe("SDKController.VastRequest",function(e){e.vastIframeId&&e.vastIframeId===s&&(o.track({trackingType:"request"}),g.PubSub.unsubscribe(c))}),l=g.PubSub.subscribe("SDKController.VastResponse",function(e){e.vastIframeId&&e.vastIframeId===s&&(clearTimeout(a),"hit"===e.result?(o.track({trackingType:"responseHit"}),b.removeIframe(s),g.PubSub.unsubscribe(l),n.resolve(e.data)):(o.track({trackingType:"responseMiss",data:e.data}),b.removeIframe(s),g.PubSub.unsubscribe(l),n.reject({errMsg:e.data})))}),d=e&&e>S.vastMinimumResponseTimeout?e:S.vastResponseTimeout;a=setTimeout(function(){g.PubSub.unsubscribe(l),g.PubSub.unsubscribe(c),g.PubSub.unsubscribe(u),clearTimeout(a),n.reject({isTimeLimitReached:!0,errMsg:"timeout"})},d);var u=g.PubSub.subscribe("SDKController.VastErrorPixel",function(e){e.vastIframeId&&e.vastIframeId===s&&(v.firePixel(e),b.removeIframe(s),g.PubSub.unsubscribe(u))}),f=g.PubSub.subscribe("SDKController.parseVastInfo",function(e){if(e.vastIframeId&&e.vastIframeId===s){g.PubSub.unsubscribe(f);var n=y.extendCallbackParamsWithParentProductConfig(t,{action:"fireEvent",eventParam:{eName:h.parseVastInfo,label:{},data:{generalMessage:e.data}}});g.PubSub.publish("SDKController.Analytics",[n])}})}(e,r,t.vastTimeOut),b.init(f,function(e){g.Msg.postMessage("$$JSON:"+JSON.stringify(u),i,e[0].contentWindow)}),r.promise()},removeIframe:function(e){b.removeIframe(e)}}}},{"../components/FillRateTrackingService.js":14,"../components/ObfuscationService.js":29,"../components/PixelTrackingService.js":36,"../modules/DemandSource/EventCategories":70,"./Constants":9}],44:[function(e,n,t){n.exports=function(a){var r,o,s,c,l=e("../components/Constants.js"),d=null;return{init:function(e){var n;d=new jQuery.Deferred,r=(n=e).settings&&n.settings.standaloneView,(o=e.ext&&e.ext.isHybridFlow||!1)?l.viewsStates.hybrid:l.viewsStates.normal,s=e.ext&&e.ext.viewUniqueId||"";var t,i=JSON.stringify(l.hybridViews);c={standaloneView:r,viewUniqueId:s},o?(c.hybridView=o,c.hybridJson=i,t=a.PubSub.subscribe("ViewsManager.viewClosed",function(e){d.resolve(),a.PubSub.unsubscribe(t)})):d.resolve({})},waitForAllViews:function(){return d.promise()},isHybridFlow:function(){return isHybrid},getDisplayWebViewParams:function(e){return c=jQuery.extend(c,{display:e})}}}},{"../components/Constants.js":9}],45:[function(o,e,n){e.exports=function(u,f,g,p,v,e,m,b,n,h,S,y,t,C,i,A,D,r){var c=new(o("../IframeManager.js"))(f,p,v,e,t,C,i,r),I=n.style.backgroundColors,a=n.style.forceCloseProperties,l={none:0,device:1,controller:2},w=function(){var r=!1,o=!1,s=!1,c=null,i={on:!1,productConfig:null};function l(){f.log("Webview state- open: "+r+", viewable: "+o+", productConfig: "+JSON.stringify(c),f.LogLevels.verbose)}function e(e,n){var t;switch(f.log("received event: "+e+" sendCloseRequest: "+JSON.stringify(i),f.LogLevels.verbose),e){case"close":w.shouldNotifyClose(n)&&(t=y.extendCallbackParamsWithParentProductConfig(n),u.PubSub.publish("SDKController.onAdWindowsClosed",[t]),f.callSDKFunction("onAdWindowsClosed",t));break;default:f.log("received event: "+e,f.LogLevels.verbose)}}function d(e,n){var t=a[g.mobileSDKSettings.deviceOs+e]?e:"Neutral",i=v.extend({},a[g.mobileSDKSettings.deviceOs+t]);n&&(i.position=n),f.callSDKFunction("setForceClose",i)}return u.PubSub.subscribe("SDKController.SetForceClose",function(e){var n;n=e,!u.Utils.isDefined(n.isEnable)||n.isEnable?w.changeMode("Neutral",n.position):w.disableForceClose()}),{display:function(e){if(e){if(g.mobileSDKSettings.deviceOs===p.deviceOs.ios&&(r||o)&&A.supportOrientation)f.log("avoiding setOrientation for new displayed ad",f.LogLevels.verbose);else{var n=b.getAdDisplayOrientation(g,h,e);S.setOrientation(n)}if(r||o)return f.log("line[882]: be might here because of next offer, engaged is "+s,f.LogLevels.verbose),void(s=!0);var t;t=e,u.Utils.isDefined(t)&&u.Utils.isDefined(t.productType)?C.ifShouldSetIphoneXBG(t)?(O(I.semiTransparent),T(I.semiTransparent)):t.settings.setContainerBGColorBlack?T(I.black):(O(P(t.productType)),T(L(t.productType))):T(I.darkGrey),d(t.productType),w.loadProduct(e),m.init(e);var i=y.extendCallbackParamsWithParentProductConfig(e,m.getDisplayWebViewParams(!0)),a=function(e){var n={};if(g.mobileSDKSettings.deviceOs===p.deviceOs.android&&!A.supportImmersive){var t=e.settings&&e.settings.immersive;v.extend(n,{immersive:t})}return A.translucent||(n.activityThemeTranslucent=!!e.settings.translucentView),g.mobileSDKSettings.deviceOs===p.deviceOs.ios&&v.extend(n,{appOrientation:D.getOrientation(),ModalPresentationStyle:p.iOS_UIModalPresentationFullScreen}),n}(e);f.log("displayWebView platformParams: "+JSON.stringify(a),f.LogLevels.verbose),f.log("displayWebView displayParams: "+JSON.stringify(i),f.LogLevels.verbose),f.callSDKFunction(p.nativeInterfaceMethod.displayWebView,v.extend(a,i,{integrationType:f.AdUtils.getIntegrationType(e)})),r=!0,l()}},hide:function(){r&&function(){var e,n,t=new v.Deferred,i=function(){u.PubSub.unsubscribe(e),u.PubSub.unsubscribe(n),t.resolve()};f.log("line[882]:"+JSON.stringify(c),f.LogLevels.verbose);var a=f.DemandUtils.extendCallbackParamsWithParentProductConfig(c,f.ViewsManager.getDisplayWebViewParams(!1));return a.integrationType=c.integrationType,A.supportAdCloseCB?(e=u.PubSub.subscribe(p.CB+"."+p.nativeCallBacks.hideSuccess,i),n=u.PubSub.subscribe("SDKController.HybridAdDidClosed",i)):t.resolve(),f.callSDKFunction(p.nativeInterfaceMethod.displayWebView,a,p.nativeCallBacks.hideSuccess,p.nativeCallBacks.hideFailed),window.timerService.stopTimer(window.lastWebviewClosedTimer),window.lastWebviewClosedTimer=window.timerService.startTimer(),t.promise()}().then(function(){r=!1,i.productConfig=c,i.on=!0,s||e("close",c),l()})},setVisibility:function(e){o=e,l()},shouldNotifyClose:function(e){return i.on&&i.productConfig===e?(i.on=!1,i.productConfig=null,l(),!0):(l(),!1)},loadProduct:function(e){c=y.extendCallbackParamsWithParentProductConfig(e,{integrationType:f.AdUtils.getIntegrationType(e)}),s=!0,l()},unloadProduct:function(){s=!1,i.on&&e("close",c),l()},changeMode:function(e,n){d(e,n)},disableForceClose:function(){f.callSDKFunction("setForceClose",a.disable)},setWebviewBGColorTransparent:function(){T(I.transparent)},getState:function(){return{engaged:s,opened:r,productConfig:c,viewable:o,standalone:!1}}}}();function L(e){var n;switch(e){case p.IS:case p.WebControls:n=I.transparent;break;case p.OW:case p.RV:case p.BC:n=I.darkGrey;break;default:n=I.darkGrey}return n}function P(e){var n;switch(e){case p.IS:case p.WebControls:n=I.transparent;break;case p.OW:case p.RV:case p.BC:n=I.black;break;default:n=I.black}return n}function T(e){e&&(f.log("ContainerManager | setControllerBGColor | color: "+e),v("body").css("background",e))}function O(e){e&&(f.log("ContainerManager | setSDKWebviewBGColor | color: "+e),f.callSDKFunction("setWebviewBackgroundColor",{color:e}))}function d(e,n,t){var i=v("#ssaNavigator"),a=r.getDisplayedAdType();g.mobileSDKSettings.deviceOs!==p.deviceOs.android&&v("body").css("height",n.scrollHeight),T(L(a)),O(P(a)),c.displayFrame(),f.callSDKFunction("setBackButtonState",{state:l.controller}),e(!1,!1,null),w.changeMode("Neutral"),t(),i.removeClass("webNavigation").addClass("defaultNavigation"),setTimeout(function(){f.callSDKFunction("navigationModeChange",{state:!1})},70)}return{createAndLoadAdFrame:c.createAndLoadAdUnitFrame,displayAdFrame:c.displayAdUnitFrame,unloadAdFrame:c.unloadAdUnitFrame,updateFrameUrl:c.updateAdUnitUrl,getContainerState:w.getState,displayContainer:w.display,hideContainer:w.hide,setContainerVisibility:w.setVisibility,changeContainerMode:w.changeMode,unloadProductFromContainer:w.unloadProduct,setContainerBGColorTransparent:w.setWebviewBGColorTransparent,handleScreenVisible:c.handleScreenVisible,displayLoader:c.displayLoader,hideLoader:c.hideLoader,setSDKWebviewBGColor:O,changeToNavigationMode:function(e,n,t,i){var a,r,o,s=v("#ssaNavigator");v("body").css("height",""),O(P(p.WebControls)),T(L(p.WebControls)),w.changeMode("Navigation"),c.hideFrame(),c.hideLoader(),f.callSDKFunction("setBackButtonState",{state:l.device}),e(!1,null),a=e,r=t,o=i,n.unbind("touchend").bind("touchend",function(e){e.stopPropagation(),e.preventDefault(),v("#ssaNavigatorBackButton").unbind("touchend"),f.callSDKFunction("controlSecondaryWebView",{action:"close"}),f.callSDKFunction("removeCloseEventHandler"),d(a,r,o)}),v("#ssaNavigatorBackButton").unbind("touchend").bind("touchend",function(e){e.stopPropagation(),e.preventDefault(),f.callSDKFunction("removeCloseEventHandler"),f.callSDKFunction("controlSecondaryWebView",{action:"back"})}),s.removeClass("defaultNavigation").addClass("webNavigation"),f.callSDKFunction("navigationModeChange",{state:!0})},returnFromNavigationMode:d,isContainerLoaded:c.isContainerLoaded,onAdUnitLoaded:c.onAdUnitLoaded,getAdFrameByProductAndId:c.getAdFrameByProductAndId}}},{"../IframeManager.js":20}],46:[function(e,n,t){n.exports={CB:"NativeCallback",NativeAPI:{loadWithUrl:"loadWithUrl",updateAd:"updateAd",isExternalAdViewInitiated:"isExternalAdViewInitiated",sendMessage:"sendMessage",getViewVisibility:"handleGetViewVisibility"},nativeFunction:"bannerViewAPI",handleContainerIsVisible:"containerIsVisible",handleContainerWasRemoved:"containerWasRemoved",handleIsInitiated:"containerAdViewStatus",handleIsInitiatedFailure:"containerAdViewStatusFailure",handleAdReplaced:"containerAdReplaced",handleMessage:"containerSendMessage",handleLoadWithUrlSuccess:"handleLoadWithUrlSuccess",handleLoadWithUrlFailure:"handleLoadWithUrlFailure",handleUpdateAdSuccess:"handleUpdateAdSuccess",handleUpdateAdFailure:"handleUpdateAdFailure",handleSendMessageSuccess:"handleSendMessageSuccess",handleSendMessageFailure:"handleSendMessageFailure",handleGetViewVisibilitySuccess:"handleGetViewVisibility",handleGetViewVisibilityFailure:"handleGetViewVisibilityFailure"}},{}],47:[function(e,n,t){n.exports=function(o,s,c,i,n){var a,r,l=e("./ExternalAdViewConstants.js"),t=[],d=[];function u(){var e=n.get();e&&e.productType&&e.productType===c.BN&&n.reset()}function f(e){return!!e&&e.isViewVisible}function g(e){s.log("ExternalAdViewService | sendMessage | "+JSON.stringify(e));var n=o.PubSub.subscribe(c.CB+"."+l.handleSendMessageFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleSendMessageFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(n)}),t=e.indexOf("$$");-1!==t&&(e=function(e,n){var t={};t.name=e.substr(0,n);var i=e.substr(n+2),a=i.indexOf("="),r=i.substr(0,a),o=i.substr(a+1);return t[r]=o,JSON.stringify(t)}(e,t)),s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.sendMessage,functionParams:{params:e}},l.handleSendMessageSuccess,l.handleSendMessageFailure)}var p=function(e,n){s.log("ExternalAdViewService | send message to adview"+e,s.LogLevels.error),g(e)};return{init:function(){t.push(o.PubSub.subscribe(c.CB+"."+l.handleContainerIsVisible,function(e){!e.configs&&e.configs.productType&&e.configs.visibilityParams||(s.log("ExternalAdViewService | "+l.handleContainerIsVisible,s.LogLevels.verbose),f(e.configs.visibilityParams)&&o.PubSub.publish(e.configs.productType+".isVisible",[e.configs]))})),t.push(o.PubSub.subscribe(c.CB+"."+l.handleContainerWasRemoved,function(e){s.log("ExternalAdViewService | "+l.handleContainerWasRemoved,s.LogLevels.error);for(var n=!1,t=0;!n&&t<d.length;t++)d[t].id===e.configs.externalAdViewId&&(n=!0,d.splice(t,1));n||s.log("ExternalAdViewService | "+l.handleContainerWasRemoved+"trying to remove container "+e.configs.externalAdViewId+" that does not exist",s.LogLevels.error),u(),o.PubSub.publish(e.configs.productType+".reset",[e.configs])})),t.push(o.PubSub.subscribe(c.CB+"."+l.handleMessage,function(e){!function(n){try{s.log("ExternalAdViewService | handleMessageFromAdunit | "+JSON.stringify(n));var e=(t=n.id,function(e){p(JSON.stringify({data:e,id:t}),!0)});o.Utils.decodeValues(n.arguments),i.extend(n.arguments,{callback:e}),o.PubSub.publish("SDKController."+n.method,[n.arguments])}catch(e){s.log("ExternalAdViewService | unable to parse message: "+n,s.LogLevels.error)}var t}(e)}))},destroy:function(){for(var e in t)o.PubSub.unsubscribe(e)},loadWithUrl:function(e,n,t,i){s.log("ExternalAdViewService | _loadWithUrl | "+e),s.AdUtils.extendAdObjectWithConfig(e,n,t,i);var a=o.PubSub.subscribe(c.CB+"."+l.handleLoadWithUrlFailure,function(e){e&&e.errMsg&&(s.log("Error calling "+l.handleLoadWithUrlFailure+" with error "+e.errMsg,s.LogLevels.error),u(),o.PubSub.publish("SDKController.AdLoadError",[e])),o.PubSub.unsubscribe(a)});s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.loadWithUrl,functionParams:{urlForWebView:e}},l.handleLoadWithUrlSuccess,l.handleLoadWithUrlFailure)},updateAd:function(e,n,t,i){s.log("ExternalAdViewService | _updateAd | "+JSON.stringify(n));var a={name:"updateAd",param:n};s.AdUtils.extendAdObjectWithConfig(e,n,t,i);var r=o.PubSub.subscribe(c.CB+"."+l.handleUpdateAdFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleUpdateAdFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(r)});s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.updateAd,functionParams:{params:JSON.stringify(a)}},l.handleUpdateAdSuccess,l.handleUpdateAdFailure)},sendMessage:g,isContainerVisible:f,isExternalAdViewInitiated:function(){if(s.log("ExternalAdViewService | isExternalAdViewInitiated |"),a&&"pending"===a.status)return a;a=new i.Deferred;var n=o.PubSub.subscribe(c.CB+"."+l.handleIsInitiated,function(e){s.log("ExternalAdViewService | "+l.handleIsInitiated+" "+JSON.stringify(e)),o.PubSub.unsubscribe(n),o.PubSub.unsubscribe(t),a.resolve(e)}),t=o.PubSub.subscribe(c.CB+"."+l.handleIsInitiatedFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleIsInitiatedFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(t),o.PubSub.unsubscribe(n),a.reject(e)});return s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.isExternalAdViewInitiated},l.handleIsInitiated,l.handleIsInitiatedFailure),a.promise()},addExternalAdViewIdAndSetStatus:function(e){s.log("ExternalAdViewService | _addExternalAdViewIdAndSetStatus",s.LogLevels.error);for(var n=e.externalAdViewId,t=e.isInReload,i=!1,a=0;a<d.length;a++){var r=d[a];r.id===n&&(i=!0,r.isInReload=t,s.log("ExternalAdViewService | _addExternalAdViewIdAndSetStatus | changed isInReload to "+t,s.LogLevels.error))}i?s.log("ExternalAdViewService | _addExternalAdViewIdAndSetStatus | "+n+" has been previously added",s.LogLevels.error):(0!==d.length&&(d=[]),d.push({id:n,isInReload:t}))},getViewVisibility:function(){if(s.log("ExternalAdViewService | _getViewVisibility"),r&&"pending"===r.status)return r;r=new i.Deferred;var n=o.PubSub.subscribe(c.CB+"."+l.handleGetViewVisibilitySuccess,function(e){s.log("ExternalAdViewService | "+l.handleGetViewVisibilitySuccess+" "+JSON.stringify(e)),o.PubSub.unsubscribe(n),o.PubSub.unsubscribe(t),r.resolve(e)}),t=o.PubSub.subscribe(c.CB+"."+l.handleGetViewVisibilityFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleGetViewVisibilityFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(t),o.PubSub.unsubscribe(n),r.reject(e)});return s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.getViewVisibility},l.handleGetViewVisibilitySuccess,l.handleGetViewVisibilityFailure),r.promise()},resetExternalAdViewsIdentifiers:function(){d=[]}}}},{"./ExternalAdViewConstants.js":46}],48:[function(f,e,n){e.exports=function(e,n,t,i,a){var r,o=!1,s=!1;function c(e){s=e}function l(e){o=e}function d(){c(!1),l(!1)}function u(){return s&&!o}return{initExternalContainer:function(){(r=new(f("./ExternalAdViewService.js"))(e,n,t,i,a)).init(),e.PubSub.subscribe("SDKController.AdVisible",function(e){e&&e.productType===t.BN&&l(!0)})},setAdIsLoadedInContainer:c,setAdIsVisibleInContainer:l,resetReportAdVisibilityFlags:d,shouldReportAdVisible:u,checkStatusOfAdView:function(){return r.isExternalAdViewInitiated()},createAdUrlInAdView:function(e,n,t,i){d(),r.loadWithUrl(e,n,t,i)},updateAdInAdView:function(e,n,t,i){d(),r.updateAd(e,n,t,i)},sendMessageToExternalAdView:function(e){r.sendMessage(e)},addExternalAdViewIdAndSetStatus:function(e){r.addExternalAdViewIdAndSetStatus(e)},onExternalViewLoaded:function(n,t){r.getViewVisibility().then(function(e){r.isContainerVisible(e)&&(n(),u()&&t())})},resetExternalAdViewsIdentifiers:function(){r.resetExternalAdViewsIdentifiers()}}}},{"./ExternalAdViewService.js":47}],49:[function(e,n,t){n.exports={NativeAPI:{failCallback:"updateTokenFail",successCallback:"updateTokenSuccess"},ControllerNativeAPI:{updateToken:"updateToken"},iabTokenAPI:"iabTokenAPI",payloadKeys:{android:{gpi:!0,androidIsVersion:!0},ios:{}}}},{}],50:[function(o,e,n){e.exports=function(e,a,n,t,i){var r=o("./IABConstants.js");return e.PubSub.subscribe(n.CB+"."+r.NativeAPI.failCallback,function(e){a.log("IABService | updateTokenFail: "+JSON.stringify(e));var n=e.errMsg?e.errMsg:"unknown";t.trackEvent(i.updateTokenFail,{generalMessage:n})}),{updateToken:function(e){if(!a.isLegacy(a.featureMap.IAB)){var n=function(e){if(!e)return{};var n={},t=r.payloadKeys[a.getConfig().mobileSDKSettings.deviceOs];for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(n[i]=e[i]);return n}(e);a.log("IABService | _updateNativeToken | data: "+JSON.stringify(n)),0!==Object.keys(n).length&&a.callSDKFunction(r.iabTokenAPI,{functionName:r.ControllerNativeAPI.updateToken,functionParams:n},null,r.NativeAPI.failCallback)}}}}},{"./IABConstants.js":49}],51:[function(t,e,n){e.exports=function(i,e,n){var a,r,s=t("../OrientationUtils.js")(),o=n.appInfo.orientation.none,c=!1,l={free:n.appInfo.orientation.none,portrait:n.appInfo.orientation.portrait,landscape:n.appInfo.orientation.landscape};function d(e,n,t){c=!1;var i=l[(e||"").toLowerCase()];if(i)return c=!0,i;if(!t)return n;var a,r=s.sharedOrientationBetweenOrientations(t.viewControllerToPresentFrom||t.topMostViewControllerOrientation,t.windowOrientation),o=(a=(r&&0<r.length?s.convertOrientationsArrayToNumber(r):t.windowOrientation).toString(),s.isContainPortrait(a)&&s.isContainLandscape(a)?l.free:s.isContainPortrait(a)?l.portrait:l.landscape);return o!==n&&(c=!0),o}return{init:function(e,n){a=e,r=n.appOrientation,o=d(a,r,n.orientationRestriction)},getOrientation:function(){return o},isAppOrientation:function(e){return o===e},isChangedExternally:function(){return c},updateAppOrientationByNewRestriction:function(e){if(e){var n,t=o;o=d(a,r,e),t!==(n=o)&&i.PubSub.publish("AppOrientationManager.appOrientationChanged",[{appOrientation:n}])}}}}},{"../OrientationUtils.js":33}],52:[function(e,n,t){function i(i,r,e){var o=e||{},n,a,s=!1,c=r.Cache,l={campaignsOnly:"campaignsOnly",globalsOnly:"globalsOnly",globalsAndCampaigns:"globalsAndCampaigns"},t=!1,d=r.jQuery();function u(e){t=e}function f(e,n){return c.cacheAds(o,e,n)}function g(e,n,t){return setTimeout(function(){!0,r.log("Time out in update cache. Fallback to non-precache.",r.LogLevels.error),i.PubSub.publish("PrecacheManager.fallbackToNonPrecache",[{demandSourceName:o.demandSourceName,productType:o.productType}]),p(!1),i.PubSub.publish("Cache.StopCacheUpdate",[{demandSourceName:o.demandSourceName,productType:o.productType}]),u(!1),c.clearCacheByType(o,[]).then(function(){n()}).fail(function(){var e="Error deleting globals in fallback to NPC";r.log(e,r.LogLevels.error),t(e)})},o.nonPrecacheFallback)}function p(e){n=e}function v(t){a=g(s,t.cacheTimeoutSuccessCallback,t.cacheTimeoutFailCallback),u(!0),f(t.applicationKey,t.newAdsToEnterCache).then(function(){r.log("PM | success",r.LogLevels.verbose),clearTimeout(a),s||(r.log("cache update completed",r.LogLevels.verbose),u(!1),i.PubSub.publish("PrecacheManager.cacheAdsSuccessCallback",[o]))},function(e,n){if(clearTimeout(a),!s){u(!1),i.PubSub.publish("PrecacheManager.cacheAdsFailedCallback",[{productType:o.productType,demandSourceName:o.demandSourceName,deletedOffers:n,errorLog:"Error adding new ads from queue, some campaigns were deleted.",cacheParam:e,inventoryId:t.inventoryId}])}})}function m(e){d.extend(o,e),r.log("PM | updateConfig updated config"+JSON.stringify(o),r.LogLevels.verbose)}function b(e){var n=e.numOfCampaigns||0,t=e.settings||{};return m({settings:t}),0<=t.numOfBannersToInitSuccess&&0<n&&0<t.numOfBannersToCache?(t.numOfBannersToCache<t.numOfBannersToInitSuccess&&(t.numOfBannersToInitSuccess=t.numOfBannersToCache),n<t.numOfBannersToInitSuccess&&(t.numOfBannersToInitSuccess=n),n<t.numOfBannersToCache&&(t.numOfBannersToCache=n),p(!0),t.maxCachedCampaigns=o.maxCachedCampaigns,c.setSettings(o,t)):(t.numOfBannersToInitSuccess=t.numOfBannersToCache=0,p(!1)),i.Utils.returnResolvedPromise()}function h(e){return e&&e.cacheBase===o.cacheBase}function S(){i.PubSub.subscribe("Cache.cacheUpdated",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.cacheUpdatedCallback",[e]))}),i.PubSub.subscribe("Cache.campaignDeleted",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.campaignDeletedCallback",[e]))}),i.PubSub.subscribe("Cache.campaignSaved",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.campaignSavedCallback",[e]))}),i.PubSub.subscribe("Cache.campaignDownloadStarted",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.campaignDownloadStartedCallback",[e]))}),i.PubSub.subscribe("Cache.preProcessingFailed",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.preProcessingFailedCallback",[e]))})}function y(){return n}function C(){var e,n,t=new d.Deferred,i=y();function a(e){t.resolve(e)}return o.settings.purgeCacheOnInit?(n="purge cache on init (settings)",e=!0):i||(n="purge cache on non-precache",e=!0),e?(r.log("handleCacheClear purge reason: "+n,r.LogLevels.verbose),c.clearCacheByType(o,[]).then(a.bind(null,l.campaignsOnly),function(){t.reject("Error in clearing cache")})):a(),t.promise()}function A(){y()&&(u(!0),c.cacheNext(o).always(function(){u(!1)}).fail(function(e,n){r.log("line[451]: failed updating cache on cache next with deletedAds: "+n,r.LogLevels.verbose),n&&0<n.length&&i.PubSub.publish("PrecacheManager.cacheNextFail",[{productType:o.productType,demandSourceName:o.demandSourceName,deletedAds:n,inventoryId:n[0].inventoryId}])}))}function D(){return l}function I(){return c.getNextAvailableAd(o)}function w(e){return c.clearCacheByType(o,e)}function L(e,n){return n=i.Utils.isDefined(n)?n:o.settings.numOfBannersToCache,c.mergeCampaigns(e,n,o.settings.maxCachedCampaigns,o)}function P(e,n){return c.areCampaignsAvailable(e,n,o)}function T(){return c.getCacheSizeByType(o)}function O(){return c.incrementNextCampaign(o)}function F(e){return c.getCurrentAd(o,e)}function U(e){return c.isNextAvailable(o,e)}function x(){return c.cacheNext(o)}function N(e,n){return c.setAdInventoryIndex(o,e,n)}function M(e){return c.isAdInCache(o,e)}function k(e){return c.setSettings(o,e)}function B(){S(),c.initCacheBase(o.cacheBase)}function E(e){return c.getAdStatusInQueue(o,e)}function V(e){return c.deleteCachedCampaign(o,e)}function R(e){return c.cacheSingleAd(o,e)}var K={updateConfig:m,init:B,decidePrecacheStatus:b,isPrecache:y,handleCacheClear:C,mergeCampaigns:L,handleCacheAds:v,updateCache:A,clearCacheByType:w,areCampaignsAvailable:P,getCacheSizeByType:T,setAdInventoryIndex:N,incrementNextCampaign:O,getCurrentAd:F,isAdInCache:M,getAdStatusInQueue:E,setCacheSettings:k,getNextAvailableAd:I,isNextAvailable:U,getCacheClearMessages:D,cachingStatus:c.cachingStatus,deleteCachedCampaign:V,cacheSingleAd:R};return K}n.exports=i},{}],53:[function(e,n,t){n.exports=function(i){var a=e("./SDKPluginTypeConstants.js");return{shouldShowInStandAloneView:function(e){var n=e.getApplicationExternalConfig().getGeneralConfig()[a.microJobFlags.showStandaloneViewInAdobe];null!==n&&i.isDefined(n)||(n=!0);var t=!e.isLegacy(e.featureMap.showStandaloneViewInAdobe)&&n;return e.log("AdobeAirPluginHandler | shouldShowInStandAloneView | useStandAloneView: "+t),t}}}},{"./SDKPluginTypeConstants.js":54}],54:[function(e,n,t){n.exports={supportedPluginNames:{adobeAir:"AdobeAir"},microJobFlags:{showStandaloneViewInAdobe:"showStandaloneViewInAdobe"}}},{}],55:[function(o,e,n){e.exports=function(t,i){var a=o("./SDKPluginTypeConstants.js");function r(e){return(n=e).applicationSettings&&n.applicationSettings.SDKPluginType&&n.applicationSettings.SDKPluginType===a.supportedPluginNames.adobeAir?(t.log("SDKPluginTypeHandler | createPluginHandler | creating adobe handler"),new(o("./AdobeAirPluginHandler.js"))(i)):(t.log("SDKPluginTypeHandler | createPluginHandler | plugin handler is not required"),null);var n}return{shouldShowInStandAloneView:function(e){t.log("SDKPluginTypeHandler | shouldShowInStandAloneView");var n=r(e);return n&&"function"==typeof n.shouldShowInStandAloneView?n.shouldShowInStandAloneView(t):(t.log("SDKPluginTypeHandler | shouldShowInStandAloneView | "+(n?"function not supported in handler":"no plugin handler")),!1)}}}},{"./AdobeAirPluginHandler.js":53,"./SDKPluginTypeConstants.js":54}],56:[function(e,n,t){n.exports={userData:{ios:"5.1",android:"5.1"},loadIS:{ios:"5.7",android:"5.10"},selfLoadingIS:{ios:"5.19",android:"5.20"},supportImmersive:{ios:"99",android:"5.26"},rvPortraitOrientation:{ios:"5.30",android:"5.30"},MDS:{RewardedVideo:{ios:"5.29",android:"5.29"},Interstitial:{ios:"5.48",android:"5.48"},Banner:{ios:"5.51",android:"5.51"}},nativeHttpEngine:{ios:"5.36",android:"99"},translucent:{ios:"99",android:"5.37"},hybrid:{ios:"5.40",android:"99"},supportOrientation:{ios:"5.39",android:"99"},androidIsVersion:{ios:"99",android:"5.39"},postAdEventNotification:{ios:"5.43",android:"5.43"},MOAT:{ios:"5.46",android:"5.46"},demandState:{ios:"5.47",android:"5.47"},ringerSwitch:{ios:"5.48",android:"99"},appOrientationRestrictions:{ios:"5.50",android:"99"},GDPRSupport:{ios:"5.51",android:"5.51"},adCloseCB:{ios:"5.51",android:"99"},showStandaloneViewInAdobe:{ios:"5.54",android:"99"},IAB:{ios:"5.62",android:"5.63"},messageSecurity:{ios:"99",android:"5.70"}}},{}],57:[function(e,n,t){var u={ext:{clickTags:{backgroundLandscape:"",backgroundPortrait:""},videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},appData:{appIcon:"",appImages:{both:[],portrait:[],landscape:[]}}}},f={ext:{videoData:{videoSource:{vast:""}}}},g={ext:{vastData:{xmlResponse:""}}},p={ext:{videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},appData:{appIcon:{url:""},appImages:[{url:""}]},imageData:{landscape:"",portrait:""}}},v={ext:{imageData:{landscape:"",portrait:""},layoutData:{portrait:{closeButtonUrl:"",frameUrl:""},landscape:{closeButtonUrl:"",frameUrl:""}}}},m={ext:{videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},layoutData:{html:""}}},b={ext:{videoData:{videoSource:{videoformat_mp4:""}},clickTags:{backgroundLandscape:""}}},h={ext:{videoData:{videoSource:{html:""}}}},S={ext:{videoData:{videoSource:{videoformat_mp4:""}},appData:{appIcon:""}}},y={ext:{videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},imageData:{landscape:"",portrait:""},layoutData:{portrait:{closeButtonUrl:"",frameUrl:""},landscape:{closeButtonUrl:"",frameUrl:""}}}};n.exports=function(){var s=function(e,n){return n+e.split("/").pop()},a=function(e,n){for(var r=[],t=Object.keys(n),i=0;i<t.length;i++)e[t[i]]&&o(n[t[i]],e[t[i]]);function o(e,n){var t,i;if("string"==typeof e)r.push(n);else if(e instanceof Array&&0===e.length)r=r.concat(n);else if(e instanceof Array&&0<e.length&&n instanceof Array&&0<n.length)for(t=0;t<n.length;t++)for(i=0;i<e.length;i++)o(e[i],n[t]);else{var a=Object.keys(e);for(t=0;t<a.length;t++)n[a[t]]&&o(e[a[t]],n[a[t]])}}return r};function o(e){return!!e.src&&e.src}function c(e){var n,t=a(e,d(e)),i=0<t.length&&t[0];return!!i&&((n=document.createElement("div")).innerHTML=i,n.firstChild)}function l(e){return e.ext&&e.ext.ableToCache}function i(e){return e&&e.type&&"playableAd"===e.type}function r(e){return e.ext.videoData&&e.ext.videoData.videoSource&&e.ext.videoData.videoSource.videoformat_mp4}function d(e){if(e.ext)return e.ext.layoutData?e.ext.layoutData.portrait&&e.ext.layoutData.landscape?r(e)?y:v:m:e.ext.appData&&e.ext.appData.appImages&&Array.isArray(e.ext.appData.appImages)?p:e.ext.clickTags&&e.ext.clickTags.backgroundLandscape&&e.ext.videoData.videoformat_mp4?b:i((t=e).ext)&&t.ext.videoData&&t.ext.videoData.videoSource&&t.ext.videoData.videoSource.html?h:r(n=e)&&n.ext.appData&&n.ext.appData.appIcon&&!n.ext.appData.appImages?S:u;var n,t}return{extractStaticFiles:function(e,n){return e.ext&&i(e.ext)?function(e,n){var t=[];if(n&&l(e)){var i=c(e);if(!i)return t;var a=o(i);if(a){t.push(a);var r=function(e){var n,t=[];if(n=e.getAttribute("data-assets"))try{t=(t=JSON.parse(n))&&t.assets?t.assets:[]}catch(e){}return t}(i);r&&0<r.length&&(t=t.concat(r))}}return t}(e,n):a(e,d(e))},extractVastSource:function(e){var n=e.ext&&e.ext.vastData&&e.ext.vastData.xmlResponse?g:f;return a(e,n)},updateAdunitPrecachePath:function(e,n,t){return e.ext&&i(e.ext)?function(e,n){var t=c(e),i=o(t);if(l(e)&&i&&t){var a=s(i,n);t.src=a,e.ext.videoData.videoSource.html=t.outerHTML}}(e,n):function(e,r,n){for(var t=Object.keys(n),i=0;i<t.length;i++)e[t[i]]&&(e[t[i]]=o(n[t[i]],e[t[i]]));function o(e,n){var t,i;if("string"==typeof e||"string"==typeof n)n=s(n,r);else if(e instanceof Array&&0===e.length)for(t=0;t<n.length;t++)n[t]=s(n[t],r);else if(e instanceof Array&&0<e.length&&n instanceof Array&&0<n.length)for(t=0;t<n.length;t++)for(i=0;i<e.length;i++)n[t]=o(e[i],n[t]);else{var a=Object.keys(e);for(t=0;t<a.length;t++)n[a[t]]&&(n[a[t]]=o(e[a[t]],n[a[t]]))}return n}return e}(e,n,d(e))},getPlayableCacheFlag:function(){return"isPrecacheable"},isAdAbleToCache:l}}},{}],58:[function(e,n,t){n.exports={adunitFilesMapping:{js:"main.min.js",css:"main.min.css",html:"adUnit.min.html"},environment:{develop:"dev",production:"prod",stage:"stage"},adunitAssetsJsonKeys:{html:"html",js:"js",css:"css",sprite:"sprite",BC:"BrandConnect",libs:"libs",graphicAssets:"graphicAssets",adunitVersion:"adunitVersion"},adunitVersionKey:"adunitVersion",adunitLibsFileName:"adunitLibsFile",failedDownloading:"Failed downloading adunitStaticAssets.json",apiResponseTimeout:15e3}},{}],59:[function(e,n,t){n.exports=function(e,n,t,i,a){var r=e||{},o=n||{},s=t&&t.debug,c=t&&t.domain,l=t&&t.scdn,d=t&&t.protocol,u=t&&t.adunitConfig,f=i,g=a||{};function p(){return d+"//"+function(){if(s&&0<parseInt(s)&&"www.supersonicads.com"!==c){var e=c.split(".")[0];return c+"/users/staging/"+e}return l}()+"/adunit/dist/adunitAssets.json"}function v(){return o.ajax({dataType:"json",url:p(),timeout:g.apiResponseTimeout}).then(function(e,n,t){if(e&&(e.libs&&e.libs.adunitVersion||e.adunitVersion))return e;var i=o.Deferred();return i.reject(g.failedDownloading),i.promise()},function(e,n,t){return g.failedDownloading})}function m(e){var n=o.extend(!0,e,u);return r.Utils.returnResolvedPromise(n)}return{getGlobalAssetsJSON:function(){return f===g.environment.develop?v():u&&u.hasOwnProperty(g.adunitAssetsJsonKeys.adunitVersion)&&null!==u.adunitVersion&&u.libs&&(u.graphicAssets||u.libs.graphicAssets)?r.Utils.returnResolvedPromise(u):v().then(m)},setProtocol:function(e){d=e}}}},{}],60:[function(j,e,n){function t(o){var l,d,u,f,g,p,v,m,b,h,S,y,i,a,r,s,c,C,A,D,I,w=j("./AdUnitConst.js");function L(){var e=u+"//",n="/adunit/dist",t=s?"/versions/"+s:"";if(l&&0<parseInt(l)&&"www.supersonicads.com"!==d){var i=d.split(".")[0],a="/stage/";"local"===i&&(a="/dev/"),e=e+d+("/users/staging/"+i)+n+t+a}else e=e+f+n+t+"/prod/";return e}function P(){var e=m.getCacheByType({cacheBase:"globals"});return e&&e.cache||[]}function T(e,n){return m.cacheGlobalAssets(e,n)}function O(){return"../"+b+"/globals/"}function F(){return m.getAppData().then(function(e){return(e=e||{})[w.adunitVersionKey]=s,m.setAppData(e)}).always(p.Utils.returnResolvedPromise)}function U(){return m.clearCacheByType({cacheBase:"globals"},[])}function x(){return g===o.environment.develop?p.Utils.returnResolvedPromise(!0):function(){var e=P();if(e.length<=0||function(e){for(var n=0;n<e.length;n++){var t=e[n].split("."),i=t[t.length-1];if(w.adunitFilesMapping.hasOwnProperty(i)&&e[n]!==w.adunitFilesMapping[i])return!0}return!1}(e))return p.Utils.returnResolvedPromise(!0);if(SuperSonicGlobalConfig.controllerConfig.adunitVersionToDownload&&SuperSonicGlobalConfig.controllerConfig.adunitVersionToDownload!==s)return p.Utils.returnResolvedPromise(!0);return m.getAppData().then(function(e){e=e||{};var n=p.Utils.versionCompare(s,e[w.adunitVersionKey]?e[w.adunitVersionKey]:"0");return p.Utils.returnResolvedPromise(0===n)}).then(function(e){var n=e&&function(){var e=P(),n=w.adunitFilesMapping;for(var t in n)if(-1==e.indexOf(n[t]))return!1;return!0}();return p.Utils.returnResolvedPromise(!n)}).fail(function(){return p.Utils.returnResolvedPromise(!0)})}()}function N(e){var n=v.extend(!0,{},e);return n[o.BC]&&(v.extend(n,n[o.BC]),delete n[o.BC]),n}function M(e){var n=v.extend(!0,{},e);return n[o.BC]&&delete n[o.BC],n}function k(e,n){var t={};switch(delete n[o.libs],e){case o.RV:case o.BC:t=N(n);break;case o.IS:t=M(n)}return t}function B(e,n){var r=L(),t=k(o.BC,e);return v.map(t,function(e){var n=/(\.\.\/)/g,t=e.match(n),i=t&&t.length||0;if(e=e.replace(n,""),0<i){var a=r.split("/");return a.splice(a.length-1-i,i),a.join("/")+e}return r+e})}function E(e){s=e.adunitVersion?e.adunitVersion:e.libs.adunitVersion}function V(e){var n,t,i,a=v.extend({},w.adunitFilesMapping,e);return t=e,i="../../",(n=a).sprite=i+t.sprite,n[o.BC]=R(t[o.BC],i),n.libs=R(t.libs,i),a=n}function R(e,n){for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=n+e[t]);return e}function K(e){return I.prefetchGlobalAssetsToBrowser(e,L())}return{init:function(e,n,t,i,a,r,o,s,c){e,l=n.debug,d=n.domain,u=n.protocol,f=n.scdn,v=t,m=i,b=a,h=r,S=o,g=s,p=c,y=new(j("./AdUnitDataJsonFetcher.js"))(p,v,n,g,w),I=new(j("./AdUnitUtils.js"))(p,v,w),D=new(j("./AdUnitGraphicAssetsManager.js"))(p,I,m)},setProtocol:function(e){u=e,y.setProtocol(e)},getStaticGlobalsUrl:L,getGlobalAssetsJSON:function(){return y.getGlobalAssetsJSON()},getRVAssetsFromJSON:N,getISAssetsFromJSON:M,getAssetsFromJSONByProductType:k,prefetchGlobalAssetsToBrowser:K,getGlobalsCache:P,isAdunitVersionChanged:function(t){var e=P(),i=!0;return v.each(e,function(e,n){return-1<n.indexOf(t)&&(i=!1),i}),i},clearGlobalsCache:U,getLocalGlobalsFolder:O,cacheGlobalAssets:T,assetsToCache:B,updateAdUnitGlobals:function(n,e,t){if(n){if(C&&"rejected"!==C.state())return C.promise();C=v.Deferred()}else{if(c&&"rejected"!==c.state())return c.promise();c=v.Deferred()}return A&&"rejected"!==A.state()||(A=y.getGlobalAssetsJSON().then(function(e){var n,t;E(i=e),i=V(i),a=w.adunitFilesMapping,n=i.graphicAssets?i.graphicAssets:i.libs.graphicAssets,D.setAdunitAssetsPaths(n,L()),r=i.libs,S.setLibsFilesPaths(r,L()),t=L()+w.adunitFilesMapping.html,h.setRemoteAdunitUrl(t),h.setLocalAdunitUrlFromCache(O(),P())}).then(function(){return n?S.manageDownloadLibsFileByFiletype(w.adunitLibsFileName,e):K({adunitLibsFile:r.adunitLibsFile})}).fail(function(e){n?C.reject(e):c.reject(e)})),A.then(function(){return n?(e=t,D.shouldUpdateAdunitAssets()?D.precacheAdunitGraphicAssets(e):p.Utils.returnResolvedPromise()).then(null,function(){C.reject("Failed to download adunit graphic assets")}).then(x).then(function(e){return e?U().then(function(e,n){return T(B(e),n).then(function(){h.setLocalAdunitUrl(O()+h.getRemoteAdunitFileName())},function(){return h.setLocalAdunitUrl(h.getRemoteAdunitUrl()),"Failed to retrieve Adunit url"}).then(F)}.bind(null,a,t)).then(function(){C.resolve()},function(e){C.reject(e)}).always(function(){return C.promise()}):(C.resolve(),C.promise())}):K(a).then(D.prefetchAdunitGraphicAssets).then(function(){c.resolve()},function(e){c.reject(e)}).always(function(){return c.promise()});var e})},setAdunitVersion:E,getAdunitGlobalsHTML:function(){return w.adunitFilesMapping.html},updateGlobalAssetsStructure:V,isUsingAdunitGraphicAssetsCacheFolder:function(){return!0}}}var i;e.exports=function(e,n){return n?new t(e):(i||(i=new t(e)),i)}},{"./AdUnitConst.js":58,"./AdUnitDataJsonFetcher.js":59,"./AdUnitGraphicAssetsManager.js":61,"./AdUnitUtils.js":63}],61:[function(e,n,t){n.exports=function(e,n,t){var a,r=t||{},o=n||{},s={},i={},c="graphicAssets";function l(){var e=r.getCacheByType({cacheBase:c});return e&&e.cache||[]}return{setAdunitAssetsPaths:function(e,n){s=e,a=n,i.sprite=s.sprite},shouldUpdateAdunitAssets:function(){if(0===l().length)return!0;for(var e in s)if(!r.isAssetInCache(o.extractFileNameFromPath(s[e]),c))return!0;return!1},precacheAdunitGraphicAssets:function(e){return(n=function(){for(var e=l(),n=[],t=function(e){for(var n in s)if(o.extractFileNameFromPath(s[n])===e)return!1;return!0},i=0;i<e.length;i++)t(e[i])&&n.push(e[i]);return n}(),r.deleteCachedListOfAssets(c,n)).then(r.cacheGraphicAssets.bind(null,function(){var e=[];for(var n in s){var t=o.extractFileNameFromPath(s[n]);if(!r.isAssetInCache(t,c)){var i=o.formatAssetsUrlForCache(s[n],a);e.push(i)}}return e}(),e));var n},prefetchAdunitGraphicAssets:function(){return o.prefetchGlobalAssetsToBrowser(i,a)}}}},{}],62:[function(S,e,n){function t(e){var r=e||{},n={dapi:"dapi",externalObfuscation:"externalObfuscation",adunitLibsFile:"adunitLibsFile"},o={dapi:{filename:"dapi.js",type:n.dapi,cacheKeyName:"dapiVersion"},externalObfuscation:{filename:"obfuscateV2.html",type:n.externalObfuscation,cacheKeyName:"externalObfuscation"},adunitLibsFile:{filename:"adunitLibs.min.js",type:n.adunitLibsFile,cacheKeyName:"adunitLibsFile"}},s="libs",c,l,d,i,a;function u(e,n){if(!o[e])return!1;o[e].url=i.formatAssetsUrlForCache(n,a),o[e].newVersion=i.extractFileVersionFromUrl(n)}function f(e){return c.isAssetInCache(e,s)?c.deleteCachedAsset(s,e):r.returnResolvedPromise()}function g(e,n){return 0===r.versionCompare(e,n)}function p(e,n){var t=o[e],i={};return!!t&&(i[t.cacheKeyName]=n,i)}function t(e,n,t){d=e,l=n,c=t||{},i=new(S("./AdUnitUtils.js"))(l,c)}function v(e,n){if(a=n,e)for(var t in e)u(t,e[t])}function m(e,t){var i=o[e]||{},a=function(){return f(i.filename).then(function(){return d.log("AdUnitLibsManager | updateFileInCache | going to download",d.LogLevels.verbose),c.cacheLibsAsset(i.url).then(null,function(){return r.returnResolvedPromise()})}).fail(function(){return r.returnResolvedPromise()})};return c.getAppData().then(function(e){e=e||{},i.savedVersion=e&&e[i.cacheKeyName]?e[i.cacheKeyName]:"0";var n=!g(i.newVersion,i.savedVersion);return t||n?a().then(function(e){d.log("AdUnitLibsManager | updateFileVersion | appData "+JSON.stringify(e),d.LogLevels.verbose);var n=l.extend(e,p(i.type,i.newVersion));return d.log("AdUnitLibsManager | updateFileVersion | updatedData "+JSON.stringify(n),d.LogLevels.verbose),c.setAppData(n).fail(function(){return r.returnResolvedPromise()})}.bind(null,e)):c.isAssetInCache(i.filename,s)?(d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype | file version is updated and file is already in cache",d.LogLevels.verbose),r.returnResolvedPromise()):(d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype  | file version updated but file is not in cache - download it again",d.LogLevels.verbose),c.cacheLibsAsset(i.url))},a).then(function(){return d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype  | success to download file "+i.url,d.LogLevels.verbose),r.returnResolvedPromise("success")},function(){return d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype  | failed to download file "+i.url,d.LogLevels.verbose),b(i)})}function b(e){return e.filename===o.adunitLibsFile.filename?r.returnRejectedPromise("Failed to download file "+e.filename):r.returnResolvedPromise()}var h={init:t,setLibsFilesPaths:v,manageDownloadLibsFileByFiletype:m};return h}e.exports=t},{"./AdUnitUtils.js":63}],63:[function(e,n,t){n.exports=function(e,n,t){var p=n||{},v=t||{};return{formatAssetsUrlForCache:function(e,n){var t=n,i=function(e,n){var t=/(\.\.\/)/g,i=n.match(t),a=i&&i.length||0;if(n=n.replace(t,""),0<a){var r=e.split("/");return r.splice(r.length-1-a,a),r.join("/")+n}return e+n};return"string"==typeof e?i(t,e):p.map(e,function(e){i(t,e)})},prefetchGlobalAssetsToBrowser:function(e,n,t,i){var a,r,o=new p.Deferred,s=[],c=0,l=0,d=p.extend(!0,{},e);d.hasOwnProperty(v.adunitAssetsJsonKeys.BC)&&(p.extend(d,d[v.adunitAssetsJsonKeys.BC]),delete d[v.adunitAssetsJsonKeys.BC]),d.hasOwnProperty(v.adunitAssetsJsonKeys.html)&&delete d.html;var u=function(e){return-1<s.indexOf(e)};p.each(d,function(e,n){"string"==typeof n?u(n)||l++:delete d[e]}),0===l&&o.resolve();var f=function(e){var n;if(u(n=e)||s.push(n),++c===l){if("function"==typeof t&&t(s),a)return;clearTimeout(r),o.resolve()}},g=n;return p.each(d,function(e,i){if(!u(i)){var n=g+i;p.get(n,{},null,{dataType:"text"}).done(function(){f(i)}).fail(function(e,n,t){"parsererror"===n&&f(i)})}}),r=setTimeout(function(){c<l&&("function"==typeof i&&i(),o.reject("Failed to preload all global assets ("+c+" out of "+l+" succeeded)")),a=!0},15e3),o.promise()},extractFileVersionFromUrl:function(e){var n=e.split("/");return 0<n.length?n[n.length-2]:"0"},extractFileNameFromPath:function(e){return e.replace(/^.*[\\\/]/,"")}}}},{}],64:[function(e,n,t){function i(e){var n,t,a=function(){return n},i=function(e){n=e},r=function(){var e=null;return n&&(e=n.replace(/^.*[\\\/]/,"")),e},o=function(){return t},s=function(e){t=e},c=function(e,n,t){var i=e?o():a();return i+=n&&n.productType?"#?productType="+n.productType:"",i+=n&&n.demandSourceName?"&demandSourceName="+n.demandSourceName:"",i+=t&&t.shouldBuildAdUnitUrlForExternal?"&mode=native&viewType=external":"",i+=t&&t.isVersionedAdunit?"&isVersionedAdunit=true":"",i+=t&&t.isUsingAdunitGraphicAssetsCacheFolder?"&isUsingAdunitGraphicAssetsCacheFolder=true":""},l=function(t,e){jQuery.each(e,function(e,n){if("string"==typeof n&&n.match(/.*\.html/))return s(t+n.replace(/^.*[\\\/]/,"")),!1})},d={getAdunitUrl:c,getRemoteAdunitUrl:a,setRemoteAdunitUrl:i,getRemoteAdunitFileName:r,getLocalAdunitUrl:o,setLocalAdunitUrl:s,setLocalAdunitUrlFromCache:l};return d}n.exports=i},{}],65:[function(e,n,t){n.exports={NativeAPI:{adClicked:"adClicked",init:".initInterstitial",load:".loadInterstitial",show:".showInterstitial"},ControllerCallbacks:{cacheReady:".CacheReady",allOffersVast:".AllOffersVast",noMoreOffers:".NoMoreOffers",failedToShow:".failedToShow",failedToLoad:".failedToLoad",fallbackToNonPrecache:".fallbackToNonPrecache",actionClick:".ActionClick",exhaustedDemandSource:".exhaustedDemandSource",onAdWindowsClosed:".onAdWindowsClosed",resetStateManager:".resetStateManager"},AdUnitCallbacks:{adClicked:"SDKController.AdClicked",adVisible:"SDKController.AdVisible",engageEnd:"SDKController.engageEnd"},retriesLogic:{maxNumOfAttemptsToCallAPI:2,initAttemptsDelay:500,serverResponseTimeoutInMilis:1e4}}},{}],66:[function(e,n,t){n.exports=function(e,n){return{retriesLogic:e.retriesLogic,NativeAPI:{init:".initBanner",load:".loadBanner",show:".bannerViewVisible"},ControllerCallbacks:{reset:".reset",isVisible:".isVisible",isInitiated:".isInitiated",cacheReady:".CacheReady",failedToShow:".failedToShow",failedToLoad:".failedToLoad",actionClick:".ActionClick",exhaustedDemandSource:".exhaustedDemandSource",onAdWindowsClosed:".onAdWindowsClosed",noMoreOffers:".NoMoreOffers"},AdUnitCallbacks:{adClicked:"SDKController.AdClicked",adVisible:"SDKController.AdVisible",engageEnd:"SDKController.engageEnd"},ControllerNativeAPI:{adClicked:"adClicked"},ProductName:n.BN,Features:{allowMultiInitCalls:!0,shouldFetchNewFeedOnAdClose:!1,allowReloadDuringShow:!0,displayOnAdReady:!0,allowConsecutiveGatewayRequestsDuringLoad:!1,isExhaustInstanceAllowed:!0},gatewayDestinationMap:{prod:n.gatewayDestinationMap.BN.production},amountOfInventories:2,shouldResetOnEngageEnd:!0,shouldAvoidHandleFrameClose:!0}}},{}],67:[function(o,e,n){e.exports=function(i,a){var r=o("../components/Constants.js");return{create:function(){var e=o("./ProductAdapter.js"),n=o("./AdapterSharedConfig.js"),t=o("./Banner/BannerConfiguration.js")(n,r);return new e(i,a,t,r)}}}},{"../components/Constants.js":9,"./AdapterSharedConfig.js":65,"./Banner/BannerConfiguration.js":66,"./ProductAdapter.js":82}],68:[function(e,n,t){function i(b,h){var S="NativeCallback",y="globals",C="graphicAssets",t=!1,m={},A={mraid:{cache:[]},globals:{cache:[],cacheQueue:[]},BrandConnect:{cache:[],currentAd:0,cacheQueue:[],evaluatedCache:[]},Interstitial:{cache:[],currentAd:0,cacheQueue:[],evaluatedCache:[]},assets:{cache:[],cacheQueue:[]},libs:{cache:[],cacheQueue:[]},graphicAssets:{cache:[],cacheQueue:[]}},D={BrandConnect:{numOfBannersToCache:1},Interstitial:{numOfBannersToCache:1}},I;function o(e){return A[e.cacheBase].currentUser?b.Utils.returnResolvedPromise():h.setFixedUserIdForCache(e.productType).then(function(){A[e.cacheBase].currentUser=h.getFixedUserIdForCache()})}var n=function(e){return 0!==A[e.cacheBase].cache.length?(A[e.cacheBase].currentAd+1)%A[e.cacheBase].cache.length:0},i=function(i){i=i||{},jQuery.each(A,function(e,n){var t=e;A[t].cache&&0!==A[t].cache.length&&b.Utils.isDefined(i)&&i.hasOwnProperty(t)&&A[t].cache.sort(function(e,n){return i[t].indexOf(e.id)<i[t].indexOf(n.id)?-1:1})})},w=function(e){var n,t=e.length;for(n=0;n<t;n++)b.Utils.isDefined(e[n])&&e[n]&&b.PubSub.unsubscribe(e[n])},a=function(e){h.log("cache: "+JSON.stringify(A[e].cache)+" currentAd: "+A[e].currentAd,h.LogLevels.info),h.log("queue: "+JSON.stringify(A[e].cacheQueue),h.LogLevels.info)},L=function(e,n){var t,i=null,a=A[e.cacheBase].cacheQueue.length;for(t=0;t<a;t++)if(A[e.cacheBase].cacheQueue[t].cachingStatus===n){i=A[e.cacheBase].cacheQueue[t];break}return i},P=function(e,n){return e.cacheBase+"/"+n},T=function(e,n){var t=jQuery.map(A[e.cacheBase].evaluatedCache,function(e){return h.AdUtils.getAdId(e)});if(0<t.length){var i=t.indexOf(n.toString());0<=i&&(h.log("Removing ad from evaluatedCache! "+n,h.LogLevels.verbose),A[e.cacheBase].evaluatedCache.splice(i,1))}},O=function(e,n){var t=h.AdUtils.getAdId(n);if(n&&t){var i,a=A[e.cacheBase].cacheQueue.length;for(i=0;i<a;i++)A[e.cacheBase].cacheQueue[i].id==t&&(A[e.cacheBase].cacheQueue[i]=n)}},F=function(t,e){var i=-1;jQuery.each(A[e.cacheBase].cache,function(e,n){return!(b.Utils.isDefined(n.inventoryIndex)&&n.inventoryIndex>t.inventoryIndex||!b.Utils.isDefined(n.inventoryIndex))||(i=e,!1)}),-1===i?A[e.cacheBase].cache.push(t):A[e.cacheBase].cache.splice(i,0,t);var n={};n.cacheBase=e.cacheBase,n.id=t.id,n.inventoryId=t.inventoryId,b.PubSub.publish("Cache.campaignSaved",[n])},U=function(t){jQuery.each(A[t.cacheBase].cacheQueue,function(e,n){if(n.cachingStatus===I.cachingStatus.none&&0===jQuery.grep(A[t.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n)}).length&&0===jQuery.grep(A[t.cacheBase].evaluatedCache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n)}).length)return A[t.cacheBase].evaluatedCache.push(n),!1})},r=function(e,n){var t=jQuery.map(A[e.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)});if(0<t.length){var i=t.indexOf(n.toString());0<=i&&(h.log("Removing ad from cache array! "+n,h.LogLevels.verbose),A[e.cacheBase].cache.splice(i,1))}},s=function(i,a){return h.getGlobalAppData().then(function(e){e.cachePriorityArray=e.cachePriorityArray||{};var n=e.cachePriorityArray[i.cacheBase];if(n){var t=n.indexOf(a.toString());0<=t&&(h.log("Removing ad from cache array! "+a,h.LogLevels.verbose),n.splice(t,1),e.cachePriorityArray=n)}return h.setGlobalAppData(e)})};function c(o){A[o.cacheBase].evaluatedCache.length;var n,e,t,r,i=A[o.cacheBase].cacheQueue.length,a=(D[o.cacheBase].numOfBannersToCache,null),s=null,c=null,l=null,d=null,u=[],f=[];for(t=jQuery.Deferred(),e=0;e<i;e++)A[o.cacheBase].cacheQueue[e].cachingStatus!==I.cachingStatus.pending&&A[o.cacheBase].cacheQueue[e].cachingStatus!==I.cachingStatus.queued||0;var g=function(){0<A[o.cacheBase].evaluatedCache.length?(h.log("line[182]: evaluatedCache is: "+JSON.stringify(A[o.cacheBase].evaluatedCache),h.LogLevels.verbose),(n=L(o,I.cachingStatus.none))?(n.cachingStatus=I.cachingStatus.pending,T(o,h.AdUtils.getAdId(n)),n.numOfAssetsCached=0,m[o.cacheBase][n.id]=[],f.push(h.AdUtils.getAdId(n)),n.preProcessing().then(function(e){if(!b.Utils.isDefined(e))return b.Utils.returnResolvedPromise();n=q(e),O(o,n)},function(){var e={};e.cacheBase=o.cacheBase,e.id=h.AdUtils.getAdId(n),e.inventoryId=n.inventoryId,b.PubSub.publish("Cache.preProcessingFailed",[e]),u.push(e.id),t.reject(A[o.cacheBase].cache,u)}).then(function(){var e={};e.cacheBase=o.cacheBase,e.id=n.id,b.PubSub.publish("Cache.campaignDownloadStarted",[e]),0===n.assets.length?v(o,h.AdUtils.getAdId(n)):(h.log("campaign "+n.id+" download started",h.LogLevels.info),h.cacheAdUnitAssets(P(o,n.id),n))}),0):(w([a,s,d,c,l]),0===u.length?t.resolve(A[o.cacheBase].cache):t.reject(A[o.cacheBase].cache,u))):(L(o,I.cachingStatus.pending)&&h.log("cache is full but we're waiting for a campaign to finish downloading (probably the last)",h.LogLevels.verbose),w([a,s,d,c,l]),0===u.length?t.resolve(A[o.cacheBase].cache):t.reject(A[o.cacheBase].cache,u))},p=function(e){w([c,l]),e&&(0,g())},v=function(e,n,t){var i,a=[];(i=k(e,n))&&i.id&&m[e.cacheBase][i.id].length===i.assets.length&&(h.log("campaign "+i.id+" download finished!",h.LogLevels.info),r=B(m[e.cacheBase][i.id],function(e){return e.status}),0===i.assets.length&&(r=!0),delete m[e.cacheBase][i.id],r?(i.cachingStatus=I.cachingStatus.queued,0<=A[e.cacheBase].evaluatedCache.length?(M(e,i.id,!1),i.numOfAssetsCached=i.assets.length,F(i,e),a=A[e.cacheBase].cache.map(function(e){return h.AdUtils.getAdId(e)}),b.PubSub.publish("Cache.cacheUpdated",[e,{inventoryId:i.inventoryId}])):h.log("Cache full, could not enter new ad",h.LogLevels.error),0<a.length?(h.log("mappedAds after 'handleCachedAd/pushNewCachedAd' "+a,h.LogLevels.verbose),h.setCachePriorityArrayKey(e,a).always(function(){g()})):g()):(M(e,n,!1),U(e),c=b.PubSub.subscribe(S+".deleteFolderFailed",function(e){h.log("in delete failure from cache next",h.LogLevels.verbose),h.checkRequiredCallbackParams(["path"],e,"deleteFolderFailed").didSucceed&&(h.log("deleting folder failed: "+JSON.stringify(e),h.LogLevels.error),b.Utils.isDefined(e.errCode)&&1==e.errCode?p(!0):p(!1))}),l=b.PubSub.subscribe(S+".deleteFolderSuccess",function(e){h.log("in delete success from cache next",h.LogLevels.verbose),h.checkRequiredCallbackParams(["path"],e,"deleteFolderSuccess").didSucceed&&(h.log("deleting folder success: "+JSON.stringify(e),h.LogLevels.info),p(!0))}),u.push(i.id),h.deleteFolder(t)))};return a=b.PubSub.subscribe(S+".assetCached",function(e,n,t){if(h.checkRequiredCallbackParams(["path","file"],e,"assetCached",t).didSucceed){var i,a=x(e.path),r=decodeURIComponent(e.path);-1!==jQuery.inArray(a.id,f)?b.Utils.isDefined(m[a.type][a.id])&&a.type===o.cacheBase?(h.log("asset cached success: "+a.id+"/"+e.file,h.LogLevels.verbose),m[a.type][a.id].push({file:e.file,status:!0}),i={cacheBase:a.type},k(i,a.id).numOfAssetsCached++,v(i,a.id,r)):h.log("Exiting asset cached. folder:"+a.id+" responses array:"+JSON.stringify(m),h.LogLevels.error):h.log("ad is not recognised in this scope: "+a.id+" adForCaching:"+f,h.LogLevels.info)}}),s=b.PubSub.subscribe(S+".assetCachedFailed",function(e,n,t){if(h.checkRequiredCallbackParams(["path","file"],e,"assetCachedFailed",t).didSucceed){var i,a=x(e.path),r=decodeURIComponent(e.path);-1!==jQuery.inArray(a.id,f)&&(b.Utils.isDefined(m[a.type][a.id])&&a.type===o.cacheBase?(m[o.cacheBase][a.id].push({file:e.file,status:!1}),h.log("asset cached failed: "+a.id+"/"+e.file+" with error: "+e.errMsg,h.LogLevels.error),i={cacheBase:a.type},v(i,a.id,r)):h.log("Exiting asset cached failed. folder:"+a.id+" responses array:"+JSON.stringify(m),h.LogLevels.error))}}),d=b.PubSub.subscribe(S+".preCacheFileFail",function(e,n,t){if(h.checkRequiredCallbackParams(["path","file"],e,"preCacheFileFail",t).didSucceed){var i,a=x(e.path),r=decodeURIComponent(e.path);-1!==jQuery.inArray(a.id,f)&&(b.Utils.isDefined(m[a.type][a.id])&&a.type===o.cacheBase?(m[a.type][a.id].push({file:e.file,status:!1}),h.log("pre cache file fail: "+e.file+" with error: "+e.errMsg,h.LogLevels.error),i={cacheBase:a.type},v(i,a.id,r)):h.log("Exiting preCache file fail. folder:"+a.id+" responses array:"+JSON.stringify(m),h.LogLevels.error))}}),g(),t.promise()}var l=function(e){return parseInt(e)},d=function(e){var n;try{n=parseInt(e)}catch(e){n=0}return n},u=function(e,n){var t,i;for(t in n)if(n.hasOwnProperty(t)){if("userUniqueId"===t||"applicationUserId"===t){e.currentUser=n[t];continue}if("applicationKey"===t){e.currentAppKey=n[t];continue}if("files"===t){e.cache=n[t];continue}if(l(t)){e.cache.push({id:t,numOfAssetsCached:b.Utils.isDefined(n[t].files)?n[t].files.length:0,lastUpdateTime:b.Utils.isDefined(n[t].lastUpdateTime)?d(n[t].lastUpdateTime):0,assets:b.Utils.isDefined(n[t].files)?n[t].files:[]});continue}if("lastUpdateTime"===t)return;i=h.isRootFolder(t)?e:(I.initCacheBase(t),e[t]),u(i,n[t])}},f=function(e){b.Utils.isDefined(e)&&e&&e!=={}?u(A,e):A={mraid:{cache:[]},globals:{cache:[],cacheQueue:[]},BrandConnect:{cache:[],currentAd:0,cacheQueue:[]},RewardedVideo_Premium:{cache:[],currentAd:0,cacheQueue:[]},RewardedVideo_Direct:{cache:[],currentAd:0,cacheQueue:[]},Interstitial:{cache:[],currentAd:0,cacheQueue:[]},assets:{cache:[],cacheQueue:[]},libs:{cache:[],cacheQueue:[]}}},x=function(e){var n=decodeURIComponent(e).split("/");return{type:n[0],id:b.Utils.isDefined(n[1])?n[1]:null}},g=function(e){var n=e.split("#");return 1<n.length?n[n.length-1]:(n=e.split("/"))[n.length-1]},N=function(e,n){var t,i=-1,a=g(n),r=e.length;for(t=0;t<r;t++)if(g(e[t])===a){i=t;break}return i},M=function(e,n,t){var i,a=A[e.cacheBase].cacheQueue,r=[],o=!1;for(i=0;i<A[e.cacheBase].cacheQueue.length;i++)a[i].id!=n?r.push(a[i]):(o&&!t&&r.push(a[i]),o=!0);A[e.cacheBase].cacheQueue=r},p=function(i,e){var n,t,a,r,o=0,s=A[i.cacheBase].cache.length,c=[],l=[],d=jQuery.Deferred(),u=function(e,n){-1!==jQuery.inArray(decodeURIComponent(e.path),c)&&(e.success=n,l.push(e),l.length>=c.length&&(w([a,r]),B(l,function(e){return b.Utils.isDefined(e.success)&&e.success})?d.resolve():d.reject()))};if(r=b.PubSub.subscribe(S+".deleteFolderFailed",function(e){h.checkRequiredCallbackParams(["path"],e,"deleteFolderFailed").didSucceed&&-1!==e.path.indexOf(i.cacheBase)&&(h.log("deleting folder failed: "+JSON.stringify(e),h.LogLevels.error),b.Utils.isDefined(e.errCode)&&1==e.errCode?u(e,!0):u(e,!1))}),a=b.PubSub.subscribe(S+".deleteFolderSuccess",function(e){if(h.checkRequiredCallbackParams(["path"],e,"deleteFolderSuccess").didSucceed&&-1!==e.path.indexOf(i.cacheBase)){h.log("deleting folder success: "+JSON.stringify(e),h.LogLevels.info),u(e,!0);var n=x(e.path);if(null!==n.id){var t={};t.cacheBase=n.type,t.id=n.id,t.inventoryId=n.inventoryId,b.PubSub.publish("Cache.campaignDeleted",[t])}}}),i.cacheBase===y)A[i.cacheBase].cache=[],A[i.cacheBase].cacheQueue=[],c.push(y);else{for(o=0;o<s;o++)b.Utils.isDefined(A[i.cacheBase].cache[0].id)||h.log("something went wrong. len="+s+" cache size= "+A[i.cacheBase].cache.length+" first element="+JSON.stringify(A[i.cacheBase].cache[0]),1),n=A[i.cacheBase].cache[0].id.toString(),b.Utils.isDefined(n)&&-1===jQuery.inArray(n,e)&&(t=i.cacheBase+"/"+n,-1===jQuery.inArray(t,c)&&c.push(t)),A[i.cacheBase].cache.shift();for(s=A[i.cacheBase].cacheQueue.length,o=0;o<s;o++)n=A[i.cacheBase].cacheQueue[0].id,b.Utils.isDefined(n)&&A[i.cacheBase].cacheQueue[0].cachingStatus!==I.cachingStatus.none&&(t=i.cacheBase+"/"+n,-1===jQuery.inArray(t,c)&&c.push(t)),A[i.cacheBase].cacheQueue.shift()}if(0===c.length)w([a,r]),d.resolve();else for(h.log("Removing irrelevant campaigns: "+JSON.stringify(c)),o=0;o<c.length;o++)h.deleteFolder(c[o]);return d.promise()},v=function(e,n){var t,i=null,a=A[e.cacheBase].cache,r=A[e.cacheBase].cache.length;for(t=0;t<r;t++)if(a[t].id==n){i=a[t];break}return i},k=function(e,n){var t,i=null,a=A[e.cacheBase].cacheQueue,r=A[e.cacheBase].cacheQueue.length;for(t=0;t<r;t++)if(a[t].id==n){i=a[t];break}return i},B=function(e,n){var t,i=e.length,a=!0;for(t=0;t<i;t++)a=a&&n(e[t]);return a},E=function(){b.PubSub.subscribe(S+".printCache",function(e){b.Utils.isDefined(e.type)&&a(e.type)})},e=function(t,i,e){var a=0,r=!1;return jQuery.each(A[e.cacheBase].cache,function(e,n){if(0<jQuery.grep(t,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n)}).length&&i<=++a)return!(r=!0)}),r},V=function(n,e,t,i){var a,r=n.slice(0,e),o=[];for(A[i.cacheBase].evaluatedCache=[],a=0;a<r.length;a++)0===jQuery.grep(A[i.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(r[a])&&R(e,r[a])}).length&&A[i.cacheBase].evaluatedCache.push(r[a]);for(a=0;a<r.length;a++)0===jQuery.grep(A[i.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(r[a])&&!R(e,r[a])}).length&&o.push(r[a]);for(a=e;a<n.length;a++)0<jQuery.grep(A[i.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n[a])&&R(e,n[a])}).length&&o.push(n[a]);var s,c=n.length;for(a=0;a<A[i.cacheBase].cache.length;a++)0===jQuery.grep(n,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(A[i.cacheBase].cache[a])}).length&&(A[i.cacheBase].cache[a].inventoryIndex=++c,o.push(((s=A[i.cacheBase].cache[a]).adId=s.id,s.staticContent=s.assets,s)));return A[i.cacheBase].mergedAds=o.slice(0,t),A[i.cacheBase].mergedAds},R=function(e,n){if(!e||!n)return h.log("line[750]: entering isCachedAdStillUpdated with no ad",h.LogLevels.verbose),!1;var t=G(e.assets),i=G(n.staticContent);return h.log("cachedAdNumOfUniqueAssets: "+t+", newAdNumOfUniqueAssets:"+i,h.LogLevels.verbose),t===i&&(K(n)||e.lastUpdateTime==n.lastUpdateTime)},K=function(e){return e&&"0"!==e.creativeId},j=function(e,n){return A[n]&&-1<A[n].cache.indexOf(e)},W=function(e,n,t){var i=v(e,n);i&&(i.inventoryIndex=t)},G=function(e){var t,i=[];return e?(jQuery.each(e,function(e,n){t=g(n),-1===N(i,t)&&i.push(t)}),i.length):(h.log("cannot extract unique assets count",h.LogLevels.error),-1)},q=function(e){var n={id:h.AdUtils.getAdId(e),assets:e.staticContent||[],lastUpdateTime:b.Utils.isDefined(e.lastUpdateTime)?e.lastUpdateTime:0,numOfAssetsCached:0,cachingStatus:I.cachingStatus.none,preProcessing:e.preProcessing||b.Utils.returnResolvedPromise};return b.Utils.isDefined(e.credits)&&(n.credits=e.credits),b.Utils.isDefined(e.inventoryIndex)&&(n.inventoryIndex=e.inventoryIndex),n},J=function(e,n){for(var t=0;t<n.length;t++)if(-1!==n[t].indexOf(e))return n[t];return!1},H=function(e,n,t,i){return{productType:e,file:n,currentRetryAttempt:t,totalRetryAttempts:i}},Q=function(e,n,t,i,a,r){var o=!0,s=J(n,i),c=r.adunitRetryAttempts,l=r.adunitRetryInterval,d=r.productType;return t[n].isSuccessfullyCached?0<a&&t[n].isSuccessfullyCached&&b.PubSub.publish("Cache.adunitAssetRetrySuccess",[H(d,s,a,c)]):a<c?(o=!1,setTimeout(function(){h.cacheAsset(e,s)},1e3*l)):b.PubSub.publish("Cache.adunitAssetRetryFailed",[H(d,s,a,c)]),o},_={init:function(e,n){return I=this,t||(f(e),E(),t=!0),i(n),t},initCacheBase:function(e){A[e]||(A[e]={cache:[],currentAd:0,cacheQueue:[]}),m[e]||(m[e]={})},setAdInventoryIndex:W,cacheNext:function(e){return h.log("line[707]: recalling cache next",h.LogLevels.verbose),U(e),c(e)},incrementNextCampaign:function(e){A[e.cacheBase].currentAd=n(e)},isNextAvailable:function(e,n){return I.getCurrentAd(e,n)},setSettings:function(e,n){D[e.cacheBase]=n},getCacheSizeByType:function(e){return A[e.cacheBase].cache.length},cacheGlobalAssets:function(e,n){return I.cacheFilesByFolder("globals",e,n)},cacheGraphicAssets:function(e,n){return I.cacheFilesByFolder("graphicAssets",e,n)},cacheFilesByFolder:function(i,a,r){var e,o,s,c,l,d=a.length,u=[],f=0,g={};if(!A.hasOwnProperty(i))return b.Utils.returnResolvedPromise();o=jQuery.Deferred();var p=A[i].cache,t=A[i].cacheQueue,v=function(e,n){if((!n||g[e])&&((t=r).adunitRetryAttempts&&t.adunitRetryInterval)){if(g[e]={isSuccessfullyCached:n},!Q(i,e,g,a,f,r))return void f++;f=0}var t;u.push({file:e,status:n}),m(e),u.length>=d&&(w([s,c,l]),B(u,function(e){return e.status})?(p=jQuery.map(a,function(e){return e.replace(/^.*[\\\/]/,"")}),o.resolve(p)):o.reject())},m=function(e){var n=t.indexOf(e);-1<n&&t.splice(n,1)};for(s=b.PubSub.subscribe(S+".assetCached",function(e,n,t){h.checkRequiredCallbackParams(["path","file"],e,"assetCached",t).didSucceed&&(e.path!==y&&e.path!==C||(h.log("asset cached success: "+e.file,h.LogLevels.verbose),v(e.file,!0)))}),c=b.PubSub.subscribe(S+".assetCachedFailed",function(e,n,t){h.checkRequiredCallbackParams(["path","file"],e,"assetCachedFailed",t).didSucceed&&(e.path!==y&&e.path!==C||(h.log("asset cached failed: "+e.file+" with error: "+e.errMsg,h.LogLevels.error),v(e.file,!1)))}),l=b.PubSub.subscribe(S+".preCacheFileFailed",function(e,n,t){h.checkRequiredCallbackParams(["path","file"],e,"preCacheFileFail",t).didSucceed&&(e.path!==y&&e.path!==C||(h.log("failed to request to save file:"+e.file+" with error "+e.errMsg,h.LogLevels.error),v(e.file,!1)))}),e=0;e<d;e++)-1===N(p,a[e])?(-1===N(t,a[e])?t.push(a[e]):m(a[e]),h.cacheAsset(i,a[e])):-1!==N(p,a[e])&&v(a[e],!0);return 0===d&&w([s,c,l]),o.promise()},cacheLibsAsset:function(e){var n=jQuery.Deferred(),t=e.replace(/^.*[\\\/]/,"");return A.libs.cacheQueue.push(t),h.cacheAsset("libs",e).then(function(){!function(e){A.libs.cache.push(t);var n=A.libs.cacheQueue.indexOf(e);-1!==e&&A.libs.cacheQueue.splice(n,1)}(e),n.resolve(A.libs.cache)},function(){n.reject("Libs asset cache failed: "+e)}),n.promise()},cacheAds:function(e,n,t){var i,a=t.length;for(A[e.cacheBase].currentAppKey=n,i=0;i<a;i++){var r=q(t[i]);A[e.cacheBase].cacheQueue.push(r)}return o(e).then(c.bind(null,e))},cacheSingleAd:function(e,n){A[e.cacheBase].cacheQueue.splice(0,0,q(n)),I.cacheNext(e)},clearCacheByType:function(e,n){var t,i,a=n.length,r=[],o=null,s=[],c=jQuery.Deferred();if(0===A[e.cacheBase].cache.length&&0===A[e.cacheBase].cacheQueue.length)return c.resolve(A[e.cacheBase].cache),c.promise();for(t=0;t<a;t++)i=h.AdUtils.getAdId(n[t]),o=v(e,i),R(o,n[t])&&(s.push(i),b.Utils.isDefined(n[t].credits)&&!b.Utils.isDefined(o.credits)&&(o.credits=n[t].credits),r.push(o));return jQuery.when(p(e,s)).then(function(){A[e.cacheBase].cache=r,c.resolve(A[e.cacheBase].cache)},function(){h.log("error in clear cache by type",h.LogLevels.error),c.reject()}),c.promise()},getCurrentAd:function(n,e){var i=null;return n&&n.cacheBase&&e?(jQuery.each(e,function(e,t){return jQuery.each(A[n.cacheBase].cache,function(e,n){return!(i=h.AdUtils.getAdId(n)===h.AdUtils.getAdId(t)?n:i)}),!i}),i):null},getNextAvailableAd:function(){return{}},getAppKeyByType:function(e){return b.Utils.isDefined(A[e.cacheBase].currentAppKey)?A[e.cacheBase].currentAppKey:null},getCacheByType:function(e){return A[e.cacheBase]},getRootCacheStructure:function(){return A},isAdInCache:function(e,n){var t,i=A[e.cacheBase].cache.length,a=!1;for(t=0;t<i;t++)if(A[e.cacheBase].cache[t].id==n){a=!0;break}return a},getAdStatusInQueue:function(e,n){var t=k(e,n);return t?t.cachingStatus:null},setAppData:function(e){return h.setGlobalAppData(e)},getAppData:function(){return h.getGlobalAppData()},deleteCachedAsset:function(e,n){return h.deleteAsset(e,n)},deleteCachedListOfAssets:function(e,n){var t,i=new jQuery.Deferred,a=[],r=0;if(0===n.length)return i.resolve(0),i.promise();for(t=0;t<n.length;t++)a.push(h.deleteAsset(e,n[t]));return jQuery.when.apply(null,a).always(function(){var e=arguments;for(t in e)e[t]&&r++;i.resolve(r)}),i.promise()},deleteCachedCampaign:function(e,n){var t=e.cacheBase+"/"+n;return h.deleteFolder(t),r(e,n),s(e,n)},isAssetInCache:j,mergeCampaigns:V,areCampaignsAvailable:e,getFileIndexInCache:N,cachingStatus:{none:0,pending:1,queued:2}};return _}n.exports=i},{}],69:[function(i,e,n){e.exports=function(e,n){var t=i("../../components/Constants.js");return{productType:e.productType,demandGroupName:n.demandGroupName||n.demandSourceName,demandSourceName:n.demandSourceName,demandType:n.demandType||t.demandSourceType.demandSource,isInAppBidding:n.isInAppBidding,integrationType:n.integrationType||t.integrationType.automatic,demandSourceId:n.demandSourceId,waterfallPosition:n.waterfallPosition}}},{"../../components/Constants.js":9}],70:[function(e,n,t){n.exports=function(){return{initAd:{name:"initAd",id:1},initAdFail:{name:"initAdFail",id:2},initAdToAdReady:{name:"initAdToAdReady",id:-1},adReady:{name:"adReady",id:3},showAd:{name:"showAd",id:4},showAdFail:{name:"showAdFail",id:5},showAdSuccess:{name:"showAdSuccess",id:26},showAdCalled:{name:"showAdCalled",id:-3},adVisible:{name:"adVisible",id:8},videoStarted:{name:"videoStarted",id:9},videoCompleted:{name:"videoCompleted",id:10},endCardDisplayed:{name:"endCardDisplayed",id:11},clickDownloadNow:{name:"clickDownloadNow",id:12},endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4},campaignSavedCache:{name:"campaignSavedCache",id:106},campaignsAvailableFromCache:{name:"campaignsAvailableFromCache",id:107},noMoreOffers:{name:"noMoreOffers",id:105},clickReplay:{name:"clickReplay",id:111},clickVideoSound:{name:"clickVideoSound",id:112},adVisibleToClose:{name:"adVisibleToClose",id:-5},adUnitRetrySuccess:{name:"adUnitRetrySuccess",id:170},adUnitRetryFail:{name:"adUnitRetryFail",id:171},adLoaded:{name:"adLoaded",id:6},adLoadedError:{name:"adLoadedError",id:7},userAlert:{name:"userAlert",id:113},backFill:{name:"backFill",id:115},campaignFailedToCache:{name:"campaignFailedToCache",id:109},campaignDeletedCache:{name:"campaignDeletedCache",id:108},hybridFallback:{name:"hybridFallback",id:118},hybridFlowFail:{name:"hybridFlowFail",id:120},loadAd:{name:"loadAd",id:21},loadAdFailed:{name:"loadAdFailed",id:22},loadAdFailedForExhaustedInstance:{name:"loadAdFailedExhaustedInstance",id:32},loadAdIgnored:{name:"loadAdIgnored",id:24},loadAdSuccess:{name:"loadAdSuccess",id:23},bannerLoaded:{name:"bannerLoaded",id:27},bannerVisible:{name:"bannerVisible",id:28},bannerClicked:{name:"bannerClicked",id:29},getInventory:{name:"getInventory",id:158},getInventoryFailed:{name:"getInventoryFailed",id:159},bannerDestroyed:{name:"bannerDestroyed",id:30},bannerLoadToLoadSuccess:{name:"bannerLoadToLoadSuccess",id:-6},bannerLoadSuccessToVisible:{name:"bannerLoadSuccessToVisible",id:-7},bannerVisibleToClick:{name:"bannerVisibleToClick",id:-8},bannerReloadDuringLoad:{name:"bannerReloadDuringLoad",id:251},bannerLoadedDuringShow:{name:"bannerLoadedDuringShow",id:232},initBeforeLoad:{name:"initBeforeLoad",id:128},loadAdToAdReady:{name:"loadAdToAdReady",id:-9},loadAdToShowAd:{name:"loadAdToShowAd",id:-10},fallbackToNonPrecache:{name:"fallbackToNonPrecache",id:154},parseVastSuccess:{name:"parseVastSuccess",id:240},parseVast:{name:"parseVast",id:-11},parseVastFail:{name:"parseVastFail",id:241},dialogBoxExit:{name:"dialogBoxExit",id:155},dialogBoxResume:{name:"dialogBoxResume",id:156},parseVastInfo:{name:"parseVastInfo",id:157},refreshInterval:{name:"refreshInterval",id:164},attemptToBringNewFeed:{name:"attemptToBringNewFeed",id:163}}}},{}],71:[function(e,n,t){n.exports={direct:{http:{method:"GET",dataType:"jsonp"}}}},{}],72:[function(e,n,t){n.exports=function(t,i){var a=e("./FetchDemandConst.js");return{fetchFeed:function(e,n){return t({url:e,data:n,type:a.direct.http.method,dataType:a.direct.http.dataType,timeout:i||1e4})}}}},{"./FetchDemandConst.js":71}],73:[function(e,n,t){n.exports=function(a,r,t,o,s){var i=295e3,c=r.getConfig().mobileSDKSettings.deviceOs,l=t.overrideFeedSettings.shouldFetchNewFeedOnAdClose,d={applyPatchLogic:{name:"applyPatchLogic",id:841},applyPatchLogicEnd:{name:"applyPatchLogicEnd",id:842}};function u(t){var i=a.PubSub.subscribe(s.CB+".webviewPatch",function(){var e,n;a.PubSub.unsubscribe(i),e=t,n=window.timerService.timeElapsed(window.lastWebviewClosedTimer)-e,o.trackEvent(d.applyPatchLogicEnd,{generalMessage:0<n?n:-9}),setTimeout(function(){r.callSDKFunction("displayWebView",{display:!1}),window.timerService.stopTimer(window.lastWebviewClosedTimer),window.lastWebviewClosedTimer=window.timerService.startTimer()})})}return{applyCommunicationSolution:function(){if(!1===l&&c===s.deviceOs.android&&t.productType!==s.BN){var e,n=window.timerService.timeElapsed(window.lastWebviewClosedTimer);r.log("applyCommunicationSolution FiveMinutes communication issue | timeElapsed window.lastWebviewClosedTimer: "+n),n<i||(r.log("applyCommunicationSolution five minutes communication issue | timeElapsed window.lastWebviewClosedTimer > 5 minutes: "+n),e=n,o.trackEvent(d.applyPatchLogic,{generalMessage:0<i?e:-8}),u(n),r.callSDKFunction("displayWebView",{display:!0,activityThemeTranslucent:!0,success:"webviewPatch"}))}}}}},{}],74:[function(e,n,t){n.exports=function(a,r,o,s,t){var i=s.productType,n=s.demandSourceName,c=s.demandGroupName,l=0,d=!1,u=0;function f(e){var n=r.getSDKDataByKey(t.abTests.abt);return n&&n.hasOwnProperty(t.abtParamByProductType[i])&&0<n[t.abtParamByProductType[i]].length&&(e.abt=n[t.abtParamByProductType[i]]),o.Utils.returnResolvedPromise(e)}function g(e){return a.extend(e,{demandSource:n,impressionsCount:l}),o.Utils.returnResolvedPromise(e)}function p(e){var n={},t=r.getApiData({fpf:0});d&&t&&(n.fpf=t.fpf);var i=s.waterfallPosition;return o.Utils.isDefined(i)&&(n.wp=i),n.integrationType=s.integrationType,n.retryCounter=u,a.extend(e,n),o.Utils.returnResolvedPromise(e)}function v(e){var n=r.getApiData({segmentId:0}),t=r.getApiData({segmentName:0});return n&&t&&a.extend(e,{segmentId:n.segmentId,segmentName:t.segmentName}),o.Utils.returnResolvedPromise(e)}function m(n){var e=new a.Deferred;return r.shouldExtendApiDataWithDebugData()?r.getSDKDebugParams().then(function(e){return a.extend(n,e),o.Utils.returnResolvedPromise(n)}).always(function(){e.resolve(n)}):e.resolve(n),e.promise()}function b(e){if(!r.blacklistService.isEmpty(i,c)){var n=r.blacklistService.getBlacklistedCampaigns(i,c);a.extend(e,{blacklistedCampaigns:n.join(",")})}return o.Utils.returnResolvedPromise(e)}function h(e){return r.LastSeenCampaignService.shouldAddLastDisplayedAdCampaignIdToPayload(i)&&a.extend(e,{lastSeenCampaignId:r.LastSeenCampaignService.getLastDisplayedAdCampaignId()}),o.Utils.returnResolvedPromise(e)}function S(e){return r.log("payloadBuilder | built payload for "+i+" | payload "+JSON.stringify(e)),o.Utils.returnResolvedPromise(e)}return{createPayload:function(e,n,t){return l=e,d=n,u=t,r.getApplicationInfo(r.DemandUtils.extendCallbackParamsWithParentProductConfig(s,{})).then(r.getAPIRequiredData).then(g).then(p).then(v).then(f).then(m).then(b).then(h).then(S)}}}},{}],75:[function(e,n,t){n.exports=function(o,s){var c=!0;function e(e){c=!!e}return{canPreloadCandidateAd:function(e,n,t,i,a){if(!c)return s.log("Can not preload next ad right now",s.LogLevels.verbose),!1;if(e&&!n)return s.log("Skipping preload on capped demand",s.LogLevels.verbose),!1;var r=o.VastUtils.isVastCampaign(t);return n||a&&!r||i?(s.log("line[1390]:preload ad "+s.AdUtils.getAdId(t),s.LogLevels.verbose),!0):(s.log("line[1393]:skipping preload with "+s.AdUtils.getAdId(t),s.LogLevels.verbose),!1)},preloadAdFinished:function(){e(!1)},setCanPreloadFlag:e,reset:function(){e(!0)}}}},{}],76:[function(wt,e,n){function t(u,f,g,e,c,n){"use strict";var l,t=!1,d=e.demandSourceName,p=f.adUnitUrl,v=f.jQuery(),i,m=new(wt("./../../components/MultipleInventories.js")),b=new(wt("./PreloadAdManager"))(u,f),a=new(wt("../../patches/PublisherPatchEasybrain.js"))(f.getConfigurationHelper()),h=new(wt("./../../components/sdkPluginType/SDKPluginTypeHandler.js"))(f,u.Utils),S=c.eventicsCategories,y={},r=v.extend({},c.precacheConfig),C=c.displayMode,A=!1,s=0,o=null,D=null,I=null,w=!1,L=!1,P,T=[],O,F={},U,x=g.closeButtonStates,N=!1,M=[],k=null,B=null,E=null,V=null,R=g.CB,K=null,j=0,W={},G=f[c.productType],q=new(wt("./DemandEntityBuilder.js"))(c,e),J=wt("../../patches/PatchIOSLoadAfterLoad.js")(u,f,q),H=n||ce(),Q=wt("./FetchDemand/FetcherPatch.js")(u,f,c,H,g),_=f.DemandUtils,z=new(wt("./../RewardedVideo/dsTaskManager.js"))(u,f,q,g),X=wt("../../components/VastService.js")(u,f),$=new(wt("./../RewardedVideo/availabilityReporter.js"))(u,f,c,q,z),Y=new(wt("./../RewardedVideo/availabilityManager.js"))(u,f,$,c,H),Z=wt("../../components/CampaignsFilter.js")(u,f).factory(q.productType),ee=new(wt("./PayloadBuilder.js"))(v,f,u,q,g),ne,te=!0,ie=1,ae=!1,re=f.getExternalContainer(),oe=function(){M.push(u.PubSub.subscribe("PrecacheManager.cacheUpdatedCallback",function(e){if(_.shouldReceiveMessage(q,e)){var n,t,i;f.log("globals ready: "+A+" initSuccess in settings: "+y.numOfBannersToInitSuccess+" adUnits: "+m.size(e.inventoryId),f.LogLevels.verbose);var a=ne.getCacheSizeByType(q.productType),r=Ve.bind(null,e.inventoryId);if(0===y.numOfBannersToInitSuccess)t=1,n=ne.areCampaignsAvailable(qe(e.inventoryId).slice(0,t),t);else{var o=Je(e.inventoryId);t=o.length;var s=ke(m.getOffers(e.inventoryId),y.numOfBannersToInitSuccess);i=s<=t?s:t,n=ne.areCampaignsAvailable(o,i)}f.log("PM | cacheUpdatedCallback cache updated areCampaignsAvailable: "+n,f.LogLevels.verbose),Y.cacheUpdate(a,A,n,r)}})),M.push(u.PubSub.subscribe("PrecacheManager.campaignDeletedCallback",function(e){if(_.shouldReceiveMessage(q,e)){var n,t=-1,i={};u.Utils.isDefined(e.id)&&(n=We(e.id,e.inventoryId),i=f.AdUtils.updateEventWithAdParams(y,n,i),t=n&&u.Utils.isDefined(n.inventoryIndex)?n.inventoryIndex:-1),H.trackEvent(S.campaignDeletedCache,{inventoryIndex:t},i)}})),M.push(u.PubSub.subscribe("PrecacheManager.campaignSavedCallback",function(e){if(_.shouldReceiveMessage(q,e)){var n,t=-1,i=null,a={};u.Utils.isDefined(e.id)&&(n=We(e.id,e.inventoryId),i=e.id,t=n&&u.Utils.isDefined(n.inventoryIndex)?n.inventoryIndex:-1,a=f.AdUtils.updateEventWithAdParams(y,n,a)),v.extend(a,{eNameStart:{name:S.campaignSavedCache.name+(i||"")},inventoryIndex:t}),H.trackTimingStop(S.campaignSavedCache,a)}})),M.push(u.PubSub.subscribe("PrecacheManager.campaignDownloadStartedCallback",function(e){if(_.shouldReceiveMessage(q,e)){var n=v.extend({},S.campaignSavedCache);n.name=n.name+(e.id||""),H.trackTimingStart(n)}})),M.push(u.PubSub.subscribe("PrecacheManager.cacheAdsSuccessCallback",function(e){_.shouldReceiveMessage(q,e)&&f.log("RV cacheAdsSuccessCallback "+JSON.stringify(e),f.LogLevels.verbose)})),M.push(u.PubSub.subscribe("PrecacheManager.cacheNextFail",function(a){_.shouldReceiveMessage(q,a)&&a.deletedAds&&0<a.deletedAds.length&&v.each(a.deletedAds,function(e,n){var t=We(n,a.inventoryId),i=f.AdUtils.updateEventWithAdParams(y,t,{});H.trackEvent(S.campaignFailedToCache,{},i),Ke(n,a.inventoryId)})})),M.push(u.PubSub.subscribe("PrecacheManager.fallbackToNonPrecache",function(e){_.shouldReceiveMessage(q,e)&&(u.PubSub.publish(c.productType+".fallbackToNonPrecache",[e]),H.trackEvent(S.fallbackToNonPrecache))})),M.push(u.PubSub.subscribe("PrecacheManager.cacheAdsFailedCallback",function(e){if(_.shouldReceiveMessage(q,e)){f.log("RV cacheAdsFailedCallback "+JSON.stringify(e),f.LogLevels.verbose);for(var n,t,i,a=e.deletedOffers.length,r=e.deletedOffers,o=0;o<a;o++){var s=r[o],c=We(s,e.inventoryId),l=f.AdUtils.updateEventWithAdParams(y,c,{});H.trackEvent(S.campaignFailedToCache,{},l),Re(s,e.inventoryId)}if(0===y.numOfBannersToInitSuccess)t=1,n=ne.areCampaignsAvailable(qe(e.inventoryId).slice(0,t),t);else{var d=Je(e.inventoryId);t=d.length;var u=ke(m.getOffers(e.inventoryId),y.numOfBannersToInitSuccess);i=u<=t?u:t,n=ne.areCampaignsAvailable(d,i)}Y.cacheAdsFailed(A,n,e.errorLog,Ve.bind(null,e.inventoryId))}})),M.push(u.PubSub.subscribe("PrecacheManager.preProcessingFailedCallback",function(e){if(_.shouldReceiveMessage(q,e)){f.log("PM | preProcessingFailedCallback "+e,f.LogLevels.verbose);var n=e.id,t=We(n,e.inventoryId);Fe(t)&&(_.extendCallbackParamsWithProductConfig(q,t),f.addAdToLoadedCreatives(t),Ee(),ve(t))}})),M.push(u.PubSub.subscribe("Cache.adunitAssetRetrySuccess",function(e){if(e.productType===c.productType&&e.file&&e.currentRetryAttempt&&e.totalRetryAttempts){var n=e.file+"["+e.currentRetryAttempt+" of "+e.totalRetryAttempts+"]";H.trackEvent(S.adUnitRetrySuccess,{generalMessage:n.substring(0,250)})}})),M.push(u.PubSub.subscribe("Cache.adunitAssetRetryFailed",function(e){if(e.productType===c.productType&&e.file&&e.currentRetryAttempt&&e.totalRetryAttempts){var n=e.file+"["+e.currentRetryAttempt+" of "+e.totalRetryAttempts+"]";H.trackEvent(S.adUnitRetryFail,{generalMessage:n.substring(0,250)})}})),M.push(u.PubSub.subscribe("SDKController.AdTracked",function(e){_.shouldReceiveMessage(q,e)&&(e=f.AdUtils.formatParamsToAdId(e),f.callSDKFunction("adCredited",_.extendCallbackParamsWithParentProductConfig(q,{credits:We(f.AdUtils.getAdId(e),e.inventoryId).credits}),"adCreditedSuccess","adCreditedFailed"))})),M.push(u.PubSub.subscribe("SDKController.AdStarted",function(e){if(_.shouldReceiveMessage(q,e)&&f.RingerSwitchService.isInitiated()){var n={},t=Dn();t&&t.ext&&(n=tt(I.ext)),f.RingerSwitchService.startListener(n),f.log("Ringer | startListener ringer status from AdStarted.",f.LogLevels.info)}})),M.push(u.PubSub.subscribe("SDKController.Analytics",function(e){if(_.shouldReceiveMessage(q,e)&&e&&e.action){var n=e.action,t=e.eventParam;"fireEvent"===n?H.trackEvent(t.eName,t.label,t.data):"startTiming"===n?H.trackTimingStart(t.eName,t.data):"stopTiming"===n?H.trackTimingStop(t.eName,t.data):"setCustomData"===n&&H.updateBaseData(t.data)}})),M.push(u.PubSub.subscribe("SDKController.AdLoaded",function(e){if(_.shouldReceiveMessage(q,e)){var n=f.AdUtils.getAdId(e),t=We(n,e.inventoryId),i=e.inventoryId;clearTimeout(P),f.log("ad loaded with params: "+JSON.stringify(e),f.LogLevels.verbose),t&&H.updateBaseData({rvPlayMethod:t.displayMode});var a=0;if(u.VastUtils.isVastCampaign(t)&&(a=u.VastUtils.getVastViewCount(t)),u.Utils.isDefined(e.errMsg)){z.publish("AdErrorState",[_.extendCallbackParamsWithDemandConfig(q,{error:!0})]),f.log("Error in loading ad: "+e.errMsg,f.LogLevels.error);var r={generalMessage:e.errMsg,vastViewCount:u.VastUtils.getVastViewCountForEvent(a)};return r=f.AdUtils.updateEventWithAdParams(y,t,r),H.trackEvent(S.adLoadedError,{},r),t.ext.isHybridFlow&&t.ext.viewUniqueId&&(f.HybridService.clearAppPage(t.ext.viewUniqueId),u.PubSub.publish("HybridService.closeHybridFlow",[{viewUniqueId:t.ext.viewUniqueId}])),u.VastUtils.setMaxVastCount(t),Sn(t),void ve(e)}y.viewType===g.viewTypes.externalView&&H.incrementSessionNumber(),H.trackEvent(S.adLoaded,{vastViewCount:u.VastUtils.getVastViewCountForEvent(a)}),u.Utils.isDefined(e.enableBackButton)&&f.setBackButtonState(e.enableBackButton),e=f.AdUtils.formatParamsToAdId(e),f.onAdLoaded(We(f.AdUtils.getAdId(e),e.inventoryId)),Y.adLoadedSuccessfully(m.size(i),je(i))}})),M.push(u.PubSub.subscribe("SDKController.AdLoadError",function(e){_.shouldReceiveMessage(q,e)&&(Y.adLoadError(),f.unloadFramesByProduct(q),lt()||Un())})),M.push(u.PubSub.subscribe("SDKController.AdError",function(e){_.shouldReceiveMessage(q,e)&&f.log("SDKController.AdError:"+JSON.stringify(e),f.LogLevels.verbose)})),M.push(u.PubSub.subscribe("SDKController.dialogBoxResume",function(e){_.shouldReceiveMessage(q,e)&&H.trackEvent(S.dialogBoxResume)})),M.push(u.PubSub.subscribe("SDKController.dialogBoxExit",function(e){_.shouldReceiveMessage(q,e)&&H.trackEvent(S.dialogBoxExit)})),M.push(u.PubSub.subscribe("SDKController.adClosed",function(e){_.shouldReceiveMessage(q,e)&&H.updateBaseData({rvPlayMethod:null})})),M.push(u.PubSub.subscribe(c.productType+".GetConfig",function(t){if(_.shouldReceiveMessage(q,t)){var e=Dn();if(!e)return void f.log("line[331]:get config with no loaded ad",f.LogLevels.verbose);u.VastUtils.isVastCampaign(e)&&B?B.then(function(e,n){de(n||e,t)}):(f.HybridService.isHybridCampaign(e,y)&&se(e),de(e,t))}})),M.push(u.PubSub.subscribe(c.productType+".isVisible",function(e){if(_.shouldReceiveMessage(q,e)){var n=Dn(),t=f.getCurrentDisplayedAd();if(f.isAdDisplayed(n))return;n&&(t&&f.getCurrentDisplayedAdType()!==c.productType?H.trackEvent(S.bannerLoadedDuringShow):(f.setCurrentDisplayedAd(n),f.getCurrentDisplayedAdType()===g.BN&&re.shouldReportAdVisible()&&f.onAdVisible()))}}))};function se(e){e.ext.shouldInitHybridFlow=!0}function ce(){var e=ct()?g.integrationType.manual:g.integrationType.automatic,n={productChance:(f.getEnv(),1),baseData:{productType:q.productType,demandSourceName:q.demandSourceName,integrationType:e,isBiddingInstance:lt()}};return u.Eventics.createEventic(n)}function le(){return H}function de(e,n){var t=We(f.AdUtils.getAdId(e),e.inventoryId);return t?(u.VastUtils.isVastCampaign(e)||ue(t),f.MOATService.containsMOATData(e)&&f.MOATService.enableTracking(),he(t),n&&n.callback&&n.callback.call(null,t)):f.log("line[456]: no current available ad",f.LogLevels.verbose),t}function ue(e){y.requestID&&(e.requestID=y.requestID);var n=fe(f.getApiData({scdn:1,protocol:0,defaultProtocol:1}).scdn);return v.extend(!0,e,f.getFormattedDeviceData(),ge(n))}function fe(e){var n=f.decideUrlProtocolAccordingToHTTPSCompliance()+"//"+e;return"prod"!==f.getEnv()&&(n=f.api()+"/users/staging/"+SuperSonicGlobalConfig.mobileSDKSettings.env),n}function ge(e){return{settings:{protocol:f.decideUrlProtocolAccordingToHTTPSCompliance(),urltocdn:e,appKey:f.getSDKDataByKey(g.requiredSDKDataKeys.applicationKey),appOrientation:f.getSDKDataByKey(g.requiredSDKDataKeys.appOrientation),deviceLanguage:f.getSDKDataByKey(g.requiredSDKDataKeys.deviceLanguage),bundleId:f.getSDKDataByKey(g.requiredSDKDataKeys.bundleId),sdkAbName:f.getSDKDataByKey(g.requiredSDKDataKeys.sdkAbName),deviceId:f.getDeviceId()}}}function pe(){k=E=B=null}function ve(e){var n=f.AdUtils.getAdId(e);Ke(n,e.inventoryId);var t=z.getStatus().duringEngage;In(n,e.inventoryId),pe();var i=l.getNextAd(t,e.inventoryId),a=function(){f.log("DemandSource | adLoaded with error - removing and moving to next offer",f.LogLevels.verbose),An(null),f.removeAdUnit(We(n,e.inventoryId))};if(t&&!i){var r=m.getBackfillOffer(e.inventoryId);if(r){wn();var o=f.AdUtils.updateEventWithAdParams(y,r,{rvPlayMethod:r.displayMode});H.trackEvent(S.backFill,{},o),a()}else{f.log("RV adLoaded with error | no offers for user - show dialog",f.LogLevels.verbose),f.setCloseButtonState({productType:c.productType,demandSourceName:d,state:x.close});var s={productType:c.productType,message:O&&O.noOffers?O.noOffers:g.labels.noOffers,yes:"close",alwaysClose:!0};f.alert(s),H.trackEvent(S.userAlert,{inventoryIndex:e.inventoryIndex||-1})}}else a()}function me(e){return e&&e.displayMode?e.displayMode:C.softprecache}function be(){var e=m.getActiveInventoryId();H.incrementSessionNumber();var n=Dn()||He(e);n||(n=Qe(!0,e));var t=f.AdUtils.updateEventWithAdParams(y,n,{});t.rvPlayMethod=me(n),H.updateBaseData(t)}function he(e){var n=e.displayMode!=C.softprecache&&ne.isPrecache();void 0===e.productType&&(e.productType=q.productType),void 0===e.demandSourceName&&(e.demandSourceName=q.demandSourceName),e.settings.precache=n,e.settings.sessionDepth=ie,e.settings.viewType=y.viewType,u.AdAssets.isAdAbleToCache(e)&&(e.settings.ableToCache=e.ext.ableToCache,delete e.ext.ableToCache),f.MOATService.containsMOATData(e)&&f.MOATService.isTrackingEnabled()&&(e.settings.moatData=f.MOATService.extractMoatDataFromAd(e))}var Se=function(e){var n="AttemptToBringNewAds | ";if(f.log(n),H.trackEvent(S.attemptToBringNewFeed,{generalMessage:z.getStatusMsg()}),ct()||H.trackTimingStart(S.initAdToAdReady),N)f.log(n+"Cannot bring feed attemptToBringNewAdsInProcess="+N);else{if(N=!0,!z.allowExternalCallToApi())return f.log(n+"Cannot bring feed: "+z.getStatusMsg()),void(D=setTimeout(function(){N=!1,f.log(n+"2 minutes delay finished"),Se(e)},c.timerLengths.riDelay));Y.inventoryEmpty(e),setTimeout(function(){f.log(n+"Can bring feed"),ye(y.refreshInterval),f.unloadFramesByProduct(q),N=!1,Un()},0)}},ye=function(e){f.log("setting refresh interval to: "+e,f.LogLevels.info),o&&clearInterval(o),e&&0!==e&&!lt()?o=setInterval(function(){H.trackEvent(S.refreshInterval),z.canEngage()?(clearInterval(o),z.canInitCallToApi().then(Se)):(f.log("setDuringRefreshInterval(true)",f.LogLevels.info),pt(!0))},e*c.timeUnit):f.log("No Refresh interval is needed")};function Ce(e){U=e.labels,e.templateid==c.customDialog?U.confirmCloseMsg[g.confirmCloseMsgMap[0]].alwaysClose=!0:O=e.labels}var Ae=function(e){var n=e.seatbid.ext;n.shouldStartMuted=f.AdUtils.isCampaignShouldStartMuted(f.getConfig().controllerConfig,c.productType),v.extend(n,c.overrideFeedSettings),v.extend(n,f.getApplicationExternalConfig().getABTestConfiguration(De(),n.landingId)),o&&clearInterval(o),kn()&&ye(n.refreshInterval),f.isLegacy(f.featureMap.rvPortraitOrientation)&&(n.orientation=g.appInfo.orientation.landscape),c.productType===g.BN&&(n.numOfBannersToInitSuccess=0,n.numOfBannersToCache=0),y=n},De=function(){return q.demandSourceName===g.RIS?g.RIS:G.getProductType()},Ie=function(e){v.each(e,function(e,n){n.inventoryIndex=e,ne.isPrecache()&&ne.setAdInventoryIndex(f.AdUtils.getAdId(n),e)})};function we(){v.each(M,function(e,n){u.PubSub.unsubscribe(n)})}function Le(){D&&clearTimeout(D),o&&clearInterval(o)}function Pe(e){var n=!!e&&e.engaged;we(),Le();var t=v.extend({},q,{engaged:n});u.PubSub.publish(c.productType+".exhaustedDemandSource",[t])}function Te(e){var n,t=[];for(n=0;n<e.length;n++)ne.isAdInCache(f.AdUtils.getAdId(e[n]))||t.push(e[n]);return t}var Oe=function(e){var t=[];return v.each(e,function(e,n){n.ext&&n.ext.appData&&n.ext.appData.adAssets&&(n.ext.appData.appImages=n.ext.appData.adAssets,delete n.ext.appData.adAssets),t.push(n)}),t},Fe=function(e){return ne.isPrecache()&&u.VastUtils.isVastCampaign(e)&&e.ext.precacheVasts},Ue=function(e){return 1===e.length&&Fe(e[0])&&(L=!0),u.Utils.returnResolvedPromise()},xe=function(e){return rn(u.VastUtils.isVastCampaign(e)),e.inventoryId&&un(),tn(e).then(function(e,n){return f.AdUtils.formatVastAdForPrecache(n,xe.bind(null,e))})},Ne=function(e){var n=[];return L?n.push(f.AdUtils.formatVastAdForPrecache(e[0],xe.bind(null,e[0]))):n=f.AdUtils.formatAdsForPrecache(e),n},Me=function(r,o){var s,c,e,l=ne.isPrecache();r=Oe(r),Ie(r);var d=m.setOffers(r.slice(0),o);s=Ne(r),c=ke(r,y.numOfBannersToCache);var n=function(){if(u.VastUtils.isThereVastCampaign(qe(d))&&Y.setAMSettings({reportOnAdunitReady:!1},!0),l){var e=ke(r,y.numOfBannersToInitSuccess),n=ne.areCampaignsAvailable(s.slice(0,e),e);f.log("DemandSource | updateCurrentAds areCampaignsAvailable "+n,f.LogLevels.verbose);var t=Ve.bind(null,d);Y.preCacheMode(n,c,t,u.VastUtils.areAllCampaignTypesAreVast(qe(d)),ln.bind(null,d),m.size(d),je(d),u.VastUtils.isVastCampaign(r[0]));var i=Te(s),a={cacheTimeoutSuccessCallback:function(){Me(r,o)},cacheTimeoutFailCallback:Be,applicationUserId:f.getSDKDataByKey(g.requiredSDKDataKeys.applicationUserId),applicationKey:f.getSDKDataByKey(g.requiredSDKDataKeys.applicationKey),newAdsToEnterCache:i,inventoryId:d};ne.handleCacheAds(a)}else Y.notPreCacheMode(Ve.bind(null,d))};l&&(e=ne.mergeCampaigns(s,c),f.log("DemandSource | updateCurrentAds after merge "+JSON.stringify(e),f.LogLevels.verbose)),!l||y.purgeCacheOnInit?(f.log("DemandSource | already purged cache so go strait to adding the new ads",f.LogLevels.verbose),n()):ne.clearCacheByType(e).always(n)},ke=function(e,n){for(var t=e.length<n?e.length:n,i=n,a=0;a<t;a++)e[a].isCacheable||i--;return i},Be=function(e){Y.cacheTimeoutFail(e)},Ee=function(){z.publish("InitiatedAPICall",[_.extendCallbackParamsWithProductConfig(q,{duringInit:!1})])},Ve=function(e){f.log("ProductInstance | handlePossibleAdUnitsReady",f.LogLevels.verbose);var n=He(e);if(n){var t=u.VastUtils.isVastCampaign(n);if(L&&rn(t,e))dn(e);else{var i=m.size(e),a=je(e),r=u.VastUtils.areAllCampaignTypesAreVast(qe(e));Y.canReportAvailable(i,a,r,t)}re&&q.productType===g.BN?yt(y,q,F):l.attemptToPreloadAd(!1,e)}},Re=function(e,n){m.removeOfferById(e,n)&&!m.isEmpty(n)&&ne.incrementNextCampaign()},Ke=function(e,n){if(!Ln()){var t=m.getOfferById(e,n);t?t.toRemove=!0:f.log("Error in mark current ad to be removed:"+e,f.LogLevels.error),V=null}},je=function(e){for(var n=0,t=m.getOffers(e),i=m.size(e),a=0;a<i;a++)n+=t[a].credits;return n},We=function(e,n){var t=m.getOfferById(e,n);if(!t){if(Ln())return m.getBackfillOffer(n);f.log("Error in getAdUnitById, id "+e+" not found in "+JSON.stringify(m.getOffers(n)),1)}return t},Ge=function(e,n,t){return m.replaceOfferById(e,n,t)},qe=function(e){return v.grep(m.getOffers(e),function(e){return!(u.Utils.isDefined(e.toRemove)&&e.toRemove)})},Je=function(e){var n=qe(e);return v.grep(n,function(e){return e.isCacheable})},He=function(e){var n,t=We(f.AdUtils.getAdId($e(e)),e);return n=ne.isPrecache()&&t&&t.isCacheable?(t=We(f.AdUtils.getAdId(Xe(e)),e),C.precache):C.nonprecache,t&&!t.displayMode&&_e(t,n),t},Qe=function(e,n){if(!e)return null;var t=ze(n);return t?We(f.AdUtils.getAdId(t),n):null},_e=function(e,n){e&&(e.displayMode=n)},ze=function(e){return 0<qe(e).length?qe(e)[0]:null},Xe=function(e){return 0===y.numOfBannersToInitSuccess?ne.getCurrentAd(qe(e).slice(0,1)):ne.getCurrentAd(qe(e))},$e=function(e){return m.getCurrentOffer(e)},Ye=function(e){var n=f.AdUtils.getAdId(e);z.publish("Engaged",[_.extendCallbackParamsWithProductConfig(q,{duringEngage:!1})]),An(null),pe();var t=We(n,e.inventoryId);clearTimeout(P),t?(f.log("onEngageEnd with params: "+JSON.stringify(t),f.LogLevels.verbose),In(n,t.inventoryId),u.Utils.isDefined(t)&&t.toRemove&&(f.log("removing ad id: "+n,f.LogLevels.verbose),Re(n,t.inventoryId))):f.log("Tried to end engage with no ad",f.LogLevels.error)},Ze=function(e){var n=f.AdUtils.getAdId(e),t=We(n,e.inventoryId);u.Utils.isDefined(t)&&t.toRemove&&(f.log("removing ad id: "+n,f.LogLevels.verbose),Re(n,t.inventoryId))};function en(e){k&&"pending"===k.state()&&(u.Utils.isDefined(e)?(f.log("handleVastAvailability - VAST failed to load with reason: "+e,f.LogLevels.verbose),k.reject()):(f.log("handleVastAvailability - VAST verified - resolve",f.LogLevels.verbose),k.resolve()))}function nn(e){var n="";return u.Utils.isDefined(q.demandSourceName)&&(n=q.demandSourceName),n+=q.productType+e}function tn(a){var r=f.AdUtils.getAdId(a),o=sn(a),s=a.inventoryId;if(a.ext.videoData.isVast&&V){var e=u.VastUtils.getVastViewCount(a),n=a.settings.preload,t=a.displayMode;V=u.VastUtils.setVastViewCount(V,e),(a=V).settings.preload=n,a.displayMode=t}else(a=u.VastUtils.setVastViewCount(a,0)).ext.vastExhaustIndex&&1<a.ext.vastExhaustIndex&&(V=a);return ue(a),B=new v.Deferred,a.vastIframeId=nn(r),H.trackTimingStart(S.parseVast),X.parseVast(a,ne.isPrecache(),y).then(function(e){if(null!==B){if(H.trackTimingStop(S.parseVastSuccess,{generalMessage:o,eNameStart:S.parseVast}),!u.Utils.isDefined(a.toRemove)||!a.toRemove){e.ext.videoData.isVast=!0,u.Utils.isDefined(a.displayMode)&&(e.displayMode=a.displayMode),u.VastUtils.incrementVastViewCount(e),en(e.errMsg);var n=a;return u.VastUtils.incrementVastViewCount(n),Ge(a=e,f.AdUtils.getAdId(a),s),B.resolve(n,e)}X.removeIframe(nn(r))}},function(e){if(null!==B){var n={generalMessage:o,eNameStart:S.parseVast};if(n=f.AdUtils.updateEventWithAdParams(y,a,n),e.isTimeLimitReached&&(n.callFailReason="timeout"),H.trackTimingStop(S.parseVastFail,n),!u.Utils.isDefined(a.toRemove)||!a.toRemove){var t=u.VastUtils.incrementVastViewCount(a);en(e.errMsg),z.publish("AdErrorState",[_.extendCallbackParamsWithProductConfig(q,{error:!0})]),f.log("Error in loading ad: "+e.errMsg,f.LogLevels.error);var i={generalMessage:e.errMsg,vastViewCount:u.VastUtils.getVastViewCountForEvent(t)};return i=f.AdUtils.updateEventWithAdParams(y,a,i),H.trackEvent(S.adLoadedError,{},i),u.VastUtils.setMaxVastCount(a),Sn(We(r,s)),B.reject()}X.removeIframe(nn(r))}})}function an(e){return E=new v.Deferred,e.ext.viewUniqueId=f.HybridService.createHybridId(e,q),f.HybridService.loadHybridCampaign(f.AdUtils.getStoreAppId(e),e.ext.viewUniqueId).then(function(){if("resolved"!==E.state())return e.ext.forceOrientation="portrait",e.ext.isHybridFlow=!0,E.resolve()},function(){if("resolved"!==E.state())return H.trackEvent(S.hybridFlowFail,{callFailReason:"Store load fail"}),e.ext.isHybridFlow=!1,E.resolve()})}function rn(e,n){return on(e)||cn(n)}function on(e){return y.preFetchAllVasts&&e}function sn(e){var n;return on(u.VastUtils.isVastCampaign(e))?n="preFetchAllVasts":cn(e.inventoryId)&&(n="vastAvailabilityValidation"),n}function cn(e){return ne.isPrecache()&&u.VastUtils.areAllCampaignTypesAreVast(qe(e))}function ln(e){f.log("handleVastAvailability",f.LogLevels.verbose),un(),dn(e),Ee()}function dn(e){v.when(k).then(function(){Y.allVastPromiseResolved(m.size(e),je(e))})}function un(){k&&"pending"===k.state()||(k=new v.Deferred)}var fn=function(){return z.canInitCallToApi().then(function(){},function(){return f.log(c.errors.init[1001]+z.getStatusMsg(),f.LogLevels.error),c.errors.init[1001]}).then(function(){z.publish("InitiatedAPICall",[_.extendCallbackParamsWithProductConfig(q,{duringInit:!0})]);var e=new(wt("./FetchDemand/FetchDirect.js"))(v.ajax,c.timerLengths.serverResponseTimeoutInMilis);return s++,u.Utils.decodeValues(i),g.BN===c.productType&&H.trackEvent(S.getInventory),Q.applyCommunicationSolution(),e.fetchFeed(G.getDestination(d),i)}).then(gn).then(pn,function(e,n){var t,i=new v.Deferred;switch(t=c.errors.init[1005],typeof e){case"object":e.responseText&&""!==e.responseText?t=e.responseText:e.errorMessage&&""!==e.errorMessage&&(t=e.errorMessage);break;case"string":""!==e&&(t=e)}return Ee(),"timeout"===n?i.reject(c.errors.load.timeout):i.reject(t),i.promise()})},gn=function(e){var n=new v.Deferred;if(u.Utils.isDefined(e.response)&&u.Utils.isDefined(e.response.errorCode)){Ee();var t=u.Utils.isDefined(e.response.errorMessage)&&e.response.errorMessage?e.response.errorMessage:c.errors.init[1003];n.reject(t)}else u.Utils.isDefined(e.seatbid)&&u.Utils.isDefined(e.seatbid.bid)&&u.Utils.isDefined(e.seatbid.ext)&&u.Utils.isDefined(e.seatbid.ext.labels)?n.resolve(e):(Ee(),n.reject(c.errors.init[1004]));return n.promise()},pn=function(e){return function(e){z.setConnection(!0);var t=e.seatbid.bid,n=e.seatbid.ext;G.getAmountOfSupportedInventories()===g.DEFAULT_AMOUNT_OF_INVENTORIES&&m.reset();var i=m.getAvailableInventoryId();if(H.updateBaseData({landingId:n.landingId,strategyId:n.strategyId}),e.seatbid.backfill){var a=e.seatbid.backfill;a.id=f.AdUtils.getAdId(a),_e(a,C.softprecache),i=m.setBackfillOffer(a,i)}return v.when(Ae(e),Ce(n)).then(Z.filterByAppInstalled.bind(null,t,y,c.filterDisableTypes)).then(function(e){for(var n=e&&e.length||0,t="",i=0;i<n;i++)t+=f.AdUtils.getAdType(e[i],y),i<n-1&&(t+=", ");return H.updateBaseData({feedSize:n,feedCampaignOrder:t}),u.Utils.returnResolvedPromise()}.bind(null,t)).then(ne.decidePrecacheStatus.bind(null,{numOfCampaigns:t.length,settings:y})).then(function(){return Y.setAMSettings({preFetchAllVasts:y.preFetchAllVasts,shouldRefreshInventory:Mn(y),isPreCache:ne.isPrecache(),numOfBannersToInitSuccess:y.numOfBannersToInitSuccess,reportOnAdunitReady:y.reportOnAdunitReady}),t&&0<t.length?(A=!1,xn(),f.adUnitGlobals.updateAdUnitGlobals(!0,Bn(),W)):u.Utils.returnRejectedPromise("We did not receive any campaigns in inventory")}).then(function(){return v.when(Vn(t)?f.adUnitLibsManager.manageDownloadLibsFileByFiletype(c.libsCacheFiles.dapi):u.Utils.returnResolvedPromise(),(n=t,ne.isPrecache()&&Rn(n)?f.adUnitLibsManager.manageDownloadLibsFileByFiletype(c.libsCacheFiles.externalObfuscation).then(function(e){Kn(n,e)}):u.Utils.returnResolvedPromise()));var n}).then(ne.handleCacheClear).then(Ue(t)).then(function(){return A=!0,Me(t,i)}).fail(function(e){var n=e||"Fail parse adUnit info from api response";m.removeInventory(i),g.BN===c.productType&&H.trackEvent(S.getInventoryFailed,{generalMessage:n}),Pn(),e&&f.log(e,f.LogLevels.error),Y.inventoryEmpty(e||n),At()&&Pe()}),(new v.Deferred).resolve(v.extend({},e.seatbid.ext,{numOfAdUnits:e.seatbid.bid.length}))}(e)},vn=function(){v.each(T,function(e,n){clearTimeout(n)}),T=[]};function mn(){z.publish("Engaged",[_.extendCallbackParamsWithProductConfig(q,{duringEngage:!0})])}function bn(){var e;e={productType:c.productType,message:O&&O.noInternet?O.noInternet:g.labels.noInternet,yes:"close",alwaysClose:!0},f.alert(e)}var hn=function(e,n,t){var i,a=f.AdUtils.getAdId(e);f.log("Error in loading ad - timeout in "+a,f.LogLevels.error),i=t?S.showAdFail:S.adLoadedError;var r={isprecache:ne.isPrecache()};r=f.AdUtils.updateEventWithAdParams(y,e,r),H.trackEvent(i,{generalMessage:"Error in loading ad - timeout"},r),_.extendCallbackParamsWithProductConfig(q,e),u.VastUtils.isVastCampaign(e)&&Sn(e),Ke(a,e.inventoryId),An(null),pe(),X.removeIframe(nn(a)),y.viewType===g.viewTypes.externalView?f.removeAdUnitFromExternal(e):f.removeAdUnit(e)},Sn=function(e){Ln()||(e&&e.cid?f.blacklistService.addToBlacklistedCampaigns(q.productType,q.demandGroupName,e.cid):f.log("DemandSource | cannot add to blacklist with no ad",f.LogLevels.error))},yn=function(){var e={errMsg:"",didSucceed:!0};return u.Utils.isDefined(y.allowMultiInitCalls)&&!y.allowMultiInitCalls?(e.errMsg=c.errors.init.multi,e.didSucceed=!1):z.allowExternalCallToApi()?a.shouldFail(f.getConfig())&&(e.errMsg=c.errors.init.deviceOsIsNotSupported,e.didSucceed=!1):(e.errMsg="Already attempting to initiate",e.didSucceed=!1),e},Cn=function(){D&&clearTimeout(D)},An=function(e){I=e},Dn=function(){return I},In=function(e,n){var t=m.getBackfillOffer(n);t&&e==t.id&&(w=!1)},wn=function(){w=!0},Ln=function(){return!0===w},Pn=function(){An(null),pe(),Y.reset(),b.reset()},Tn=function(){m.reset(),z.publish("InitiatedTimeoutAttempt",[_.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!1})]),Pn()},On=function(){var e=!1;if(q.productType===g.BN&&m){var n=m.getActiveInventoryId();n&&(e=m.isNextOfferAvailable(n))}return e},Fn=function(){var e=m.getActiveInventoryId();if(e){var n=He(e);m.removeOfferById(n.id,e),Ve(e)}};function Un(i,a,r){var e=function(e){if(!o){s=0,z.publish("InitiatedTimeoutAttempt",[_.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!1})]),e=e||c.errors.init[1002],g.BN===c.productType&&(H.trackEvent(S.getInventoryFailed,{generalMessage:e}),re.resetExternalAdViewsIdentifiers());try{if("string"==typeof e){var n=parseInt(e);1001<n&&n<1006&&(e=c.errors.load.invalid)}}catch(e){}var t=_.extendCallbackParamsWithDemandConfig(q,{errMsg:e});f.callSDKFunction(r,t),u.PubSub.publish(c.productType+".failedToLoad",[t]),At()&&Pe()}};if(Pn(),On())Fn();else{var o=!1;(T.push(setTimeout(function(){e(c.errors.load.timeout),o=!0},7*c.timeUnit)),(new v.Deferred).resolve()).then(Cn).then(ot).then(fn).always(vn).then(function(e){o||(s=0,z.publish("InitiatedTimeoutAttempt",[_.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!1})]),te=!1,f.callSDKFunction(a,_.extendCallbackParamsWithDemandConfig(q,e)))},function(e){var n=new v.Deferred,t=G.doesAllowConsecutiveGatewayRequestsDuringLoad();return o||(e===c.errors.load.timeout&&t&&s<c.maxNumOfAttemptsToCallAPI?(z.publish("InitiatedTimeoutAttempt",[_.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!0})]),setTimeout(function(){Un(i,a,r)},c.timerLengths.initAttemptsDelay),n.resolve()):n.reject(e)),n.promise()}).then(null,e)}}function xn(){W={productType:c.productType,adunitRetryAttempts:y.adunitRetryAttempts,adunitRetryInterval:y.adunitRetryInterval}}function Nn(e,n,i){if(e&&e.adm&&e.demandSourceName===d){f.log("loadAdWithAdm | resetting last response to none",f.LogLevels.verbose),f.unloadFramesByProduct(q),Pn();(z.publish("InitiatedAPICall",[_.extendCallbackParamsWithProductConfig(q,{duringInit:!0})]),u.Utils.returnResolvedPromise(e.adm)).then(gn).then(pn,function(e){var n;switch(n=c.errors.init[1005],typeof e){case"object":e.responseText&&""!==e.responseText?n=e.responseText:e.errorMessage&&""!==e.errorMessage&&(n=e.errorMessage);break;case"string":""!==e&&(n=e)}return Ee(),u.Utils.returnRejectedPromise(n)}).then(function(e){f.callSDKFunction(n,_.extendCallbackParamsWithDemandConfig(q,e))},function(e){try{if("string"==typeof e){var n=parseInt(e);1001<n&&n<1006&&(e=c.errors.load.invalid)}}catch(e){}var t=_.extendCallbackParamsWithDemandConfig(q,{errMsg:e});f.callSDKFunction(i,t),u.PubSub.publish(c.productType+".failedToLoad",[t]),At()&&Pe()})}}function Mn(e){return!(e.singleInventoryPerSession&&!0===e.singleInventoryPerSession)}function kn(){return!lt()}function Bn(){return y.purgeAdunitLibsFile}function En(){F.isVersionedAdunit=!0,f.adUnitGlobals.isUsingAdunitGraphicAssetsCacheFolder()&&(F.isUsingAdunitGraphicAssetsCacheFolder=!0)}function Vn(e){for(var n=0;n<e.length;n++){var t=e[n].ext.layoutData;if(u.Utils.isDefined(t)&&u.Utils.isDefined(t.html)&&0<t.html.length)return!0}return!1}function Rn(e){for(var n=!1,t=0;t<e.length;t++)if(f.AdUtils.isPlayablePrecachedAd(e[t])){n=!0;break}return n}function Kn(e,n){for(var t=0;t<e.length;t++)f.AdUtils.isPlayablePrecachedAd(e[t])&&(e[t].ext.ableToCache="success"===n)}function jn(e){var n=y.numOfBannersToCache,t=qe(e).slice(0,n),i=!0;return v.each(t,function(e,n){return!f.AdUtils.isCacheableAd(n)||Fe(n)||ne.isAdInCache(f.AdUtils.getAdId(n))||ne.getAdStatusInQueue(f.AdUtils.getAdId(n))===ne.cachingStatus.pending||(i=!1),i}),i}function Wn(e){ne.isPrecache()&&!jn(e.inventoryId)?ne.updateCache():L&&u.VastUtils.isVastCanPlayAgain(e)&&ne.cacheSingleAd(f.AdUtils.formatVastAdForPrecache(e,xe.bind(null,e)))}function Gn(e,n){if(f.log("engageEnd",f.LogLevels.verbose),_.shouldReceiveMessage(q,e))if(e.productType!==g.BN){Jn(e);var t=Hn(ct());qn(z)?e.engaged?t.handlePrefetchFailedOnVisible(e):t.handlePrefetchFailedOnBackground(e):e.engaged?t.handleAdClosed(e):t.handlePrefetchFailedOnBackground(e),(u.Utils.isFunction(n)?n:function(){})()}else Ze(e)}function qn(e){f.log("getAndResetErrorStateFromTaskManager",f.LogLevels.verbose);var n=e.getStatus().adErrorState;return e.publish("AdErrorState",[_.extendCallbackParamsWithProductConfig(q,{error:!1})]),n}function Jn(e){f.log("_resetPreloadedAd",f.LogLevels.verbose),Ye(e),H.resetBaseData(g.baseDataKeys),b.setCanPreloadFlag(!0)}function Hn(e){return e?Qn:_n}var Qn={handleCappingOnAdClosed:function(e){f.log("_handleCappingOnAdClosed | ManuelLoad",f.LogLevels.verbose),this.publishNoMoreOffers(g.noMoreOffersReason.noMoreOffersToShowInFeed),Pe(e)},handlePrefetchFailedOnBackground:function(e){f.log("_backgroundPrefetchFailed | ManualLoad",f.LogLevels.verbose),l.getNextAd(!1,e.inventoryId,!0)?Wn(e):this.publishNoMoreOffers(g.noMoreOffersReason.noMoreOffersToShowInFeed)},handlePrefetchFailedOnVisible:function(e){f.log("handlePrefetchFailedOnVisible | manuel load",f.LogLevels.verbose),Wn(e)},handleAdClosed:function(e){if(f.log("handleAdClosed | manuel load",f.LogLevels.verbose),Ct())this.handleCappingOnAdClosed(e);else{if(lt())return f.log("handleAdClosed | manuel load | isInAppBiddingInstance=true"),void m.removeInventory(e.inventoryId);if(c.overrideFeedSettings.shouldFetchNewFeedOnAdClose)return m.removeInventory(e.inventoryId),void Se();f.log("handleAdClosed | manuel load | Do not perform internal load."),Pn(),m.reset(),u.PubSub.publish(c.productType+".resetStateManager",[q])}},publishNoMoreOffers:function(e){f.log("publishNoMoreOffers | ManualLoad",f.LogLevels.verbose);var n=_.extendCallbackParamsWithDemandConfig(q,{errorMsg:e||g.noMoreOffersReason.noMoreOffersToShowInFeed});u.PubSub.publish(c.productType+".NoMoreOffers",[n])}},_n={handleCappingOnAdClosed:function(e){f.log("_handleCappingOnAdClosed | AutomaticLoad",f.LogLevels.verbose),Y.instanceReachCapping(g.noMoreOffersReason.noMoreOffersToShowInFeed,Pe.bind(null,e))},handlePrefetchFailedOnBackground:function(e){f.log("_backgroundPrefetchFailed | AutomaticLoad",f.LogLevels.verbose),l.getNextAd(!1,e.inventoryId,!0)?this.bringNextAdFromExistingFeed(e):Mn(y)?this.bringNextAdFromNewFeed():this.endSessionOnInstance(e)},handlePrefetchFailedOnVisible:function(e){f.log("handlePrefetchFailedOnVisible | automatic load",f.LogLevels.verbose),Wn(e)},handleAdClosed:function(e){(f.log("handleAdClosed | automatic load",f.LogLevels.verbose),Ct())?this.handleCappingOnAdClosed(e):l.getNextAd(!0,e.inventoryId,!0)?vt()&&Mn(y)?(m.removeInventory(e.inventoryId),this.bringNextAdFromNewFeed(vt())):this.bringNextAdFromExistingFeed(e):Mn(y)?(m.removeInventory(e.inventoryId),this.bringNextAdFromNewFeed()):this.endSessionOnInstance(e)},bringNextAdFromNewFeed:function(e){f.log("bringNextAdFromNewFeed | AutomaticLoad",f.LogLevels.verbose),pt(!1);var n=e?g.noMoreOffersReason.refreshFeedAfterClosingAd:g.noMoreOffersReason.noMoreOffersToShowInFeed;Se(n)},bringNextAdFromExistingFeed:function(e){f.log("bringNextAdFromExistingFeed | AutomaticLoad",f.LogLevels.verbose),Wn(e),Y.adClosedMovingToNextAd(u.VastUtils.areAllCampaignTypesAreVast(qe(e.inventoryId)),g.noMoreOffersReason.noMoreOffersToShowInFeed)},endSessionOnInstance:function(e){f.log("endSessionOnInstance | AutomaticLoad",f.LogLevels.verbose),Y.sessionOver(g.noMoreOffersReason.noMoreOffersToShowInFeed,Pe.bind(null,e))}};function zn(e){if(_.shouldReceiveMessage(q,e)){var n=f.AdUtils.getAdId(e),t=We(n,e.inventoryId);z.publish("Engaged",[_.extendCallbackParamsWithParentProductConfig({duringEngage:!0})]);t.displayMode;if(u.VastUtils.isVastCampaign(t)){var i=u.VastUtils.getVastViewCount(t);H.trackTimingStop(S.adVisible,{vastViewCount:u.VastUtils.getVastViewCountForEvent(i),eNameStart:S.showAdCalled}),u.VastUtils.isVastCanPlayAgain(t)||Ke(n,e.inventoryId)}else H.trackTimingStop(S.adVisible,{eNameStart:S.showAdCalled}),Ke(n,e.inventoryId);ie++,H.trackTimingStart(S.adVisibleToClose)}}function Xn(e,n,t){return new(wt("../../components/precacheManager.js"))(e,n,$n(t))}function $n(e){var n,t=q.productType+"_"+q.demandSourceName;return n=q.productType===g.IS?q.productType:g.BC,r.cacheBase=e?n:t,r.precachePath="../"+r.cacheBase+"/",v.extend(r,q),r}function Yn(e){return q[e]}function Zn(e,n){e&&e.demandSourceName===d&&ot().then(function(e){u.Utils.isFunction(n)&&n({payload:e,eventics:H})})}function et(e,n,t){if(f.log("in load ad with params: "+JSON.stringify(e),f.LogLevels.verbose),e&&e.demandSourceName===d){var i=yn();if(i.didSucceed)f.unloadFramesByProduct(q),f.log("resetting last response to none",f.LogLevels.verbose),Un(e,n,t);else{var a=ct()?S.loadAdFailed:S.initAdFail;H.trackEvent(a,{callFailReason:i.errMsg,demandSourceName:d}),f.callSDKFunction(t,_.extendCallbackParamsWithDemandConfig(q,{errMsg:i.errMsg}))}}else H.trackEvent(S.loadAdIgnored,{callFailReason:c.errors.general.dsNameNotValid})}function nt(e,n,t){var i=He(m.getActiveInventoryId());f.RingerSwitchService.isInitiated()&&i&&(f.RingerSwitchService.startListener(tt(i.ext)),f.log("Ringer | startListener from DS.",f.LogLevels.info)),f.isLegacy(f.featureMap.demandState)||dt(),l.preload(!0,m.getActiveInventoryId()).then(function(){return l.show(Dn())}).then(function(){at(n)},function(e){f.log("Cannot engage at this time "+z.getStatusMsg(),f.LogLevels.error),z.getStatus().isConnected||bn(),rt(t,e)})}function tt(e){return e?{ringerUpdateDelay:y.ringerUpdateDelay,shouldSetRingerUpdateDelay:f.AdUtils.isPlayableCampaign(e)||f.AdUtils.isMRAIDCampaign(e)||f.AdUtils.isExternalCampaign(e)}:{}}function it(){Y.instanceOnHold()}function at(e){H.trackTimingStop(S.showAdSuccess,{eNameStart:S.showAdCalled}),f.callSDKFunction(e,_.extendCallbackParamsWithDemandConfig(q)),J.onShowSuccess(q)}function rt(e,n){var t="Cannot engage offer at this time";u.PubSub.publish(c.productType+".failedToShow",[{errMsg:t}]);var i=n||t;i!==g.errors.showAdFailedReasons.preloadNoAd&&i!==g.errors.showAdFailedReasons.showNoAd&&(i=i+". "+z.getStatusMsg()),H.trackEvent(S.showAdFail,{callFailReason:i}),f.callSDKFunction(e,_.extendCallbackParamsWithDemandConfig(q,{errMsg:t}))}function ot(){return ee.createPayload(ie-1,te,s).then(function(e){return i=e})}function st(){return e&&e.integrationType}function ct(){return e&&e.integrationType===g.integrationType.manual}function lt(){return e&&e.isInAppBidding}function dt(){K=new v.Deferred;var n=u.PubSub.subscribe(R+".getDemandSourceStateSuccess",function(e){_.shouldReceiveMessage(q,e)&&(u.PubSub.unsubscribe(n),u.PubSub.unsubscribe(t),"resolved"!==K.state()&&(j=e&&e.state||j,K.resolve(e)))}),t=u.PubSub.subscribe(R+".getDemandSourceStateFail",function(e){_.shouldReceiveMessage(q,e)&&(u.PubSub.unsubscribe(t),u.PubSub.unsubscribe(n),"resolved"!==K.state()&&K.resolve())}),e=_.extendCallbackParamsWithParentProductConfig(q);f.callSDKFunction("getDemandSourceState",e,"getDemandSourceStateSuccess","getDemandSourceStateFail")}function ut(){return U&&U.confirmCloseMsg[g.confirmCloseMsgMap[0]]}function ft(e){var n=f.AdUtils.getAdId(e),t=r.precachePath+n+"/";u.AdAssets.updateAdunitPrecachePath(e,t,f.AdUtils.isPlayablePrecachedAd(e))}function gt(e,n,t){var i=!1;return e&&!n&&(f.AdUtils.isPlayablePrecachedAd(t)?u.AdAssets.isAdAbleToCache(t)&&(i=!0):u.VastUtils.isVastCampaign(t)&&!Fe(t)||(i=!0)),i}function pt(e){ae=e}function vt(){return ae}function mt(e,n,t){var i=c.timerLengths.loadAdTimeout;clearTimeout(P),P=setTimeout(function(){hn(e,n,t)},i)}function bt(e){!L&&u.VastUtils.isVastCampaign(e)&&(null!==B||u.Utils.isDefined(e.toRemove)&&e.toRemove||tn(e).then(null,ve.bind(null,e)))}function ht(e){var n=v.extend({name:"hybridCampaignStatusChange"},e);f.postAdUnitEvent(JSON.stringify(n),!0)}function St(e){ht({viewUniqueId:e.ext.viewUniqueId,status:e.ext.isHybridFlow?"success":"fail"}),f.HybridService.isHybridCampaign(e,y)&&null!==E&&"pending"===E.state()&&(E.resolve(),H.trackEvent(S.hybridFallback),f.HybridService.clearAppPage(e.ext.viewUniqueId),u.PubSub.publish("HybridService.closeHybridFlow",[{viewUniqueId:e.ext.viewUniqueId}]))}function yt(a,r,o,s){re.checkStatusOfAdView().then(function(e){var n=He(s);f.AdUtils.setViewType(a,n,g.viewTypes.externalView);var t=f.AdUtils.updateEventWithAdParams(a,n,{});H.updateBaseData(t),An(n),En(),o.shouldBuildAdUnitUrlForExternal=!0;var i=p.getAdunitUrl(!1,r,o);e.isExternalAdViewInitiated?(de(n),re.updateAdInAdView(i,n,r,a)):(mt(n,i,!1),re.createAdUrlInAdView(i,n,r,a)),f.addAdToLoadedCreatives(n)})}function Ct(){var e=j===g.demandSourceStates.cappedPerSession;return e&&u.Utils.isDefined(q)&&f.log("isDemandCapped | demandSource "+q.demandSourceName+" is capped"),e}function At(){return c.isExhaustInstanceAllowed&&q.demandType===g.demandSourceType.instance}function Dt(){lt()&&c&&(c.isExhaustInstanceAllowed=!1)}var It={name:d,init:function(){l=this,t||(Pn(),ne=Xn(u,f,_.isLegacy(q)),oe(),ne.init(),z.init(),f.initEventics(_.extendCallbackParamsWithParentProductConfig(q,{})),Dt(),t=!0)},isNextAvailable:function(e){if(ne.isPrecache()){var n=qe(e);return ne.isNextAvailable(n)||n&&n[0]&&!n[0].isCacheable}return m.isNextOfferAvailable(e)||u.VastUtils.isVastCanPlayAgain(He(e))},prepareAdToEngageEnd:function(e){return Fe(e)?ne.deleteCachedCampaign(f.AdUtils.getAdId(e)):u.Utils.returnResolvedPromise()},getNextAd:function(e,n,t){var i=l.isNextAvailable(n);return ne.isPrecache()&&!i&&(i=Qe(t||e,n)),!i&&Ln()&&(i=m.getBackfillOffer(n)),i},attemptToPreloadAd:function(e,n){var t=Ct();if(!t||e){var i=qe(n),a=He(n),r=on(u.VastUtils.isVastCampaign(a))||u.VastUtils.areAllCampaignTypesAreVast(i),o=ne.isPrecache();Y.preLoadNext(u.VastUtils.areAllCampaignTypesAreVast(i),ln.bind(null,n),u.VastUtils.isVastCampaign(a)),b.canPreloadCandidateAd(t,e,a,r,o)&&l.preloadAd(e,n)}else f.log("Skipping preload on capped demand",f.LogLevels.verbose)},preloadAd:function(e,n){l.preload(e,n).then(function(){e&&l.show(Dn())})},preload:function(e,n){var t,i=new v.Deferred;return z.canPreload()?(t=Dn()||He(n))||(t=Qe(e,n),_e(t,C.softprecache),t)?(v.extend(!0,t,q),f.isContainerLoaded(t)?i.resolve():f.MOATService.vastContainsMOATData(t)||f.MOATService.containsMOATData(t)?setTimeout(function(){l.preloadFlow(t,e,i)},0):l.preloadFlow(t,e,i),i.promise()):(f.log("Cannot preload with no offer",f.LogLevels.error),u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.preloadNoAd)):(f.log("Cannot preload at this time, "+z.getStatusMsg(),f.LogLevels.error),u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.taskManagerPreload))},preloadFlow:function(e,n,t){b.preloadAdFinished();var i=!1,a=ne.isPrecache(),r={preload:!n};e.displayMode==C.softprecache&&(i=!0),gt(a,i,e)&&ft(e),f.log("line[1019]: preload with "+JSON.stringify(e),f.LogLevels.verbose);var o=f.AdUtils.updateEventWithAdParams(y,e,{});H.updateBaseData(o),An(e),En();var s=i?p.getAdunitUrl(!1,q,F):p.getAdunitUrl(a,q,F);mt(e,s,n),v.extend(y,r),f.AdUtils.setViewType(y,e),!f.HybridService.isHybridCampaign(e,y)||null!==E||n||u.Utils.isDefined(e.toRemove)&&e.toRemove||an(e),h.shouldShowInStandAloneView(f.getConfig())&&f.AdUtils.extendSettingsWithStandaloneViewSupport(y),e=f.StoreKitService.updateAdWithStoreAppId(e,y),f.loadAdUnitUrl(e,s,q,y),bt(e),t.resolve()},show:function(e){return e?z.canEngage()?(mn(),St(e),f.displayAdUnitFrame(e),u.Utils.returnResolvedPromise()):u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.taskManagerEngage):u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.showNoAd)},getConfirmCloseMsg:ut,getDSEventics:le,adVisible:zn,engageEnd:Gn,initProduct:Zn,instanceOnHold:it,loadAd:et,updateEventicsWithAdData:be,showAd:nt,onShowAdFailed:rt,getProperty:Yn,getIntegrationType:st,isInAppBiddingInstance:lt,loadAdWithAdm:Nn,isDemandCapped:Ct,reset:Tn};return l=It,It}e.exports=t},{"../../components/CampaignsFilter.js":8,"../../components/VastService.js":43,"../../components/precacheManager.js":52,"../../patches/PatchIOSLoadAfterLoad.js":112,"../../patches/PublisherPatchEasybrain.js":114,"./../../components/MultipleInventories.js":26,"./../../components/sdkPluginType/SDKPluginTypeHandler.js":55,"./../RewardedVideo/availabilityManager.js":89,"./../RewardedVideo/availabilityReporter.js":90,"./../RewardedVideo/dsTaskManager.js":91,"./DemandEntityBuilder.js":69,"./FetchDemand/FetchDirect.js":72,"./FetchDemand/FetcherPatch.js":73,"./PayloadBuilder.js":74,"./PreloadAdManager":75}],77:[function(e,n,t){n.exports=function(e,n){var t,i=(e=e||{}).retriesLogic||{},a=e.Features||{},r=e.ProductName;return{initiated:!1,overrideFeedSettings:a,productType:r,errors:{init:{missingData:"Failed to get required parameters",multi:"Multiple Init calls not allowed",1001:"Trying to call API while during an un-finished process",1002:"1002",1003:"1003",1004:"Invalid API response",1005:"1005",deviceOsIsNotSupported:"Device OS is not Supported"},load:{noMoreOffers:"Failed to load "+r+" ad",duringLoad:"Load "+r+" is already in progress",duringShow:"Can not Load "+r+" when showing ad",timeout:"API request timeout",invalid:"Invalid API response",instanceExhausted:"Instance already exhausted",inStateVisibleOrInShowingProcess:"in state visible or inShowingProcess",inLoadingStateOrWaitingToLoad:"in state waitingToLoad or internalLoadingProcess",instanceOnHold:"Instance on Hold"},show:{isConnected:"no internet connection",duringEngage:"already engaged with an offer",notLoaded:"ad was not loaded, try to load before calling to show",duringLoad:r+" load is in progress",visible:r+" is already showing",instanceExhausted:"Can not show - Instance already exhausted"},vast:{noOffers:"empty"},general:{dsNotSet:"trying to call demandSource function, but demandSource object is not set",dsNameNotValid:"demand source name is not valid"}},displayMode:{nonprecache:"nonprecache",precache:"precache",softprecache:"softprecache"},libsCacheFiles:{dapi:"dapi",externalObfuscation:"externalObfuscation"},responseTypesWithReason:{none:0,ready:1,notReady:2},precacheConfig:{maxCachedCampaigns:10,nonPrecacheFallback:3e5,cacheBase:null,precachePath:null},timeUnit:6e4,timerLengths:{initAttemptsDelay:i.initAttemptsDelay||500,serverResponseTimeoutInMilis:i.serverResponseTimeoutInMilis,riDelay:12e4,loadAdTimeout:16e3},customDialog:4,filterDisableTypes:[],maxNumOfAttemptsToCallAPI:i.maxNumOfAttemptsToCallAPI||2,eventicsCategories:n,isExhaustInstanceAllowed:(t=a,void 0===t.isExhaustInstanceAllowed||t.isExhaustInstanceAllowed)}}},{}],78:[function(An,e,n){function t(c,l){"use strict";var t=An("../components/Constants.js"),d=An("./DemandSource/EventCategories.js")(t.IS),a,i=!1,r,e=l.MRAID,u=l.adUnitUrl,f,g="Interstitial",n="NativeCallback",o="TaskManager",s="PrecacheManager",p={videoIS:"videoInterstitial",imageIS:"imageInterstitial"},v=2,m={productType:g,maxCachedCampaigns:10,cacheBase:null,precachePath:null,nonPrecacheFallback:5*t.timeunit},b={productType:g},h={init:{missingData:"Failed to get required parameters",multi:"Multiple Init calls not allowed",invalid:"Invalid API response",timeout:"API request timeout"},load:{isConnected:"no internet connection",duringEngage:"already engaged with an offer",adState:{0:"not initiated yet",1:"not ready yet",5:"error loading ad"}},show:{isConnected:"no internet connection",duringEngage:"already engaged with an offer",available:"ad not available"}},S={1e3:"Ad not available",1001:"Not initiated yet",1002:"Multiple Init calls not allowed",1003:"Failed to get required parameters or they are invalid",1004:"Invalid API response",1005:"API request timeout",1006:"Already engaged with an offer",1007:"Not ready yet",1008:"Not ready",1009:"No internet connection",1010:"Failed to pre-load creative assets",1011:"Failed to load interstitial ad",1012:"Already engaged with another offer",1013:"Failed to init interstitial",1014:"Failed to load interstitial ad",1015:"Failed to show interstitial ad",1020:"Ad state error",1021:"Trying to call API while during an un-finished process",1022:"Failed on get inventory",1023:"No offers on prepare ad unit assets",1024:"Failed updating ad unit assets",1025:"No more offers",1026:"Cannot load at this time"},y={initISSuccess:null,initISFailure:null,loadISSuccess:null,loadISFailure:null,showISSuccess:null,showISFailure:null},C={none:0,ready:1,noOffers:2,noOffersRI:3},A={initial:0,notready:1,initiated:2,pending:3,loaded:4,error:5,opened:6},D=null,I=6e4,w={initAttemptsDelay:1e4,apiResponseTimeout:1e4,loader:5e3,riDelay:2*I,loadedState:30*I,p:5e3,np:12e3,buffer:2*I},L={},P="",T={},O={},F=!1,U=!1,x=!0,N=[],M=0,k=0,B="about:blank",E=A.initial,V=C.none,R,K=null,j=null,W=!1,G=!1,q,J=null,H=null,Q=null,_=null,z=null,X={seatbid:{}},$,Y,Z=1,ee=l.Cache,ne=l.adUnitGlobals,te=An("../components/CampaignsFilter.js")(c,l).factory(g),ie=(ae=!1,re=!1,oe=!1,se=!1,ce=!1,le=!0,{init:function(){ae||(c.PubSub.subscribe(o+".Engaged",function(e){c.Utils.isDefined(e.duringEngage)&&(c.Utils.isDefined(e.productType)&&e.productType!==g?oe=e.duringEngage:re=e.duringEngage),l.log("line[191]: IS engaged "+re+", other engaged: "+oe,l.LogLevels.verbose)}),c.PubSub.subscribe(o+".CacheUpdateStatus",function(e){c.Utils.isDefined(e.duringCacheUpdate)&&c.Utils.isDefined(e.productType)&&e.productType===g&&(se=e.duringCacheUpdate)}),c.PubSub.subscribe(o+".AdStatusChange",function(e){c.Utils.isDefined(e.state)&&c.Utils.isDefined(e.productType)&&e.productType===g&&(l.log("Ad state changed from "+E+" to "+e.state,l.LogLevels.verbose),E=e.state)}),c.PubSub.subscribe(n+".enterBackground",function(){ce=!0}),c.PubSub.subscribe(n+".enterForeground",function(){ce=!1}),c.PubSub.subscribe(n+".viewableChange",function(e){}),c.PubSub.subscribe(n+".deviceStatusChanged",function(e){c.Utils.isDefined(e.connectionType)&&(le="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),ae=!0)},canLoad:function(){return(E===A.error||E===A.initiated)&&!re&&le},canEngage:function(){return!re&&!l.getCurrentDisplayedAd()&&le},canForceEngage:function(){return!re&&!l.getCurrentDisplayedAd()&&le},canInitCallToApi:function(){return W?!se&&le:!(re&&l.getCurrentDisplayedAdType()===g)&&!ce&&!se&&le},setConnection:function(e){le=e},getStatusMsg:function(){return"duringEngage:"+re+" duringCacheUpdate:"+se+" appInBackground:"+ce+" isConnected:"+le+" ad state:"+E},getStatus:function(){return{duringEngage:re,duringCacheUpdate:se,appInBackground:ce,isConnected:le,adState:E}},publish:function(e,n){return c.PubSub.publish(o+"."+e,n)},subscribe:function(e,n){return c.PubSub.subscribe(o+"."+e,n)},unsubscribe:function(e){return c.PubSub.unsubscribe(e)}}),ae,re,oe,se,ce,le,de=function(e){l.log("on creative opened",3),Y.trackTimingStart(d.adVisibleToClose),Y.trackEvent(d.adVisible),ie.publish("AdStatusChange",[{state:A.opened,productType:g}]),U=!0,Ge(e),qe(e)},ue=function(){var e=We();return e&&(l.log("pre load on get config is: "+O.preload,3),e.settings=e.settings||{},e.settings.preload=O.preload),e},fe=function(e){var n,t=l.getApiData({scdn:1,protocol:0,defaultProtocol:1}),i=l.decideUrlProtocolAccordingToHTTPSCompliance(),a=t.scdn;return n="prod"!==l.getEnv()?l.api()+"/users/staging/"+SuperSonicGlobalConfig.mobileSDKSettings.env:i+"//"+a,r.extend(!0,e,{settings:{protocol:i,urltocdn:n,precache:f.isPrecache()}})};function ge(e,n,t){var i=on();return y.initISSuccess=n,y.initISFailure=t,l.initEventics(b),Y.trackEvent(d.initAd),i.allowed?E===A.pending||E===A.loaded?(en(),void c.PubSub.publish(g+".CacheReady",[{productType:g,numOfAdUnits:N.length}])):(V=C.none,l.log("IS - resetting last response to none",l.LogLevels.verbose),void a.initInterstitial(e).then(en,Ye)):(Ze(),void Ye(i.errMsg))}function pe(e,n,t){y.loadISSuccess=n,y.loadISFailure=t,a.loadInterstitial(e).then(tn,nn)}function ve(e,n,t){be(e,n,t)}var me=function(){c.PubSub.subscribe(s+".cacheUpdatedCallback",function(e){if(!e||e.productType===g){l.log("IS |  cacheUpdatedCallback "+JSON.stringify(e),l.LogLevels.verbose);var n=N.length,t=f.getCacheSizeByType(g),i=O.numOfBannersToInitSuccess<=n?O.numOfBannersToInitSuccess:n,a=f.areCampaignsAvailable(N,i);0===t?Ue("Cache updated with zero campaigns"):F&&a&&Ne()}}),c.PubSub.subscribe(s+".campaignSavedCallback",function(e){if(!e||e.productType===g){l.log("IS campaignSavedCallback "+JSON.stringify(e),l.LogLevels.verbose);var n,t=-1,i={};c.Utils.isDefined(e.id)&&(n=je(e.id),t=c.Utils.isDefined(n.inventoryIndex)?n.inventoryIndex:-1,i=l.AdUtils.updateEventWithAdParams(O,n,{})),r.extend(i,{eNameStart:{name:d.campaignSavedCache.name+""},inventoryIndex:t}),Y.trackTimingStop(d.campaignSavedCache,i)}}),c.PubSub.subscribe(s+".campaignDownloadStartedCallback",function(e){if(!e||e.productType===g){var n=r.extend({},d.campaignSavedCache);n.name=n.name+(e.id||""),Y.trackTimingStart(n)}}),c.PubSub.subscribe(s+".campaignDeletedCallback",function(e){if(!e||e.productType===g){var n={};if(c.Utils.isDefined(e.id)){var t=je(e.id);n=l.AdUtils.updateEventWithAdParams(O,t,{})}l.log("IS campaignDeletedCallback "+JSON.stringify(e),l.LogLevels.verbose),Y.trackEvent(d.campaignDeletedCache,n)}}),c.PubSub.subscribe(s+".cacheAdsSuccessCallback",function(e){e&&e.productType!==g||l.log("IS cacheAdsSuccessCallback "+JSON.stringify(e),l.LogLevels.verbose)}),c.PubSub.subscribe(s+".cacheAdsFailedCallback",function(e){if(!e||e.productType===g){l.log("IS cacheAdsFailedCallback "+JSON.stringify(e),l.LogLevels.verbose);for(var n=e.deletedOffers.length,t=e.deletedOffers,i=0;i<n;i++){var a=je(t[i]),r=l.AdUtils.updateEventWithAdParams(O,a,{});Y.trackEvent(d.campaignFailedToCache,r),qe(t[i])}var o=N.length,s=O.numOfBannersToInitSuccess<=o?O.numOfBannersToInitSuccess:o,c=f.areCampaignsAvailable(N,s);F&&c?Ne():Ue(e.errorLog)}}),c.PubSub.subscribe("SDKController.AdVideoEnded",function(e){e.productType===g&&l.log("Got AdVideoEnded in IS",l.LogLevels.info)}),c.PubSub.subscribe("SDKController.engageEnd",function(e,n){e.productType===g&&(Xe(),c.Utils.isFunction(n)&&n.call())}),c.PubSub.subscribe(g+".GetConfig",function(e){if(e.productType===g){var n=ue();n&&fe(n),e.callback&&e.callback.call(null,n),clearTimeout(q),E!==A.error&&c.Utils.isDefined(e.errMsg)&&Qe(e)}}),c.PubSub.subscribe("SDKController.AdLoaded",function(e){e.productType===g&&E!==A.error&&E!==A.loaded?He(e):l.log("Controller | IS | try to load when error or already loaded. adState: "+E,l.LogLevels.info)}),c.PubSub.subscribe("SDKController.AdError",function(e){e.productType===g&&(clearTimeout(q),c.Utils.isDefined(e.errMsg)&&Qe(e))}),c.PubSub.subscribe("SDKController.AdPlaying",function(e){}),c.PubSub.subscribe("SDKController.AdPaused",function(e){}),c.PubSub.subscribe("SDKController.AdStarted",function(e){e.productType===g&&l.log("Got AdStarted in IS",l.LogLevels.info)}),c.PubSub.subscribe("SDKController.AdClicked",function(e){e.productType===g&&l.callSDKFunction("adClicked",{productType:g})}),c.PubSub.subscribe("SDKController.AdVisible",function(e){he(e)}),c.PubSub.subscribe("SDKController.onAdWindowsClosed",function(e){e.productType!==g&&E===A.error&&Je()}),ie.subscribe("AdStatusChange",function(e){e.productType===g&&$e(e)}),c.PubSub.subscribe("SDKController.Analytics",function(e){if(e.productType===g&&e&&e.action){var n=e.action,t=e.eventParam;"fireEvent"===n?Y.trackEvent(t.eName,t.label,t.data):"startTiming"===n?Y.trackTimingStart(t.eName,t.data):"stopTiming"===n?Y.trackTimingStop(t.eName,t.data):"setCustomData"===n&&Y.updateBaseData(t.data)}}),c.PubSub.subscribe(n+".initInterstitial",function(e,n,t){}),c.PubSub.subscribe(n+".loadInterstitial",function(e,n,t){}),c.PubSub.subscribe(n+".showInterstitial",function(e,n,t){}),c.PubSub.subscribe(n+".forceShowInterstitial",function(e,n,t){be(e,n,t)}),c.PubSub.subscribe(g+".ActionClick",function(e){l.OpenURLService.open(e)||l.log(g+" failed to perform ActionClick",l.LogLevels.info)})};function be(e,n,t){y.showISSuccess=n,y.showISFailure=t,a.showInterstitial(e).then(rn,an)}var he=function(e){e.productType!==g?(ie.publish("Engaged",[{duringEngage:!0,productType:e.productType}]),E!==A.pending&&E!==A.loaded||l.log("line[456]: IS on engage with another offer",l.LogLevels.verbose)):(E===A.loaded&&(e?(l.log("creative open from ad visible",l.LogLevels.verbose),de(e.crid)):l.log("opened with no current ad",l.LogLevels.error)),Z++)},Se=function(e){var n="Cannot load Interstitial ad: ";return e.isConnected||(n+=h.load.isConnected),e.duringEngage?n+=h.load.duringEngage:c.Utils.isDefined(h.load.adState[e.adState])&&(n+=h.load.adState[e.adState]),n},ye=function(e){var n="Cannot engage interstitial ad: ";return D||(n+=h.show.available),e.isConnected||(n+=h.show.isConnected),e.duringEngage?n+=h.show.duringEngage:l.getCurrentDisplayedAd()&&(n+=S[1012]),n},Ce=function(){var e=ie.canInitCallToApi();return l.log("can init again?"+e+ie.getStatusMsg(),l.LogLevels.info),e?(Ue(),Ae(O.refreshInterval),l.log("Resetting last response to no offers RI",l.LogLevels.verbose),V=C.noOffersRI,a.initInterstitial()):j=setTimeout(function(){Ce()},w.riDelay),e},Ae=function(e){l.log("setting refresh interval to: "+e,l.LogLevels.info),K&&clearInterval(K),0!==e&&(K=setInterval(function(){Ce()||clearInterval(K)},e*I))},De=function(e){var n=e.ext||{};r.extend(n,l.getApplicationExternalConfig().getABTestConfiguration("Interstitial",n.landingId)),K&&clearInterval(K),c.Utils.isDefined(n.refreshinterval)&&0!==n.refreshinterval&&Ae(n.refreshinterval),n.numOfBannersToCache=1,n.numOfBannersToInitSuccess=1,O=n},Ie=function(e){return!H||"pending"!==H.state()&&"resolved"!==H.state()?H=f.decidePrecacheStatus(e).then(function(){return F=!1,0<e.numOfCampaigns?ne.updateAdUnitGlobals(f.isPrecache()):(N=[],c.Utils.returnRejectedPromise("We did not receive any campaigns in inventory",1023))}).then(f.handleCacheClear).then(function(){return F=!0,c.Utils.returnResolvedPromise()},function(e){return xe(),c.Utils.returnRejectedPromise(e,1024)}):H},we=function(e,n){var t,i=[];for(t=0;t<e.length;t++)f.isAdInCache(l.AdUtils.getAdId(n[t]))||i.push(n[t]);return i},Le=function(e){var n={};return n.id=l.AdUtils.getAdId(e),n.bannerID=l.AdUtils.getBannerId(e),n.creativeId=l.AdUtils.getCreativeId(e),n.title="",n.staticContent=c.AdAssets.extractStaticFiles(e),n.lastUpdateTime=c.Utils.isDefined(e.lastUpdateTime)?e.lastUpdateTime:0,n},Pe=function(e){var n=[];return r.each(e,function(){n.push(Le(this))}),n},Te=function(e){r.each(e,function(e,n){n.inventoryIndex=e,f.isPrecache()&&f.setAdInventoryIndex(l.AdUtils.getAdId(n),e)})},Oe=function(e){var t=[];return r.each(e,function(e,n){n.ext&&n.ext.appData&&n.ext.appData.adAssets&&(n.ext.appData.appImages=n.ext.appData.adAssets,delete n.ext.appData.adAssets),t.push(n)}),t},Fe=function(t){var i,e,a=f.isPrecache(),r=t.length;t=Oe(t),Te(t),i=Pe(t);var n=function(){if(0!==r)if(N=t.slice(0),a){if(f.areCampaignsAvailable(i,O.numOfBannersToInitSuccess))return Y.trackEvent(d.campaignsAvailableFromCache),void Ne();var e=we(t,i),n={cacheTimeoutSuccessCallback:function(){Fe(t)},cacheTimeoutFailCallback:Ue,applicationUserId:T.applicationUserId,applicationKey:T.applicationKey,newAdsToEnterCache:e};f.handleCacheAds(n)}else Ne();else Ue()};a&&(e=f.mergeCampaigns(i),l.log("IS | updateCurrentAds after merge "+JSON.stringify(e),l.LogLevels.verbose)),!a||O.purgeCacheOnInit?(l.log("already purged cache so go strait to adding the new ads",l.LogLevels.verbose),n()):f.clearCacheByType(e).always(n)},Ue=function(){ie.publish("AdStatusChange",[{state:A.notready,productType:g}]),_&&_.reject("load Intertitial failed",1025),Me(!1)};function xe(){E!==A.initial&&ie.publish("AdStatusChange",[{state:A.error,productType:g}]),Me(!1)}var Ne=function(){(V===C.none||V===C.noOffers||V===C.noOffersRI||W)&&(ie.publish("AdStatusChange",[{state:A.initiated,productType:g}]),W||(c.PubSub.publish(g+".CacheReady",[{productType:g,numOfAdUnits:N.length}]),V=C.ready),G?a.loadInterstitial():pn())},Me=function(e){"boolean"==typeof e?D!==e&&(D=e,l.log("available: "+e,l.LogLevels.verbose),l.callSDKFunction("interstitialAvailability",{available:e})):l.log("IS available param is not a boolean",l.LogLevels.error)},ke=function(e){var n=null;return c.Utils.isDefined(e)&&(c.Utils.isDefined(e.applicationUserId)&&""!==e.applicationUserId?n=e.applicationUserId:c.Utils.isDefined(e["deviceIds[IFA]"])&&""!==e["deviceIds[IFA]"]?n=e["deviceIds[IFA]"]:c.Utils.isDefined(e["deviceIds[IDFV]"])&&""!==e["deviceIds[IDFV]"]?n=e["deviceIds[IDFV]"]:c.Utils.isDefined(e["deviceIds[AID]"])&&""!==e["deviceIds[AID]"]&&(n=e["deviceIds[AID]"])),n};function Be(){if(ie.canInitCallToApi())return c.Utils.returnResolvedPromise();var e="trying to call API while during an un-finished process";return l.log(e+ie.getStatusMsg(),l.LogLevels.error),c.Utils.returnRejectedPromise(e,1021)}function Ee(e){var n=new r.Deferred;return(T=e).impressionsCount=Z-1,l.shouldExtendApiDataWithDebugData()?l.extendApiDataWithDebugParams(T).then(function(e){n.resolve(e)}):n.resolve(T),n.promise()}function Ve(e,n){H=null,(J=e.seatbid.bid||e.seatbid[0]&&e.seatbid[0].bid)&&1<J.length&&(J=[J[0]]);var t=e.seatbid.ext||e.seatbid[0]&&e.seatbid[0].ext;if(Y.updateBaseData({landingId:t.landingId,strategyId:t.strategyId}),G){var i=Ie({numOfCampaigns:J.length,settings:O});return i.then(Fe.bind(null,J)),i}return c.Utils.returnResolvedPromise()}var Re=function(){var t=new r.Deferred;return k++,c.Utils.decodeValues(T),$.getInventory(T).then(function(e){t.resolve(e)},function(e){var n;e&&(n=e.errorMessage),n&&-1!==n.indexOf("timeout")&&k<3?setTimeout(function(){Re().then(function(e){t.resolve(e)},t.reject)},w.initAttemptsDelay):t.reject(n,1022)}).always(function(){ie.setConnection(!0)}),t.promise()},Ke=function(){k=0;var t=ke(T);return Re().then(function(e){De(e.seatbid.ext?e.seatbid:e.seatbid[0]);var n=e.seatbid.bid||e.seatbid[0].bid;return n&&1<n.length&&(n=[n[0]]),te.filterByAppInstalled(n,O).then(function(){return c.Utils.returnResolvedPromise(e,t)})}).then(Ve)},je=function(e){var n,t=null,i=N.length;for(n=0;n<i;n++)if(l.AdUtils.getAdId(N[n])==e){t=N[n];break}return t||l.log("Error in getCreativeById, id "+e+" not found in "+JSON.stringify(N),1),t},We=function(){return N&&0<N.length?r.extend(!0,N[M],l.getFormattedDeviceData()):null},Ge=function(){return!0},qe=function(e){var n,t=N.length;if(l.log("removing current creative",l.LogLevels.verbose),O.preload)for(n=0;n<t;n++)if(l.AdUtils.getAdId(N[n])==e){N.splice(n,1);break}Je()},Je=function(){l.log("self initiating call to API",l.LogLevels.verbose),Me(!1),a.initInterstitial(R,!0).then(null,function(e){return xe(),c.Utils.returnRejectedPromise(e)})},He=function(e){clearTimeout(q),c.Utils.isDefined(e.errMsg)?Qe(e):(ie.publish("AdStatusChange",[{state:A.loaded,productType:g}]),l.onAdLoaded(We()),c.Utils.isDefined(e.enableBackButton)&&l.setBackButtonState(e.enableBackButton))},Qe=function(e){var n="Ad loaded with error: "+e.errMsg;Y.trackEvent(d.adLoadedError,{generalMessage:e.errMsg}),ze(e,n)},_e=function(e){ze(e,"Timeout in loading ad")};function ze(e,n){var t=e.crid;ie.publish("AdStatusChange",[{state:A.error,errMsg:n,productType:g}]),l.log(n,l.LogLevels.error),Ge(t),qe(t),e.productType=g,l.removeAdUnit(e)}var Xe=function(){ie.publish("Engaged",[{duringEngage:!1,productType:g}]),Y.unsetParamFromBaseData("landingId"),G&&a.loadInterstitial()},$e=function(e){e&&e.state&&(e.state===A.error?(clearTimeout(q),h.load.adState[A.error]=e.errMsg,_&&_.reject(e.errMsg,1020),Me(!1)):e.state===A.loaded&&_&&_.resolve())};function Ye(e){e=e||S[1013],Y.trackEvent(d.initAdFail,{callFailReason:e}),l.callSDKFunction(y.initISFailure,{errMsg:e})}function Ze(){!l.isLegacy(l.featureMap.loadIS)&&l.isSupportedOsVersion(g)||(E=E.error)}function en(){x=!1,l.callSDKFunction(y.initISSuccess)}function nn(e){e=e||S[1014],l.callSDKFunction(y.loadISFailure,{errMsg:e})}function tn(){l.callSDKFunction(y.loadISSuccess)}function an(e){e=e||S[1015],Y.trackEvent(d.showAdFail,{callFailReason:e}),l.callSDKFunction(y.showISFailure,{errMsg:e})}function rn(){l.callSDKFunction(y.showISSuccess),Y.trackEvent(d.showAdSuccess)}function on(){var e={allowed:!0};return l.isLegacy(l.featureMap.loadIS)?(e.allowed=!1,e.errMsg="SDK version "+l.getApiData({SDKVersion:1}).SDKVersion+" is not supported"):l.isSupportedOsVersion(g)?x?l.isLimitedDeviceModel()&&(e.errMsg="Device is not supported",e.allowed=!1):(e.allowed=!1,e.errMsg=h.init.multi):(e.allowed=!1,e.errMsg="Operating system version "+l.getApiData({deviceOSVersion:1}).deviceOSVersion+" is not supported"),e}function sn(){return j&&(clearTimeout(j),j=null),c.Utils.returnResolvedPromise()}function cn(){return Be().then(l.getAPIRequiredData).then(Ee).then(Ke).then(function(){J&&0<J.length?ie.publish("AdStatusChange",[{state:A.initiated,productType:g}]):Ue()})}function ln(e,n){if(Q&&"pending"===Q.state())return Q;W=n;var t=l.getApplicationInfo(b,e).then(sn);return Q=t,(G||n)&&(Q=t.then(cn)),Q}function dn(e){var n=l.getApiData({deviceOs:1}).deviceOs;O.standaloneView=e.type===p.imageIS&&e.templateid==v&&n===t.deviceOs.ios,O.translucentView=e.type===p.imageIS&&e.templateid==v&&n===t.deviceOs.android}function un(){return E===A.initial&&!G&&Q&&"resolved"===Q.state()?cn():E===A.error?c.Utils.returnRejectedPromise(null,1020):c.Utils.returnResolvedPromise()}function fn(){return Y.trackEvent(d.loadIS),Y.trackTimingStart(d.loadAdToAdReady),Y.trackTimingStart(d.loadAdToShowAd),un().then(a.load).then(Me.bind(null,!0)).then(function(){Y.trackTimingStop(d.loadAdSuccess,{eNameStart:d.loadAdToAdReady})},function(e,n){n=n||"1014",Y.trackTimingStop(d.loadAdFailed,{eNameStart:d.loadAdToAdReady,callFailReason:S[n]}),c.Utils.returnRejectedPromise(e)}).always(function(){_=null})}function gn(){var e,n;return _&&"pending"===_.state()?_.promise():(_||(_=new r.Deferred),E===A.loaded||D?_.resolve():ie.canLoad()?(Q&&"rejected"===Q.state()&&Je(),r.when(Q).then(function(){return te.filterByAppInstalled(J,O).then(function(){return 0<J.length?c.Utils.returnResolvedPromise(J):(Ue(),c.Utils.returnRejectedPromise(Se(ie.getStatus()),1025))})}).then(function(){r.extend(O,{preload:!0}),ie.publish("AdStatusChange",[{state:A.pending,productType:g}])}).then(function(){return G?(pn(),c.Utils.returnResolvedPromise(J)):Ie({numOfCampaigns:J.length,settings:O}).then(function(){return Fe(J),c.Utils.returnResolvedPromise(J)})}.bind(null,J)).then(null,_.reject)):(n=ie.getStatus(),e=Se(n),l.log(e,l.LogLevels.error),G&&((E!==A.initial||Q&&"pending"===Q.state())&&E!==A.notready||(Y.trackEvent(d.initBeforeLoad),Je())),_.reject(e,1026)),_.promise())}function pn(){var e,n,t=f.isPrecache();if(e=We()){var i=je(l.AdUtils.getAdId(e)),a=l.AdUtils.updateEventWithAdParams(O,i,{});if(Y.updateBaseData(a),t){var r=l.AdUtils.getAdId(e),o=m.precachePath+r+"/";e=c.AdAssets.updateAdunitPrecachePath(e,o)}B=u.getAdunitUrl(t,b),dn(e.ext);var s=w.np;clearTimeout(q),q=setTimeout(function(){_e(e)},s),l.loadAdUnitUrl(e,B,b,O)}else n="No available creative in load attempt",l.log(n,l.LogLevels.error),ie.publish("AdStatusChange",[{state:A.notready,productType:g}]),_.reject(n)}function vn(){return a.show().always(function(){z=null})}function mn(){var e;if(z&&"pending"===z.state())return z.promise();if(z||(z=new r.Deferred),l.log(ie.getStatusMsg(),l.LogLevels.verbose),!ie.canEngage())return e=ye(ie.getStatus()),z.reject(e),z.promise();Y.trackTimingStop(d.showAd,{eNameStart:d.loadAdToShowAd});var n=We();ie.publish("Engaged",[{duringEngage:!0,productType:g}]);return l.loadAdUnitUrl(n,B,b,{preload:!1}),l.displayAdUnitFrame(n),z.resolve(),z.promise()}var bn=function(){var e=l.getProtocol();L={dev:e+t.gatewayDestinationMap.IS.production,stage:e+t.gatewayDestinationMap.IS.production,prod:e+t.gatewayDestinationMap.IS.production}},hn=function(e){return L[e]||L.prod};function Sn(){m.cacheBase=b.productType,m.precachePath="../"+m.cacheBase+"/",r.extend(m,b)}function yn(){return m}var Cn={init:function(){a=this,r=l.jQuery(),bn();var e=hn(l.getEnv());if(f=new(An("../components/precacheManager.js"))(c,l,yn()),$=new(An("../components/FetcherService.js"))(e,X,w.apiResponseTimeout),!i){N=[];var n={productChance:(l.getEnv(),1),baseData:{productType:g}};Y=c.Eventics.createEventic(n),Sn(),ie.init(),me(),f.init(),P=ne.getStaticGlobalsUrl(),G=l.isLegacy(l.featureMap.selfLoadingIS),i=!0}},getCurrentAd:function(){return r.extend(We(),{type:g})},isNextAvailable:function(){return!1},initInterstitial:ln,loadInterstitial:fn,showInterstitial:vn,load:gn,show:mn,initProduct:ge,loadProduct:pe,showProduct:ve,className:g};return Cn}e.exports=t},{"../components/CampaignsFilter.js":8,"../components/Constants.js":9,"../components/FetcherService.js":13,"../components/precacheManager.js":52,"./DemandSource/EventCategories.js":70}],79:[function(e,n,t){n.exports=function(e,n,t){var i=n.shouldFetchNewFeedOnAdCloseFlag(t.IS);return i=void 0===i||i,{NativeAPI:e.NativeAPI,ControllerCallbacks:e.ControllerCallbacks,AdUnitCallbacks:e.AdUnitCallbacks,ControllerNativeAPI:e.NativeAPI,retriesLogic:e.retriesLogic,DemandName:"InterstitialDS",ProductName:t.IS,Features:{allowMultiInitCalls:!0,reportOnAdunitReady:!0,shouldFetchNewFeedOnAdClose:i,preFetchAllVasts:!0,allowConsecutiveGatewayRequestsDuringLoad:!0,isExhaustInstanceAllowed:!0},gatewayDestinationMap:{prod:t.gatewayDestinationMap.IS.production},amountOfInventories:1}}},{}],80:[function(r,e,n){e.exports=function(t,i){var a=r("../components/Constants.js");return{create:function(){if(i.isLegacy(i.featureMap.MDS[a.RV]))return new(r("./Interstitial.js"))(t,i);var e=r("./AdapterSharedConfig.js"),n=r("./InterstitialDemandSource/AdConfiguration.js")(e,i.SupplyUtils,a);return new(r("./ProductAdapter.js"))(t,i,n,a)}}}},{"../components/Constants.js":9,"./AdapterSharedConfig.js":65,"./Interstitial.js":78,"./InterstitialDemandSource/AdConfiguration.js":79,"./ProductAdapter.js":82}],81:[function(Bn,e,n){function t(c,s){"use strict";var i=Bn("../components/Constants.js"),a,t=!1,n=10,r=6e4,l="https://guc-api.sonic-us.supersonicads.com/api/v1/guc.php?format=json",o="https://guc-api.sonic-us.supersonicads.com/api/v1/myOffers",d="openRTB",u=i.OW,f="TaskManager",g=i.CB,p=window.jQuery,e,v={},m,b={},h={},S={productType:u},y=i.confirmCloseMsgMap,C={missingData:"Failed to get required parameters",invalid:"Invalid API response",appInfo:"Failed to retrieve application info",timeout:"API request timeout",server:"Server error",engaged:"Already engaged with OfferWall product",adunitAssetsTimeout:"Timeout in loading ad unit static assets",closeBeforeVisible:"User closed before ad loaded",missingDeviceIds:"Missing deviceIds",preconditions:"Failed to initiated OW, preconditions did not pass"},A={adunit:"adunit",inventory:"inventory",inventoryInBackground:"inventoryInBackground",preConditions:"preConditions",close:"close"},D={v:1,controllerId:1,applicationKey:0,applicationUserId:0,debug:0,language:0,maxVideoLength:0,itemName:0,itemCount:0,timestamp:0,localTime:1,timezoneOffset:1,itemSignature:0,disableCache:0,showDeliveryLimitationsLog:0,disableSession:0,minimumOfferCommission:0,minimumOfferCommissionSignature:0,applicationUserGender:0,applicationUserAgeGroup:0,applicationUserCreationDate:0,applicationUserCreationDateSignature:0,demoCampaigns:0,appOrientation:1,mobileCarrier:0,connectionType:1,iphoneAppOnIpadDevice:0,deviceOs:1,SDKVersion:1,deviceOSVersion:1,deviceOEM:0,deviceVolume:0,immersiveMode:0,"deviceIds[OpenUDID]":0,"deviceIds[IFA]":0,"deviceIds[IDFV]":0,"deviceIds[SERIAL]":0,"deviceIds[AndroidID]":0,"deviceIds[IMEI]":0,"deviceIds[AID]":0,displaySizeWidth:0,displaySizeHeight:0,deviceWidthDP:0,deviceHeightDP:0,deviceScreenScale:0,deviceLanguage:0,deviceModel:0,diskFreeSize:1,country:0,pageSize:0,page:0,landingId:0,customParams:0,admin:0,useClientSideCallbacks:0,isLimitAdTrackingEnabled:0,SDKPluginType:0,bundleId:0,jb:0,gpi:0,allowArbitraryLoads:0,allowArbitraryLoadsInWebContent:0,mcc:0,mnc:0,appVersion:0,batteryLevel:0,androidIsVersion:0,cdnCn:0,sdkAbName:0,segmentId:0,segmentName:0,consent:0,moatSupported:0},I={settings:{},textData:{},offers:[]},w={SDKVersion:1},L={id:0,url:""},P={openAppStoreSheet:!0,preload:!1},T={osNotSupported:"Sorry, your operating system version is not supported.",dialogErrorMessage:"Sorry, we were unable to display the wall at the moment. Please try again later.",noOffers:"Sorry, we currently have no offers to display. Please try again later.",noInternet:"No internet connection. Please connect and try again."},O={showOWCalled:{name:"showOWCalled",id:16},showOWFail:{name:"showOWFail",id:17},owVisible:{name:"owVisible",id:18},inventoryGetToReceived:{name:"inventoryGetToReceived",id:-12},initControllerToShowOWCalled:{name:"initControllerToShowOWCalled",id:-13},showOWCalledToOwVisible:{name:"showOWCalledToOwVisible",id:-14},adVisibleToClose:{name:"adVisibleToClose",id:-5},initOW:{name:"initOW",id:13},initOWFail:{name:"initOWFail",id:14},initOWSuccess:{name:"initOWSuccess",id:127},staticAssetsLoaded:{name:"staticAssetsLoaded",id:126},dialogBoxExit:{name:"dialogBoxExit",id:155},dialogBoxResume:{name:"dialogBoxResume",id:156}},F={initOWSuccess:null,initOWFailure:null},U=0,x,N={},M,k,B,E,V,R=!1,K=!1,j=null,W=null,G=s.adUnitGlobals,q="#/?productType="+u+"&mode=msdkctrl",J=null,H=null,Q=null,_=null,z=null,X=!1,$=null,Y,Z={adUnitAssetsTimeout:6e4,pollAPITimeout:1e4},ee={offers:[],settings:{},textData:{noOffers:T.noOffers},ext:{emptyOWReason:"default empty OW reason"}},ne={precache:!1,getInventoryOnInit:!1,refreshInterval:0},te=Bn("../components/CampaignsFilter.js")(c,s).factory(u),ie,ae,re,oe=(se=!1,ce=!1,le=!1,de=!0,ue=!1,{init:function(){se||(c.PubSub.subscribe(f+".Engaged",function(e){c.Utils.isDefined(e.duringEngage)&&(ce=e.duringEngage)}),c.PubSub.subscribe(g+".enterBackground",function(){le=!0}),c.PubSub.subscribe(g+".enterForeground",function(e){le=!1,!me()||e&&c.Utils.isDefined(e.active)&&!e.active||(s.log("poll on CPI offer closed/external browser offer closed (iOS flow)",s.LogLevels.verbose),K=!1,De())}),c.PubSub.subscribe(g+".viewableChange",function(e){e&&c.Utils.isDefined(e.isViewable)&&(!ue||!e.isViewable||c.Utils.isDefined(e.webview)&&"main"!==e.webview||(ue=!1,s.postAdUnitEvent(JSON.stringify({name:"OfferClosed"}))),me()&&e.isViewable&&c.Utils.isDefined(e.webview)&&"main"===e.webview&&(s.log("poll on CPI offer closed/external browser offer closed (Android flow)",s.LogLevels.verbose),K=!1,De()))}),c.PubSub.subscribe(g+".deviceStatusChanged",function(e){c.Utils.isDefined(e.connectionType)&&(de="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),se=!0)},canEngage:function(){if(ce||!de)return!1;var e=s.getCurrentDisplayedAd();return!e||e.productType===i.BN},isConnected:function(){return de},setConnection:function(e){de=e},setAdOpened:function(e){ue=e},getStatusMsg:function(){return" duringEngage:"+ce+" appInBackground:"+le+" isConnected:"+de},getStatus:function(){return{duringEngage:ce,appInBackground:le,isConnected:de,isAdOpened:ue}},duringEngage:function(){return ce},publish:function(e,n){c.PubSub.publish(f+"."+e,n)},waitUntilAppInForeground:function(){var e=p.Deferred();return le?(s.log("Waiting for app to be in foreground",s.LogLevels.verbose),c.PubSub.subscribeOnce(g+".enterForeground",function(){e.resolve()})):e.resolve(),e.promise()},waitUntilConnected:function(){var n=p.Deferred();if(de)n.resolve();else{s.log("Waiting for internet connection",s.LogLevels.verbose);var t=c.PubSub.subscribe(g+".deviceStatusChanged",function(e){c.Utils.isDefined(e.connectionType)&&(de="none"!==e.connectionType&&"notReachable"!==e.connectionType)&&(c.PubSub.unsubscribe(t),n.resolve())})}return n.promise()}}),se,ce,le,de,ue,fe=function(){c.PubSub.subscribe(u+".ActionClick",function(e){s.OpenURLService.openForOW(e)||s.log(u+" failed to perform ActionClick",s.LogLevels.info)}),c.PubSub.subscribe("SDKController.AdClosed",function(e){if(e.productType===u){var n="ios"===s.getApiData({deviceOs:1}).deviceOs;oe.getStatus().isAdOpened&&n&&(s.postAdUnitEvent(JSON.stringify({name:"OfferClosed"})),oe.setAdOpened(!1),me()&&(s.log("poll on ad closed",s.LogLevels.verbose),De()))}}),c.PubSub.subscribe("SDKController.AdOpened",function(e){e.productType===u&&(oe.setAdOpened(!0),R&&Se(e.bannerId,!0))}),c.PubSub.subscribe("SDKController.engageEnd",function(e,n){e.productType===u&&(R&&(s.log("poll on engageEnd(OW closed)",s.LogLevels.verbose),De()),oe.publish("Engaged",[{duringEngage:!1,productType:u}]),ie.unsetParamFromBaseData("landingId"),c.Utils.isFunction(n)&&n.call(),X&&"pending"===H.state()&&Ee("User closed before visible"),J&&J.always(function(){J=null;Me(!0)}))}),c.PubSub.subscribe("SDKController.adLoaded",function(e){e.adType===u&&(s.log("received OW ad loaded event",s.LogLevels.verbose),s.onAdLoaded(L))}),c.PubSub.subscribe("SDKController.AdVisible",function(e){e.productType===u&&(s.log("line[324]: OW Ad Visible",s.LogLevels.verbose),ie.trackTimingStop(O.owVisible,{eNameStart:O.showOWCalledToOwVisible}),ie.trackTimingStart(O.adVisibleToClose))}),c.PubSub.subscribe("SDKController.Analytics",function(e){if(e.productType===u&&e&&e.action){var n=e.action,t=e.eventParam;"fireEvent"===n?ie.trackEvent(t.eName,t.label,t.data):"startTiming"===n?ie.trackTimingStart(t.eName,t.data):"stopTiming"===n?ie.trackTimingStop(t.eName,t.data):"setCustomData"===n?ie.updateBaseData(t.data):"unsetCustomData"===n&&(t&&t.data&&"bannerId"===t.data?ie.resetBaseData(i.baseDataKeys):ie.unsetParamFromBaseData(t.data))}}),c.PubSub.subscribe(g+".initOfferWall",function(e,n,t){s.log("OfferWall.js | CB.init called",s.LogLevels.verbose),s.getApplicationInfo(S).then(ve,function(e){s.callSDKFunction(t,{errMsg:e||C.appInfo})}).then(yn).then(function(){return s.callSDKFunction(n),c.Utils.returnResolvedPromise()},function(e){return s.callSDKFunction(t,{errMsg:e}),c.Utils.returnResolvedPromise()}).then(Ue).then(function(){R&&De()})}),c.PubSub.subscribe(g+".showOfferWall",function(e,n,t){e&&s.AppOrientationManager.updateAppOrientationByNewRestriction(e.orientationRestriction),a.showOfferWall().then(function(){s.callSDKFunction(n,{placementId:an()})},function(e){s.callSDKFunction(t,{errMsg:e})}).always(function(){wn(In())&&(J=null)})}),c.PubSub.subscribe(g+".getUserCredits",function(e,n,t){if(s.checkRequiredCallbackParams(["applicationKey","applicationUserId","productType"],e,"getOfferWallCredits",t).didSucceed&&e.productType===u){if(c.Utils.decodeValues(e),On(e)&&oe.duringEngage()){var i="Could not provide credits, user provided is different from current user";return s.callSDKFunction(t,{errMsg:i}),void s.log(i,s.LogLevels.error)}Ue(!0,e).then(function(){De(e,t)},function(e){s.log(e,s.LogLevels.error),s.callSDKFunction(t,{errMsg:"Failed to initiate client side callbacks"})})}}),c.PubSub.subscribe("SDKController.OWOfferClicked",function(e){s.getCurrentDisplayedAdType()===u&&be(e)}),c.PubSub.subscribe("SDKController.videoOfferClosed",function(){s.RingerSwitchService.isInitiated()&&(s.RingerSwitchService.stopListener(),s.log("Ringer | stop detecting ringer status changes from OW videoOfferClosed event.",s.LogLevels.info)),me()&&(K=!1,De())}),c.PubSub.subscribe("SDKController.dialogBoxResume",function(e){pe(e)&&ie.trackEvent(O.dialogBoxResume)}),c.PubSub.subscribe("SDKController.dialogBoxExit",function(e){pe(e)&&ie.trackEvent(O.dialogBoxExit)}),c.PubSub.subscribe(u+".GetCompletionOffers",function(e){if(c.Utils.isDefined(e.productType)){var n=qe();re.getInventory(n.data,o,"json").then(ge.bind(null,e),ge.bind(null,e))}})};function ge(e,n){re.isValidResponseStructure(n)&&(n=cn(n)),e&&e.callback&&e.callback.call(null,n)}function pe(e){return e&&e.productType===S.productType}function ve(){return s._getApplicationConfigurationFromServer().then(function(){return ne=p.extend(!0,ne,s.getOfferWallConfiguration()),c.Utils.returnResolvedPromise(ne)},function(e){return s.log(e,s.LogLevels.error),c.Utils.returnResolvedPromise(ne)})}function me(){return R&&K}function be(e){s.log("Marked offer clicked for CSC with type "+e.type,s.LogLevels.verbose),K=!0}function he(e){return x=e&&e.placementId||U,s.log("Updated placement to "+x,s.LogLevels.verbose),x}var Se=function(e,n){V&&"pending"===V.state()&&p.when(V).always(function(){Se(e,n)}),(N[e]=n)?M++:M--,p.when(E).always(function(){s.log("poll counter set to: "+M,s.LogLevels.verbose),V=s.setUserData(b.applicationKey,b.applicationUserId,{counter:M}),p.when(V).always(function(){V=null})})},ye=function(){var e=new p.Deferred,n={counter:0,timestamp:0};return p.when(E,V).always(function(){p.when(s.getUserData(W,j)).then(function(e){M=n.counter=c.Utils.isDefined(e.counter)?e.counter:0,k=n.timestamp=c.Utils.isDefined(e.timestamp)?e.timestamp:0}).always(function(){p.when(s.setUserData(W,j,n)).then(function(){s.log("initiation done with resolve",s.LogLevels.verbose),e.resolve()},function(){s.log("initiation done with reject",s.LogLevels.error),e.reject()})})}),e.promise()};function Ce(){if(!ae){ae=!0,s.initEventics(S);var e={owPageNumber:0,isPrecache:ne.precache};ie.updateBaseData(e)}}var Ae=function(e){var n,t;if(E){if("pending"===E.state())return E.promise()}else E=new p.Deferred;return n=c.PubSub.subscribe(g+".adCreditedSuccess",function(){k=e.timestamp,E.resolve(),s.clearHandlers([n,t])}),t=c.PubSub.subscribe(g+".adCreditedFailed",function(e){E.reject(e.errMsg),s.clearHandlers([n,t])}),p.when(V).always(function(){s.callSDKFunction("adCredited",e,"adCreditedSuccess","adCreditedFailed")}),E.promise()},De=function(n,t){var i={},a=[];if(s.log("In poll with counter "+M,s.LogLevels.verbose),!c.Utils.isDefined(n)&&M<=0||B&&"pending"===B.state())s.log("Exit poll, p:"+(B?B.state():null)+" a:"+(E?E.state():null),s.LogLevels.verbose);else{var e=s.getApiData(w),r=0;if(c.Utils.isDefined(e.errMsg)||!c.Utils.isDefined(W)||!c.Utils.isDefined(j))return s.log(e.errMsg,s.LogLevels.error),void(c.Utils.isDefined(n)&&c.Utils.isDefined(t)&&s.callSDKFunction(t,{errMsg:"Failed to make polling request, missing data"}));c.Utils.decodeValues(e);var o={aid:W,auid:j,SDKVersion:e.SDKVersion,timestamp:k};Je(o),B=p.ajax({url:l,data:o,timeout:Z.pollAPITimeout,type:"GET",dataType:"jsonp"}),p.when(B).then(function(e){if(s.log("Received poll data",s.LogLevels.verbose),!(c.Utils.isDefined(e.rewardsData)&&c.Utils.isDefined(e.sig)&&c.Utils.isDefined(e.rewardsSummary)))return s.log("Poll data error",s.LogLevels.error),void(c.Utils.isDefined(n)&&c.Utils.isDefined(t)&&s.callSDKFunction(t,{errMsg:"Failed to retrieve user completion data, data error"}));!c.Utils.isEmptyObject(e.rewardsData)||c.Utils.isDefined(n)?(s.log(r,s.LogLevels.verbose),i={productType:u,credits:e.rewardsFromTime,total:e.rewardsSummary,signature:e.sig,timestamp:e.latestCompletionTime,externalPoll:c.Utils.isDefined(n),totalCreditsFlag:0===k},p.when(E).always(function(){E=null,p.when(Ae(i)).then(function(){p.each(e.rewardsData,function(){this.b&&N[this.b]&&Se(this.b,!1),a.push(this.id),r+=this.r?this.r:0}),0<a.length&&p.ajax({url:e.callbackURL,type:"GET",dataType:"jsonp",data:{vt:a.join(","),applicationKey:W,applicationUserId:j},success:function(){s.log("successfully updated server on csc",s.LogLevels.verbose)},error:function(e){s.log("failed to update server on csc",s.LogLevels.error)}})}).always(function(){E=null})})):s.log("no new completions",s.LogLevels.verbose)},function(e){s.log("Error retrieve user completion data",s.LogLevels.verbose),c.Utils.isDefined(n)&&c.Utils.isDefined(t)&&s.callSDKFunction(t,{errMsg:"Failed to retrieve user completion data"})})}};function Ie(){return oe.canEngage()?c.Utils.returnResolvedPromise():oe.isConnected()?c.Utils.returnRejectedPromise(C.engaged):c.Utils.returnRejectedPromise(T.noInternet)}function we(){return"&isVersionedAdunit="+!0,"&isVersionedAdunit=true"}function Le(e){e&&(v=e)}function Pe(e){return e in v?v[e]:null}function Te(e,n){var t;return t=e?n:b=s.getApiData(D),c.Utils.returnResolvedPromise(t)}function Oe(e){return R=e&&("true"===e.useClientSideCallbacks||"boolean"==typeof e.useClientSideCallbacks&&e.useClientSideCallbacks),c.Utils.returnResolvedPromise(e)}function Fe(e){var n=On(e);return c.Utils.returnResolvedPromise(n,e)}function Ue(t,e){return Te(t,e).then(Oe).then(Fe).then(function(e,n){return e&&(R||t)?(s.log("Initiating CSC",s.LogLevels.verbose),Fn(n),ye()):c.Utils.returnResolvedPromise()})}function xe(){return Ie().then(s.getApplicationInfo.bind(s,S)).then(function(){return he(s.getApiData({placementId:1})),Ue()})}function Ne(){s.log("In Refresh Interval",s.LogLevels.verbose),oe.duringEngage()?s.log("Refresh Interval Popped, but during engage - ignore",s.LogLevels.verbose):oe.waitUntilAppInForeground().then(oe.waitUntilConnected).then(function(){s.log("Refresh Interval Popped, calling refreshOfferWall",s.LogLevels.verbose),s.unloadFramesByProduct(S),Me()})}function Me(e){Re(),oe.isConnected()&&(Ye(),ne.precache?mn():e&&!ne.getInventoryOnInit||Ve())}function ke(){$=setTimeout(function(){s.log("Adunit static assets timer popped",s.LogLevels.verbose),Ee(C.adunitAssetsTimeout)},Z.adUnitAssetsTimeout)}function Be(e){clearTimeout($),s.log("Resolve adunit static assets promise",s.LogLevels.verbose),H.resolve(e)}function Ee(e){clearTimeout($),s.log("Reject adunit static assets promise - "+JSON.stringify(e),s.LogLevels.verbose),H.reject.apply(H.reject,arguments)}function Ve(){var e=qe();e.errMsg||pn(e).always(Cn)}function Re(){_=z=Q=null}function Ke(){var e=c.PubSub.subscribe(u+".GetConfig",function(e){s.log("Received event OW getConfig",s.LogLevels.verbose),Be(e)});return function(){c.PubSub.unsubscribe(e)}}function je(){var e=c.PubSub.subscribe(f+".Engaged",function(e){e.productType===u&&(X=!0)});return function(){c.PubSub.unsubscribe(e)}}function We(){H=new p.Deferred,ie.trackTimingStart(O.staticAssetsLoaded);var e=Ke();return p.when(m?(s.log("Using cached adunit url: "+m,s.LogLevels.verbose),c.Utils.returnResolvedPromise({html:m})):G.getGlobalAssetsJSON()).then(function(e){if(m||(G.setAdunitVersion(e),m=G.getAdunitGlobalsHTML()),X)Ee("User closed before visible");else if("rejected"===Q.state())Ee("Finished when flow already failed");else{var n=G.getStaticGlobalsUrl()+m+q+we();setTimeout(function(){s.updateAdUnitUrl(L,n,S,{preload:!0,forceCreation:!0})},0),ke()}},Ee),H.promise().then(function(e){return ie.trackTimingStop(O.staticAssetsLoaded),e}).always(function(){e()})}function Ge(){var e={pass:!0,reason:"ok"};return oe.isConnected()?s.isSupportedOsVersion(u)?s.isLimitedDeviceModel()&&(e.reason="Device is not supported",e.pass=!1):(e.pass=!1,e.reason="Operating system version "+s.getConfigurationHelper().getDeviceOsVersion()+" is not supported"):(e.pass=!1,e.reason=T.noInternet),e}function qe(){var e={data:null,errMsg:null},n=s.getApiData(D);return c.Utils.isDefined(n.errMsg)?e.errMsg=n.errMsg:n==={}?e.errMsg=C.missingData:(n.format=d,Je(n),c.Utils.decodeValues(n),e.data=n,b=n),e}function Je(e){var n=s.getSDKDataByKey(i.abTests.abt);n&&n.hasOwnProperty(i.abtParamByProductType[u])&&0<n[i.abtParamByProductType[u]].length&&(e.abt=n[i.abtParamByProductType[u]])}function He(e){if(Q&&"pending"===Q.state()){var n={eNameStart:O.initOW,callFailReason:e.errMsg};e.errCode&&(n.errorCode=e.errCode),e.failFlow!=A.preConditions&&ie.trackTimingStop(O.initOWFail,n),s.log("Rejecting Init OW flow - "+e.errMsg,s.LogLevels.verbose),Q.reject(e)}}function Qe(e,n){return{failFlow:e,errMsg:n}}function _e(){return Qe(A.close,"User closed before visible",!0)}function ze(e,n,t){var i=Qe(e,n);return i.errCode=t||0,i}function Xe(){return J&&"pending"===J.state()}function $e(){return Q&&"pending"===Q.state()}function Ye(){Y&&(clearTimeout(Y),Y=null)}function Ze(){var e=s.getApiData({scdn:1,protocol:0,defaultProtocol:1}),n=s.decideUrlProtocolAccordingToHTTPSCompliance(),t=e.scdn;return{protocol:n,urltocdn:"prod"!==s.getEnv()?s.api()+"/users/staging/"+SuperSonicGlobalConfig.mobileSDKSettings.env:n+"//"+t,preload:ne.precache,isIphoneX:s.getPatchesIphoneXObj().isIphoneX()}}function en(e,n){ie.trackTimingStop(O.initOWSuccess,{eNameStart:O.initOW});var t=Xe(),i=e.offers&&0<e.offers.length;if(t||i)return T.confirmCloseMsg=e.textData.confirmCloseMsg,p.extend(e.settings,Ze(),s.getFormattedDeviceData()),tn(e),rn(e).then(function(e){nn(e),n.callback.call(null,e)});var a=Qe(A.inventoryInBackground,"Empty Inventory");return s.log("No inventory available while preloading in background - Remove iframe",s.LogLevels.verbose),s.unloadFramesByProduct(S),He(a),c.Utils.returnRejectedPromise(a)}function nn(e){var n={settings:{deviceId:s.getDeviceId(),appKey:s.getSDKDataByKey(i.requiredSDKDataKeys.applicationKey)}};return p.extend(!0,e,n)}function tn(e){if(e.settings.allowPopup)for(var n=e.offers,t=0;t<n.length;t++)if(3669653==n[t].campaignId){n[t].isPopup=!0;var i=s.decideUrlProtocolAccordingToHTTPSCompliance();return void(n[t].assets.banner=i+"//static.ssacdn.com/operations/1280x800_hs_image001_nb_en_32584/1280x800_hs_image001_nb_en.jpg")}}function an(){return x||U}function rn(e){var n=new p.Deferred;if(!e.settings.placementsFlow)return n.resolve(cn(e));if(Xe())n.resolve(ln(e));else{s.log("Waiting for show before resolving getConfig",s.LogLevels.verbose);var t=c.PubSub.subscribe(g+".showOfferWall",function(){c.PubSub.unsubscribe(t),s.getApplicationInfo(S).then(function(){he(s.getApiData({placementId:1})),n.resolve(ln(e))})})}return n.promise()}function on(e,n){if(!e)return!1;if(e.offers&&0<e.offers.length){var t=e.offers[0];return t.rewards&&t.rewards[n]}return!!e.settings.currency&&e.settings.currency[n]}function sn(e,n){if(!e.intermediateData||!e.intermediateData.text)return e;var t=e.currency||n,i=e.intermediateData.text.actionButton,a=e.intermediateData.text.instructionDescription,r=e.intermediateData.text.instructions,o={"{{rewardCount}}":e.rewards,"{{currencyName}}":t};if(0<i.length&&(e.intermediateData.text.actionButton=c.Utils.replacePlaceHolder(i,o)),0<a.length&&(e.intermediateData.text.instructionDescription=c.Utils.replacePlaceHolder(a,o)),0<r.length)for(var s=0;s<r.length;s++)r[s]=c.Utils.replacePlaceHolder(r[s],o);return e}function cn(e){for(var n=e.offers,t=0;t<n.length;t++)n[t]=sn(n[t],e.settings.currency);return e}function ln(e){var n=e.offers,t=an();on(e,t)||(t=he({placementId:U})),e.settings.placementId=t;for(var i=0;i<n.length;i++)n[i].textData=n[i].textData[t],n[i].rewards=n[i].rewards[t],n[i]=sn(n[i],e.settings.currency[t]);try{e.settings.currency=e.settings.currency[t],e.settings.doublePromotionData=e.settings.doublePromotionData[t],e.settings.linksData.contactSupport.label=e.settings.linksData.contactSupport.label[t],e.textData.header=e.textData.header[t]}catch(e){s.log("Failed to interpolate inventory response",s.LogLevels.error)}return e}function dn(e,t){t.failFlow!==A.close?(Xe()?t.failFlow===A.inventory&&e.then(function(e){var n=p.extend({},ee);n.ext.emptyOWReason=t.errMsg,nn(n),e.callback.call(null,n)}):(t.failFlow===A.inventory&&(t=Qe(A.inventoryInBackground,"Failed to get Inventory"),s.log("Inventory failed while preloading in background - Remove iframe",s.LogLevels.verbose)),s.unloadFramesByProduct(S)),He(t)):He(t)}function un(e){return s.log("Get Inventory",s.LogLevels.verbose),re.getInventory(e.data,s.getBaseServerUrl()).then(function(e){if(X){var n=_e();return c.Utils.returnRejectedPromise(n)}return e},function(e){return X?_e():ze(A.inventory,e.errorMessage,e.errorCode)}).then(function(e){return te.filterByAppInstalled(e.offers,e.settings).then(function(){return c.Utils.returnResolvedPromise(e)})})}function fn(){return s.log("Load Adunit",s.LogLevels.verbose),We().then(null,function(e){return X?_e():Qe(A.adunit,e)})}function gn(){if(s.log("OfferWall.js | _handlePreConditions",s.LogLevels.verbose),_&&"pending"===_.state())return s.log("OfferWall.js | _handlePreConditions already has deferred "+_.state(),s.LogLevels.verbose),_;var e;_=new p.Deferred,X=!1,Ce(),ie.trackEvent(O.initOW),ie.trackTimingStart(O.initOW),Ye();var n=!0,t=Ge();t.pass||(He(e=Qe(A.preConditions,t.reason)),n=!1);var i=qe();return i.errMsg&&(He(e=Qe(A.preConditions,i.errMsg)),n=!1),n?_.resolve(i):_.reject(e),_.promise()}function pn(e){return s.log("OfferWall.js | _getInventoryWithPromise",s.LogLevels.verbose),z&&"rejected"!==z.state()?(s.log("OfferWall.js | _getInventoryWithPromise already has deferred "+z.state(),s.LogLevels.verbose),z):z=un(e).then(function(e){e.settings=e.settings||{};var n=e.settings;return n.shouldStartMuted=s.AdUtils.isCampaignShouldStartMuted(s.getConfig().controllerConfig,i.OW),Le(p.extend(n,s.getApplicationExternalConfig().getABTestConfiguration("Offerwall",e.settings.templateId))),vn({feedSize:e.offers.length,landingId:e.settings.templateId,strategyId:e.settings.strategyId}),c.Utils.returnResolvedPromise(e)})}function vn(e){ie.updateBaseData(e)}function mn(){return s.log("OfferWall.js | _initOfferWall",s.LogLevels.verbose),Q&&"rejected"!==Q.state()?s.log("OfferWall.js | _initOfferWall using cached promise in Init OW flow",s.LogLevels.verbose):(Q=new p.Deferred,hn().then(function(){Q.resolve()})),Q.promise()}function bn(n){var t=new p.Deferred;return s.shouldExtendApiDataWithDebugData()?s.extendApiDataWithDebugParams(n.data).then(function(e){n.data=e,t.resolve(n)}):t.resolve(n),t.promise()}function hn(){var n=null;return gn().then(function(e){return bn(e)}).then(function(e){return n=fn(),p.when(pn(e),n)}).then(function(e,n){return en(e,n)},function(e){return dn(n,e)}).always(Cn)}function Sn(){return gn().then(pn,function(e){return e&&e.errMsg||(e={errMsg:C.preconditions}),s.log("OfferWall.js | CB.init preConditionsFailed "+JSON.stringify(e),s.LogLevels.verbose),c.Utils.returnRejectedPromise(e.errMsg)}).then(null,function(e){return s.log("OfferWall.js | CB.init getInventoryPromise fail",s.LogLevels.verbose),e=e||C.server,c.Utils.returnRejectedPromise(e)}).always(Cn)}function yn(){return ne.precache?(mn(),c.Utils.returnResolvedPromise()):ne.getInventoryOnInit?Sn():c.Utils.returnResolvedPromise()}function Cn(){if(!Y&&(ne.precache||ne.getInventoryOnInit)&&!wn(In())){var e=isNaN(ne.refreshInterval)||0===ne.refreshInterval?n:ne.refreshInterval;s.log("Setting OW refresh interval - "+e+" minutes",s.LogLevels.verbose),Y=setTimeout(Ne,e*r)}}function An(){X&&c.Utils.returnRejectedPromise(_e().errMsg)}function Dn(e){"object"!=typeof e&&(e={errMsg:e});var n=e.errMsg||"Generic error on ShowOfferWall";return X?n:e.failFlow===A.adunit?(ie.trackEvent(O.showOWFail,{callFailReason:n}),xn(n),n):e.failFlow===A.preConditions?(xn(n),n):(s.log("Empty OfferWall error",s.LogLevels.verbose),Tn(),c.Utils.returnResolvedPromise())}function In(){var e,n=Pe("standaloneOfferWallData");if(n&&n.url){var t=n.url,i=an();c.Utils.isDefined(i)&&(t=c.Utils.replacePlaceHolder(t,{"{{PlacementId}}":i})),-1===t.indexOf("openOWInStandalone")&&(t+="&openOWInStandalone=true"),e=p.extend({},n,{url:t})}return e}function wn(e){return e&&e.openInStandaloneOfferWall&&e.url}function Ln(){return J&&"rejected"!==J.state()?(s.log("line[354]: Recalling showOW before resolving previous flow",s.LogLevels.error),ie.trackEvent(O.showOWFail,{callFailReason:"Recalling showOW before resolving previous flow"}),J):(J=new p.Deferred,Ce(),ie.incrementSessionNumber(),ie.trackTimingStart(O.initControllerToShowOWCalled,s.getApiData({controllerTimeLoaded:1}).controllerTimeLoaded),ie.trackTimingStop(O.showOWCalled,{eNameStart:O.initControllerToShowOWCalled}),ie.trackTimingStart(O.showOWCalledToOwVisible),xe().then(function(){if(wn(t=In()))return c.Utils.returnResolvedPromise();var e=mn();return n=je(),Pn(e),e.then(An,Dn)},function(e){return xn(e),e}).always(function(){n&&n()}).then(function(){if(wn(t)){var e={url:t.url,method:"external_browser"};s.openUrl(e)}else Tn();s.log("Resolving ShowOfferWall",s.LogLevels.verbose),J.resolve.apply(this,arguments)},function(e){s.log("Rejecting ShowOfferWall",s.LogLevels.verbose),J.reject(e)}),J.promise());var n,t}function Pn(e){if(L.url=null,"resolved"!==e.state()||!ne.precache){var n=!!Pe(i.offerWallSetting.immersive)&&Pe(i.offerWallSetting.immersive);s.loadAdUnitUrl(L,L.url,S,{preload:!1,immersive:n,OLXD:Pe(i.offerWallSetting.OLXD)}),s.displayAdUnitFrame(L)}}function Tn(){s.loadAdUnitUrl(L,L.url,S,{preload:!1}),s.displayAdUnitFrame(L)}var On=function(e){var n=e.applicationUserId,t=e.applicationKey;return n!==j||t!==W},Fn=function(e){j=e.applicationUserId,W=e.applicationKey};function Un(e){return T.dialogErrorMessage}function xn(e){s.log("No OfferWall dialog error",s.LogLevels.verbose);var n={productType:u,message:Un(e),alwaysClose:!0,yes:"close",no:"OK"};s.alert(n)}function Nn(){var e=s.getProtocol();h={dev:e+i.gatewayDestinationMap.OW.production,stage:e+i.gatewayDestinationMap.OW.production,prod:e+i.gatewayDestinationMap.OW.production}}function Mn(e){return h[e]||h.prod}var kn={init:function(){a=this,p=s.jQuery(),Nn();var e=Mn(s.getEnv());if(!t){var n={productChance:(s.getEnv(),1),baseData:{productType:u}};"android"===s.getConfig().mobileSDKSettings.deviceOs&&(D.deviceApiLevel=0),ie=c.Eventics.createEventic(n),re=new(Bn("../components/FetcherService.js"))(e,I),oe.init(),fe(),t=!0}},getNextBtnText:function(){return c.Utils.isDefined(T.next)?T.next:"Next"},getConfirmCloseMsg:function(){return T.confirmCloseMsg&&T.confirmCloseMsg[y[0]]},showOfferWall:Ln,isNextAvailable:function(){return!1},getBack:function(){return L.url}};return p.extend(kn,{_promisedCanEngage:Ie,_initiateClientSideCallbacks:Ue,_preShowOfferWall:xe,_refreshInterval:Ne,_refreshOfferWall:Me,_setAdunitAssetsTimer:ke,_resolveAdunitAssetsPromise:Be,_rejectAdunitAssetsPromise:Ee,_subscribeGetConfig:Ke,_subscribeCloseDuringShow:je,_loadAdunitToIframe:We,_verifyRestrictions:Ge,_getAPIRequiredData:qe,_rejectInitWithReason:He,_generateErrorObject:Qe,_generateCloseBeforeVisibleErrorObject:_e,_isDuringShow:Xe,_isDuringInit:$e,_clearRefreshInterval:Ye,_handleDependenciesResolve:en,_handleDependenciesReject:dn,_getInventory:un,_loadAdunit:fn,_handleInitOfferWallError:Dn,_showLoaderIfNeeded:Pn,_initOfferWallByConfig:yn,_displayOfferWall:Tn,_getInventoryAndPreload:hn,_initOfferWall:mn,_setOfferWallSettings:Le,_getOfferWallSetting:Pe}),kn}e.exports=t},{"../components/CampaignsFilter.js":8,"../components/Constants.js":9,"../components/FetcherService.js":13}],82:[function(N,e,n){e.exports=function(v,f,g,p){"use strict";var a,n,t=f.instancesManager.getManualLoadInstancesBuilder(),m=new(N("./DemandSource/EventCategories.js"))(g.ProductName),b=new(N("./DemandSource/dsConfig.js"))(g,m),o=new(N("./prdTaskManager.js"))(v,f,g.ProductName,p),r={},s={},i=!1,h=f.DemandUtils,c=[],l={loadSuccess:null,loadFailure:null};function S(e,n){var t=L(e);return t||(t=P(n)),t}function y(e){return n=e,!(f.getConfig().mobileSDKSettings.deviceOs===p.deviceOs.ios&&!n.isViewControllerSet);var n}function d(e,n,t){var i=O(e),a=U(e);if(D(a,i),w(i))!function(e,n,t){var i=b.errors.load.instanceExhausted;e.productType=g.ProductName;var a=h.extendCallbackParamsWithDemandConfig(e,{errMsg:i});n.trackEvent(m.loadAdFailedForExhaustedInstance,{},a),f.callSDKFunction(t,a)}(e,a,t);else{var r=S(i,e);if(C(r)){if(e&&e.productType===p.BN){if(!y(e))return o=e,a.trackEvent(m.loadAdFailed,{callfailreason:"Missing Parameter : View Controller"}),void f.callSDKFunction(s,h.extendCallbackParamsWithDemandConfig(o,{errMsg:"Missing Parameter : View Controller"}));f.addExternalAdViewIdAndSetStatus(e)}var o,s,c,l,d,u;l=e,d=n,u=t,(c=r).statesManager.load(c.loadAd,d,u,c.readyStateParams,l)}else A(a,t)}}function C(e){return e&&e.statesManager}function A(e,n){F(e,n,b.errors.general.dsNotSet)}function u(e,n,t){var i,a,r,o,s,c,l,d=O(e),u=S(d,e),f=x(u),g=function(e){if(!e)return null;try{var n=v.Utils.parseJSON(decodeURIComponent(e));return v.Utils.isEmptyObject(n)&&(n=null),n}catch(e){}return null}(e.adm),p=(l="-1",(c=g)&&c.seatbid.ext.hasOwnProperty("auction")?c.seatbid.ext.auction.id:l);f.updateBaseData({auctionId:p}),D(f,d),C(u)?g?(i=u,r=g,o=n,s=t,(a=e).adm=r,i.statesManager.loadWithADM(i.loadAdWithAdm,o,s,i.readyStateParams,a)):F(f,t,"unable to parse adm from native SDK"):A(f,t)}function D(e,n){f.log("productAdapter - load",f.LogLevels.verbose),e.trackEvent(m.loadAd,{demandSourceName:n})}function I(e){return e&&e.productType===g.ProductName}function w(e){return-1!==c.indexOf(e)}function L(e){return e?a[e]:null}function P(e){return function(e){if(e){var n=e.demandSourceName;if(a[n])return a[n];f.log("initiating "+g.ProductName+" demand source with configuration "+JSON.stringify(e),f.LogLevels.verbose);var t={productChance:1,baseData:{productType:g.ProductName,demandSourceName:n,integrationType:p.integrationType.manual,isBiddingInstance:e.isInAppBidding}},i=v.Eventics.createEventic(t);return a[n]=new(N("./DemandSource/ProductInstance.js"))(v,f,p,e,b,i),a[n].statesManager=new(N("./ProductAdapter/ProductStatesManager.js"))(v,f,e,b,p,a[n].getDSEventics(),g.NativeAPI),a[n].init(),a[n]}}(t.createDemandEntityConfigObj(g.ProductName,O(e),T(e),e.demandSourceId))}function T(e){var n=!1;return e&&e.inAppBidding&&"true"===e.inAppBidding.toLowerCase()&&(n=!0),n}function O(e){return e&&e.demandSourceName?e.demandSourceName:g.DemandName}function F(e,n,t){e.trackEvent(m.loadAdFailed,{callfailreason:t}),f.callSDKFunction(n,{errMsg:t})}function U(e){return x(a[O(e)])}function x(e){return e&&e.getDSEventics()?e.getDSEventics():n}return{init:function(){if(a=this,!i){var e={productChance:1,baseData:{productType:g.ProductName,integrationType:p.integrationType.manual}};n=v.Eventics.createEventic(e),function(){var e=f.getProtocol();r={dev:e+g.gatewayDestinationMap.prod,stage:e+g.gatewayDestinationMap.prod,prod:e+g.gatewayDestinationMap.prod};var n,t,i=f.getApiData({destinationMap:0});if(i&&i.destinationMap)for(n in s=i.destinationMap)t=s[n],s[n]&&0<s[n].length&&-1===s[n].indexOf(e)&&(s[n]=e+t)}(),v.PubSub.subscribe(g.AdUnitCallbacks.engageEnd,function(e,n){if(I(e)){var t=L(e.demandSourceName);t&&t.statesManager&&((e&&e.engaged||g.shouldResetOnEngageEnd)&&t.statesManager.engageEnd(),t.engageEnd(e,function(){o.publish("Engaged",[{duringEngage:!1,productType:g.ProductName}]),v.Utils.isFunction(n)&&n()}))}}),v.PubSub.subscribe(g.AdUnitCallbacks.adClicked,function(e){if(I(e)){var n=f.getCurrentDisplayedAd();n&&f.callSDKFunction(g.ControllerNativeAPI.adClicked,h.extendCallbackParamsWithProductConfig(n,{}))}}),v.PubSub.subscribe(g.AdUnitCallbacks.adVisible,function(e){if(I(e)){var n=L(e.demandSourceName);n?(n.adVisible(e),n.statesManager&&n.statesManager.adVisible()):f.log(g.AdUnitCallbacks.adVisible+" called without an active demand source name",f.LogLevels.verbose)}}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.cacheReady,function(e){var n=L(e.demandSourceName);n&&n.statesManager&&(n.readyStateParams=e,n.statesManager.cacheReady(l.loadSuccess,e))}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.allOffersVast,function(e){var n=L(e.demandSourceName);n&&n.statesManager&&n.statesManager.allOffersVast(l.loadFailure,e.errorMsg)}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.noMoreOffers,function(e){var n=L(e.demandSourceName);n&&n.statesManager&&n.statesManager.noMoreOffers(l.loadFailure,e.errorMsg)}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.failedToShow,function(e){var n=L(e.demandSourceName);n&&n.statesManager&&(f.log(g.ProductName+" failed to show - can not engage ad",f.LogLevels.error),n.statesManager.failedToShow())}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.failedToLoad,function(e){var n=L(e.demandSourceName);n&&n.statesManager&&(f.log(g.ProductName+" failed to load",f.LogLevels.error),U(e).trackEvent(m.loadAdFailed,{callFailReason:e.errMsg}),n.statesManager.failedToLoad())}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.actionClick,function(e){f.OpenURLService.open(e)||f.log(g.ProductName+" failed to perform ActionClick",f.LogLevels.info)}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.exhaustedDemandSource,function(e){var n=O(e),t=L(n);f.log("exhaustedDemandSource: "+n,f.LogLevels.verbose),t&&(t.exhausted=!0),c.push(n),e&&e.engaged||(f.log("Demand source deleted in BG: "+n,f.LogLevels.verbose),delete a[n])}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.fallbackToNonPrecache,function(e){var n=L(e.demandSourceName);n&&n.statesManager&&n.statesManager.noMoreOffers(l.loadFailure,"failed due to fallbackToNonPrecache flow on manual load")}),v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.resetStateManager,function(e){var n=L(O(e));n&&n.statesManager&&n.statesManager.resetAdState()}),v.PubSub.subscribe("SDKController"+g.ControllerCallbacks.onAdWindowsClosed,function(e){if(I(e)){var n=L(e.demandSourceName);n&&n.exhausted&&(f.log("Demand source deleted: "+e.demandSourceName,f.LogLevels.verbose),delete a[e.demandSourceName])}}),g.ControllerCallbacks.reset&&v.PubSub.subscribe(g.ProductName+g.ControllerCallbacks.reset,function(e){var n=L(e.demandSourceName);if(n)return f.getExternalContainer().resetReportAdVisibilityFlags(),U(e).trackEvent(m.bannerDestroyed),n.statesManager.resetAdState(),void n.reset();f.log("Reset called without an active demand source name",f.LogLevels.verbose)}),o.init(),i=!0}},getProductType:function(){return g.ProductName},getDestination:function(e){return s&&s[e]?s[e]:r[f.getEnv()]},getAmountOfSupportedInventories:function(){return g.amountOfInventories},shouldAvoidHandleFrameClose:function(){return g.shouldAvoidHandleFrameClose},doesAllowConsecutiveGatewayRequestsDuringLoad:function(){return g.Features.allowConsecutiveGatewayRequestsDuringLoad},getProductTM:function(){return o},getConfirmCloseMsg:function(e){return a[e]?a[e].getConfirmCloseMsg():null},initProduct:function(e,n,t){var i=O(e);U(e).trackEvent(m.initAd,{demandSourceName:i});var a=f.getSDKLimitationData(g.ProductName);if(!a.didSucceed)return U(e).trackEvent(m.initAdFail,{},{callFailReason:a.errMsg,demandSourceName:i}),void f.callSDKFunction(t,{errMsg:a.errMsg,demandSourceName:i});var r=P(e);r&&(r.initProduct&&v.Utils.isFunction(r.initProduct)&&r.initProduct(e),r.statesManager&&r.statesManager.init(n))},loadProduct:function(e,n,t){f.log("productAdapter - loadProduct",f.LogLevels.verbose),l.loadSuccess=n,l.loadFailure=t,T(e)?u(e,n,t):d(e,n,t)},showProduct:function(e,n,t){var i,a=O(e);if(U(e).trackEvent(m.showAd),e&&f.AppOrientationManager.updateAppOrientationByNewRestriction(e.orientationRestriction),w(a)){var r={errMsg:b.errors.show.instanceExhausted,demandSourceName:a};return U(e).trackEvent(m.showAdFail,{callfailreason:b.errors.show.instanceExhausted}),void f.callSDKFunction(t,r)}if(!(i=L(a)))return U(e).trackEvent(m.showAdFail,{callfailreason:b.errors.general.dsNotSet}),void f.callSDKFunction(t,{errMsg:b.errors.general.dsNotSet});o.canEngage()?(U(e).trackTimingStart(m.showAdCalled),i.statesManager&&i.statesManager.show(i.showAd,n,t)):i.onShowAdFailed(t)},isManualIntegration:!0,className:"ProductAdapter"}}},{"./DemandSource/EventCategories.js":70,"./DemandSource/ProductInstance.js":76,"./DemandSource/dsConfig.js":77,"./ProductAdapter/ProductStatesManager.js":84,"./prdTaskManager.js":111}],83:[function(e,n,t){n.exports={NativePrefix:"NativeCallback",className:"ProductAdapter",adStates:{notSet:0,waitingToLoad:1,inLoadingProcess:2,internalLoadingProcess:3,loaded:4,loadedFromInternalLoad:5,visible:6,inShowingProcess:7,failedInBackground:8}}},{}],84:[function(J,e,n){function t(r,s,c,l,a,d,o){var e=J("./ProductAdapterConstants.js"),u=e.adStates,n=u.notSet,f=l.eventicsCategories,g=!1,p=!1,v=s.DemandUtils,m=!1,b=v.extendCallbackParamsWithDemandConfig(c);function h(e){return n===e}function S(e){n=parseInt(e,10)}function t(){return n}function y(){return S(u.notSet)}function i(){return h(u.loadedFromInternalLoad)||h(u.loaded)}function C(e,n,t){if(g)g=!1;else if(h(u.waitingToLoad))S(u.internalLoadingProcess);else{if(h(u.inLoadingProcess)||p||c.productType===a.BN&&h(u.loaded)){d.trackEvent(t,{callFailReason:n},b);var i=v.extendCallbackParamsWithDemandConfig(c,{errMsg:l.errors.load.noMoreOffers});s.callSDKFunction(e,i),r.PubSub.publish("ProductStatesManager.stateResolved",[v.extendCallbackParamsWithProductConfig(c,{response:!1})])}p=!1,y()}}function A(e){if(o)if(e===o.load){if(h(u.inLoadingProcess)||h(u.waitingToLoad))return l.errors.load.duringLoad;if(h(u.visible)||h(u.inShowingProcess))return l.errors.load.duringShow}else if(e===o.show){if(h(u.notSet))return l.errors.show.notLoaded;if(h(u.inLoadingProcess)||h(u.waitingToLoad))return l.errors.show.duringLoad;if(h(u.visible)||h(u.inShowingProcess))return l.errors.show.visible}}function D(e,n){if(o)if(e===o.load)(h(u.inLoadingProcess)||h(u.waitingToLoad))&&s.log(A(o.load),s.LogLevels.error);else if(e===o.show)if(h(u.notSet)||B()||h(u.inLoadingProcess)){var t=v.extendCallbackParamsWithDemandConfig(c,{errMsg:A(o.show)});s.callSDKFunction(n,t)}else(h(u.visible)||h(u.inShowingProcess))&&s.log(A(o.show),s.LogLevels.error)}function I(e){var n=v.isLegacy(c)?{}:b;m=!0,s.callSDKFunction(e,n)}function w(e,n,t,i){c.productType!==a.BN?L(e,n,t,i):P(e,n,t,i)}function L(e,n,t,i){if(h(u.notSet)||h(u.loaded))S(u.inLoadingProcess),e(b,function(){},t);else if(h(u.loadedFromInternalLoad))d.trackEvent(f.loadAdSuccess,{},b),s.callSDKFunction(n,v.extendCallbackParamsWithDemandConfig(c,i)),S(u.loaded),r.PubSub.publish("ProductStatesManager.stateResolved",[v.extendCallbackParamsWithProductConfig(c,{response:!0})]);else if(g||p){var a=g?l.errors.load.inStateVisibleOrInShowingProcess:l.errors.load.inLoadingStateOrWaitingToLoad;d.trackEvent(f.loadAdIgnored,{callfailreason:a},b)}else h(u.visible)||h(u.inShowingProcess)?g=!0:B()?p=!0:(d.trackEvent(f.loadAdFailed,{callfailreason:A(o.load)},b),D(o.load))}function P(e,n,t,i){d.trackTimingStart(f.bannerLoadToLoadSuccess);var a=function(){};h(u.notSet)?(S(u.inLoadingProcess),e(b,a,t)):h(u.loaded)?(S(u.notSet),e(b,void 0,t)):h(u.visible)||h(u.inShowingProcess)?(S(u.inLoadingProcess),e(b,a,t)):B()?p=!0:h(u.inLoadingProcess)?d.trackEvent(f.bannerReloadDuringLoad,v.extendCallbackParamsWithDemandConfig(c)):(d.trackEvent(f.loadAdFailed,{callfailreason:A(o.load)},b),D(o.load))}function T(e,n,t,i,a){if(!m){var r="instance was not initiated",o=v.extendCallbackParamsWithDemandConfig(c,{errMsg:r});return d.trackEvent(f.loadAdFailed,{callfailreason:r},b),void s.callSDKFunction(t,o)}if(h(B()))return d.trackEvent(f.loadAdIgnored,{callfailreason:l.errors.load.inLoadingStateOrWaitingToLoad},b),void s.log("productStateManager | loadWithADM | already in loading process",s.LogLevels.verbose);S(u.inLoadingProcess),e(a,function(){},t)}function O(e,n,t){i()?(S(u.inShowingProcess),e(b,n,t)):(d.trackEvent(f.showAdFail,{callfailreason:A(o.show)},b),D(o.show,t))}function F(e,n){c.productType!==a.BN?U(e,n):x(e,n)}function U(e,n){var t=!1;(h(u.inLoadingProcess)||p)&&(t=!0),p=!1,h(u.internalLoadingProcess)?S(u.loadedFromInternalLoad):S(u.loaded),t&&(d.trackEvent(f.loadAdSuccess,{},b),s.callSDKFunction(e,v.extendCallbackParamsWithDemandConfig(c,n)),r.PubSub.publish("ProductStatesManager.stateResolved",[v.extendCallbackParamsWithProductConfig(c,{response:!0})]))}function x(e,n){(h(u.inLoadingProcess)||h(u.visible)||p)&&(d.trackTimingStop(f.loadAdSuccess,{eNameStart:f.bannerLoadToLoadSuccess}),d.trackTimingStart(f.bannerLoadSuccessToVisible),s.callSDKFunction(e,v.extendCallbackParamsWithDemandConfig(c,n)),r.PubSub.publish("ProductStatesManager.stateResolved",[v.extendCallbackParamsWithProductConfig(c,{response:!0})])),p=!1,S(u.loaded)}function N(e,n){C(e,n,f.loadAdFailed)}function M(e,n){C(e,n,f.loadAdFailed)}function k(e,n){C(e,n,f.loadAdFailedForOnHoldInstance)}function B(){return h(u.waitingToLoad)||h(u.internalLoadingProcess)}function E(){y()}function V(){y()}function R(){c.productType===a.BN?j():K()}function K(){S(g?u.inLoadingProcess:u.waitingToLoad)}function j(){S(u.notSet)}function W(){S(u.visible)}function G(){return h(u.failedInBackground)}var q={getAdState:t,init:I,load:w,show:O,cacheReady:F,allOffersVast:N,noMoreOffers:M,failedToShow:E,failedToLoad:V,instanceLoadFailedOnHold:k,engageEnd:R,isFailedInBG:G,adVisible:W,loadWithADM:T,resetAdState:y};return q}e.exports=t},{"./ProductAdapterConstants.js":83}],85:[function(c,e,n){e.exports=function(r,a,e){"use strict";var n,t=c("./AdapterSharedConfig.js"),i=[];function o(e){return a.RewardedVideo||(a.RewardedVideo=a.RewardedAdFactory.create({isManualLoadFlow:e.isManualLoadFlow}),a.BrandConnect=a.RewardedVideo,a.RewardedVideo.init()),a.RewardedVideo}function s(e){return e&&"true"===e.rewarded?o({isManualLoadFlow:!0}):(a.Interstitial||(a.Interstitial=a.InterstitialFactory.create(),a.Interstitial.init()),a.Interstitial)}return{initModule:function(){n||(i.push(r.PubSub.subscribe(e.CB+t.NativeAPI.init,function(e,n,t){var i,a;(i=e)&&i.apiVersion&&(a=r.Utils.apiVersionCompareTo(i.apiVersion,"1")),0<a&&(n=t=function(){}),s(e).initProduct(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+t.NativeAPI.load,function(e,n,t){s(e).loadProduct(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+t.NativeAPI.show,function(e,n,t){var i;(i=e,i&&"true"===i.rewarded?a.RewardedVideo:a.Interstitial).showProduct(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".initRewardedVideo",function(e,n,t){o({isManualLoadFlow:!1}).initRewardedVideo(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".showRewardedVideo",function(e,n,t){a.RewardedVideo.showRewardedVideo(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".initBrandConnect",function(e,n,t){o({isManualLoadFlow:!1}).initBrandConnect(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".showBrandConnect",function(e,n,t){a.RewardedVideo.showBrandConnect(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".initBanner",function(e,n,t){(a.Banner||(a.Banner=a.BannerFactory.create(),a.Banner.init()),a.Banner).initProduct(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".loadBanner",function(e,n,t){a.Banner.loadProduct(e,n,t)})),i.push(r.PubSub.subscribe(e.CB+".bannerViewVisible",function(e,n,t){a.Banner.showProduct(e,n,t)})),n=!0)},destroyListeners:function(){jQuery.each(i,function(e,n){r.PubSub.unsubscribe(n)}),n=!1},className:"ProductRouter"}}},{"./AdapterSharedConfig.js":65}],86:[function(c,e,n){e.exports=function(r,o){var s=c("../components/Constants.js");return{create:function(e){var n;if(!0===e.isManualLoadFlow){var t=c("./ProductAdapter.js"),i=c("./AdapterSharedConfig.js"),a=c("./RewardedVideo/RewardedAdConfiguration.js")(i,o.SupplyUtils,s);n=new t(r,o,a,s)}else n=new(c("./RewardedVideo/RewardedVideo.js"))(r,o);return n}}}},{"../components/Constants.js":9,"./AdapterSharedConfig.js":65,"./ProductAdapter.js":82,"./RewardedVideo/RewardedAdConfiguration.js":87,"./RewardedVideo/RewardedVideo.js":88}],87:[function(e,n,t){n.exports=function(e,n,t){var i=n.shouldFetchNewFeedOnAdCloseFlag(t.RV);return i=void 0===i||i,{NativeAPI:e.NativeAPI,ControllerCallbacks:e.ControllerCallbacks,AdUnitCallbacks:e.AdUnitCallbacks,ControllerNativeAPI:e.NativeAPI,retriesLogic:e.retriesLogic,DemandName:"SupersonicAds",ProductName:t.RV,Features:{allowMultiInitCalls:!0,reportOnAdunitReady:!0,shouldFetchNewFeedOnAdClose:i,preFetchAllVasts:!0,allowConsecutiveGatewayRequestsDuringLoad:!0,isExhaustInstanceAllowed:!0},gatewayDestinationMap:{prod:t.gatewayDestinationMap.RV.production},amountOfInventories:1}}},{}],88:[function(x,e,n){function t(i,c){"use strict";var l,n=!1,o=x("../../components/Constants.js"),e={preFetchAllVasts:!0},d=o.RV,t={ProductName:d,Features:e,retriesLogic:{maxNumOfAttemptsToCallAPI:2,initAttemptsDelay:500,serverResponseTimeoutInMilis:1e4}},u=new(x("./../DemandSource/EventCategories.js"))(d),a=new(x("./../DemandSource/dsConfig.js"))(t,u),r=new(x("./../prdTaskManager.js"))(i,c,d,o),f,s={},g={},p;function v(n,t,i){if(!n||!n.demandSourceName)return f.trackEvent(u.initAdFail,{callFailReason:"Missing demand name on initiation"}),void c.callSDKFunction(i,{errMsg:"Missing demand name on initiation"});var e=c.getSDKLimitationData(d);if(e.didSucceed){var a=c.instancesManager.createUninitializedDemandInstance(d,n.demandSourceName,!1);A(a);var r=l[a.demandSourceName],o=r.initProduct.bind(null,n,function(e){e&&e.eventics&&(e.eventics.trackEvent(u.initAd),e.eventics.trackTimingStart(u.initAdToAdReady)),r.loadAd(n,t,i)},i),s=r.instanceOnHold;c.instancesManager.initiateDemandInstance(d,n.demandSourceName,o,s)}else C(n.demandSourceName,i,e)}function m(e,n,t){if(e&&e.demandSourceName){var i=O(e.demandSourceName);i?(y(i),c.AppOrientationManager.updateAppOrientationByNewRestriction(e.orientationRestriction),i.showAd(e,n,t)):c.callSDKFunction(t,{errMsg:"Error calling show, uninitialized product.",demandSourceName:e.demandSourceName})}else c.callSDKFunction(t,{errMsg:"Missing demand name on show."})}function b(n,t,i){if(c.isLegacy(c.featureMap.MDS[o.RV])){n||(n={}),n.demandSourceName=o.BC;var e=c.getSDKLimitationData(d);if(e.didSucceed){var a=c.instancesManager.createUninitializedDemandInstance(d,n.demandSourceName,!1);c.initEventics({productType:o.BC});var r=A(a);r.initProduct(n,function(e){e&&e.eventics&&(e.eventics.trackEvent(u.initAd),e.eventics.trackTimingStart(u.initAdToAdReady)),r.loadAd(n,t,i)},i)}else C(n.demandSourceName,i,e)}else c.callSDKFunction(i,{errMsg:"Unsupported API function, use initAds instead."})}function h(e,n,t){if(c.isLegacy(c.featureMap.MDS[o.RV])){var i=O(o.BC);i?(e||(e={}),e.demandSourceName=o.BC,y(i),i.showAd(e,n,t)):c.callSDKFunction(t,{errMsg:"Error calling show, uninitialized product."})}else c.callSDKFunction(t,{errMsg:"Unsupported API function, use showRewardedVideo instead."})}var S=function(){i.PubSub.subscribe(d+".exhaustedDemandSource",function(e){var n=e;I(e)&&n.demandSourceName&&l[n.demandSourceName]&&(l[n.demandSourceName].exhausted=!0,c.instancesManager.exhaustedDemandSource(d,n),e&&e.engaged||(c.log("Demand source deleted in BG: "+n.demandSourceName,c.LogLevels.verbose),delete l[n.demandSourceName]))}),i.PubSub.subscribe("SDKController.AdVisible",function(e){if(I(e)){r.publish("Engaged",[D({duringEngage:!0})]);var n=O(e.demandSourceName);n&&n.adVisible(e)}}),i.PubSub.subscribe("SDKController.onAdWindowsClosed",function(e){if(I(e)){var n=e.demandSourceName;n&&l[n]&&l[n].exhausted&&(c.log("Demand source deleted: "+n,c.LogLevels.verbose),delete l[n])}}),i.PubSub.subscribe("SDKController.engageEnd",function(e,n){if(I(e)){var t=O(e.demandSourceName);t&&t.engageEnd(e,function(){T(e.engaged),i.Utils.isFunction(n)&&n()})}}),i.PubSub.subscribe("SDKController.AdClicked",function(e){var n=c.getCurrentDisplayedAd();I(e)&&n&&"CPVI"===n.ext.type&&c.callSDKFunction("adClicked",{productType:d,demandSourceName:n.demandSourceName})}),i.PubSub.subscribe(d+".ActionClick",function(e){c.OpenURLService.open(e)||c.log(d+" failed to perform ActionClick",c.LogLevels.info)}),i.PubSub.subscribe(d+".failedToLoad",function(e){e&&e.demandSourceName&&f.trackEvent(u.initAdFail,{callFailReason:e.errMsg})})};function y(e){e.updateEventicsWithAdData(),e.getDSEventics().trackEvent(u.showAd),e.getDSEventics().trackTimingStart(u.showAdCalled)}function C(e,n,t){f.trackEvent(u.initAd,{callFailReason:t.errMsg,demandSourceName:e}),f.trackEvent(u.initAdFail,{callFailReason:t.errMsg,demandSourceName:e}),c.callSDKFunction(n,{errMsg:t.errMsg,demandSourceName:e})}function A(e){var n=e.demandSourceName;return l[n]||(l[n]=new(x("./../DemandSource/ProductInstance.js"))(i,c,o,e,a,null),l[n].init(),f=l[n].getDSEventics()),l[n]}function D(e){return(e=e||{}).productType=P(),e}function I(e){return e&&(e.productType===d||e.productType===o.BC)}function w(){var e=c.getProtocol();s={dev:e+o.gatewayDestinationMap.RV.production,stage:e+o.gatewayDestinationMap.RV.production,prod:e+o.gatewayDestinationMap.RV.production};var n,t,i=c.getApiData({destinationMap:0});if(i&&i.destinationMap)for(n in g=i.destinationMap)t=g[n],g[n]&&0<g[n].length&&-1===g[n].indexOf(e)&&(g[n]=e+t)}function L(e){return g&&g[e]?g[e]:s[c.getEnv()]}function P(){return p?o.BC:d}var T=function(e){e&&r.publish("Engaged",[{duringEngage:!1,productType:d}])};function O(e){return e?l[e]:(c.log("cannot extract demand source name from data",c.LogLevels.verbose),null)}function F(e){return l[e]?l[e].getConfirmCloseMsg():null}var U={name:"RewardedVideo",className:"RewardedVideo",init:function(){if(l=this,!n){var e={productChance:(c.getEnv(),1),baseData:{productType:d,integrationType:o.integrationType.automatic}};f=i.Eventics.createEventic(e),p=c.isLegacy(c.featureMap.MDS[o.RV]),S(),r.init(),w(),n=!0}},getProductType:P,getDestination:L,getProductTM:function(){return r},getConfirmCloseMsg:F,getAmountOfSupportedInventories:function(){return o.DEFAULT_AMOUNT_OF_INVENTORIES},doesAllowConsecutiveGatewayRequestsDuringLoad:function(){return!0},initRewardedVideo:v,showRewardedVideo:m,initBrandConnect:b,showBrandConnect:h};return l=U,U}e.exports=t},{"../../components/Constants.js":9,"./../DemandSource/EventCategories.js":70,"./../DemandSource/ProductInstance.js":76,"./../DemandSource/dsConfig.js":77,"./../prdTaskManager.js":111}],89:[function(e,n,t){n.exports=function(e,t,c,n,f){var g=n.eventicsCategories,i=n.responseTypesWithReason,p={};function a(e){e&&"RewardedVideo"===n.productType&&t.DemandUtils&&!t.DemandUtils.isManualRewardedVideoIntegration()&&f.trackEvent(g.noMoreOffers,{callFailReason:e}),c.publishAvailabilityFalse("NoMoreOffers",e)}function v(e,n){return p.preFetchAllVasts&&n||p.isPreCache&&e}function m(e,n,t,i,a,r,o){v(e,o)?(n(),a()):p.reportOnAdunitReady&&p.isPreCache&&0!==r||a()}function l(e,n){a(e),n()}function d(e,n){l(e,n)}function b(e,n){t.log("Availability Manager | reportAdAvailable",t.LogLevels.verbose),r(i.ready)||(r(i.none)&&f.trackTimingStop(g.adReady,{eNameStart:g.initAdToAdReady}),c.publishAvailabilityTrue(e,n))}function r(e){return c.isCurrentState(e)}function o(e,n){p.reportOnAdunitReady&&p.isPreCache&&0!==p.numOfBannersToInitSuccess?c.reportNotInInit():b(e,n)}return{setAMSettings:function(e,n){e&&"object"==typeof e&&(n?jQuery.extend(p,e):p=e)},cacheAdsFailed:function(e,n,t,i){e&&n?i():a(t)},cacheUpdate:function(e,n,t,i){0===e?a("Cache updated with zero campaigns"):n&&t&&i()},cacheTimeoutFail:function(e){a(e)},canReportAvailable:function(e,n,t,i){v(t,i)||o(e,n)},adLoadError:function(){a("Ad loaded with error")},inventoryEmpty:function(e){a(e)},engageEnd:function(e,n,t,i,a,r,o,s){e?d(a,r):(v(n,s)&&c.publishAvailabilityFalse("AllOffersVast",a),t||!p.isPreCache&&!i||(p.shouldRefreshInventory?o(a):l(a,r)))},reportBasedOnVast:m,shouldValidateVast:v,isCurrentState:r,preLoadNext:function(e,n,t){v(e,t)&&n()},allVastPromiseResolved:function(e,n){o(e,n)},notPreCacheMode:function(e){e()},preCacheMode:function(e,n,t,i,a,r,o,s){if(e&&f.trackEvent(g.campaignsAvailableFromCache),0===p.numOfBannersToInitSuccess)return c=t,l=o,d=a,u=r,v(i,s)?d():b(u,l),void c();var c,l,d,u;e?t():0===n&&m(i,a,0,0,t,n,s)},reset:function(){c.setLastResponse(i.none),p={}},adLoadedSuccessfully:function(e,n){(p.reportOnAdunitReady||p.preFetchAllVasts)&&p.isPreCache&&b(e,n)},instanceOnHold:function(){a("Instance on hold")},instanceReachCapping:function(e,n){d(e,n)},adClosedMovingToNextAd:function(e,n){v(e)&&c.publishAvailabilityFalse("AllOffersVast",n)},sessionOver:function(e,n){l(e,n)}}}},{}],90:[function(e,n,t){n.exports=function(r,e,o,s,n){var t=o.responseTypesWithReason,i=t.none,c=e.DemandUtils;function a(e){return i===e}function l(e,n,t,i,a){r.PubSub.publish(o.productType+"."+e,[c.extendCallbackParamsWithParentProductConfig(s,{numOfAdUnits:n,firstCampaignCredits:t,totalNumberCredits:i,errorMsg:a})])}function d(){n.publish("InitiatedAPICall",[c.extendCallbackParamsWithProductConfig(s,{duringInit:!1})])}return{setLastResponse:function(e){i=e},getLastResponse:function(){return i},publishAvailabilityTrue:function(e,n){d(),a(t.ready)||(l("CacheReady",e,1,n),i=t.ready)},publishAvailabilityFalse:function(e,n){d(),a(t.notReady)||("NoMoreOffers"===e||"AllOffersVast"===e&&a(t.ready))&&(l(e,0,0,0,n),i=t.notReady)},isCurrentState:a,reportNotInInit:d}}},{}],91:[function(e,n,t){n.exports=function(t,n,i,a){var r,e=!1,o=!1,s=!1,c=!1,l=!1,d=!1;function u(e){return e&&e.productType===i.productType&&(!i.demandSourceName||e.demandSourceName===i.demandSourceName)}return{init:function(){e||(t.PubSub.subscribe(a.taskManager+".InitiatedAPICall",function(e){u(e)&&t.Utils.isDefined(e.duringInit)&&(o=e.duringInit)}),t.PubSub.subscribe(a.taskManager+".AdErrorState",function(e){u(e)&&t.Utils.isDefined(e.error)&&(l=e.error)}),t.PubSub.subscribe(a.taskManager+".Engaged",function(e){u(e)&&t.Utils.isDefined(e.duringEngage)&&(s=e.duringEngage,n.log("duringEngage "+s+" on demand "+i.demandSourceName,n.LogLevels.verbose))}),t.PubSub.subscribe(a.taskManager+".CacheUpdateStatus",function(e){u(e)&&t.Utils.isDefined(e.duringCacheUpdate)&&(c=e.duringCacheUpdate)}),t.PubSub.subscribe(a.taskManager+".InitiatedTimeoutAttempt",function(e){u(e)&&t.Utils.isDefined(e.duringAPITimeoutAttempts)&&(d=e.duringAPITimeoutAttempts)}),e=!0,r=n[i.productType].getProductTM())},canEngage:function(){return!o&&!s&&r.canEngage()},canPreload:function(){return!l&&!o&&!s&&r.isConnected()},canInitCallToApi:function(){return s||o||c||!r.isConnected()?t.Utils.returnRejectedPromise():r.canInitCallToApi()},allowExternalCallToApi:function(){return!d},setConnection:function(e){return r.setConnection(e)},getStatusMsg:function(){return" duringInit:"+o+" duringEngage:"+s+" duringCacheUpdate:"+c+" error state:"+l+" during timeout attempts:"+d+r.getStatusMsg()},getStatus:function(){return{duringInit:o,duringEngage:s,duringCacheUpdate:c,adErrorState:l,timeoutAttempts:d,isConnected:r.isConnected()}},publish:function(e,n){t.PubSub.publish(a.taskManager+"."+e,n)}}}},{}],92:[function(t,e,n){e.exports=function(n,e,s,c){var l=t("./configurationValidator.js")(s,c.DebugLevels,c.errors),d=function(){var t=!0;return e.each(n.mobileSDKSettings,function(e,n){return e.match(/^deviceIds/)&&s.isDefined(n)&&n&&(t=!1),t}),t};return{parseConfiguration:function(e,n,t){var i,a,r=[],o=n.length;for(a=0;a<o;a++)s.isDefined(e[n[a]])||("applicationUserId"!==n[a]||d())&&r.push(n[a]);return 0<r.length?{didSucceed:(i={errMsg:c.errors.missing+JSON.stringify(r)},!1),errMsg:i}:l(e,t)},getDeviceApiLevel:function(){var e=n.mobileSDKSettings.deviceApiLevel;return"android"!==n.mobileSDKSettings.deviceOs||e?"ios"!==n.mobileSDKSettings.deviceOs||e||(e=n.mobileSDKSettings.deviceOSVersion.split(".")[0]):e=n.mobileSDKSettings.deviceOSVersion,e},getDeviceOsVersion:function(){var e=n.mobileSDKSettings.deviceOSVersion;return"android"===n.mobileSDKSettings.deviceOs&&(e=n.mobileSDKSettings.deviceApiLevel?n.mobileSDKSettings.deviceOSVersion:""),e}}}},{"./configurationValidator.js":98}],93:[function(e,n,t){n.exports=function(){return{adVisibleToClose:{name:"adVisibleToClose",id:-5},adClosed:{name:"adClosed",id:100},OWClosed:{name:"OWClosed",id:104},getApplicationConfigurationError:{name:"getApplicationConfigurationError",id:135},getExternalApplicationConfigurationError:{name:"getExternalApplicationConfigurationError",id:136},openUrlError:{name:"openUrlError",id:114},failedToStartStoreActivity:{name:"failedToStartStoreActivity",id:209},getUserUniqueIdFailure:{name:"getUserUniqueIdFailure",id:242},setUserUniqueIdFailure:{name:"setUserUniqueIdFailure",id:243},cdnABTestSuccess:{name:"cdnABTestSuccess",id:223},cdnABTestFail:{name:"cdnABTestFail",id:224},cdnABTestException:{name:"cdnABTestException",id:225},latencyTestSuccess:{name:"latencyTestSuccess",id:244},latencyTestFail:{name:"latencyTestFail",id:245},latencyTestException:{name:"latencyTestException",id:246},userClosedBeforeAdVisible:{name:"userClosedBeforeAdVisible",id:151},controllerException:{name:"controllerException",id:153},mismatchAdLoadError:{name:"mismatchAdLoadError",id:206},dialogBoxExit:{name:"dialogBoxExit",id:155},dialogBoxResume:{name:"dialogBoxResume",id:156},updateTokenFail:{name:"updateTokenFail",id:184},unauthorizedMessage:{name:"unauthorizedMessage",id:268}}}},{}],94:[function(n,e,t){e.exports=function(e,s){var c=n("../DemandSource/DemandEntityBuilder.js"),l=e&&e.instancesMap,d=e&&e.waterfallMap;return{createDemandEntityConfigObj:function(e,n,t,i){var a=function(e,n){var t=l&&l[s.sspProductNames[e]];if(t)for(var i=0;i<t.length;i++)if(-1!==t[i].instances.indexOf(n))return{demandGroupName:t[i].demandGroupName,isInstance:!0}}(e,n)||{},r=!0===a.isInstance?s.demandSourceType.instance:s.demandSourceType.demandSource,o={demandGroupName:a.demandGroupName,demandSourceName:n,demandType:r,isInAppBidding:t,integrationType:s.integrationType.manual,demandSourceId:i,waterfallPosition:function(e,n){var t=d&&d[s.sspProductNames[e]];if(t)return t[n]}(e,n)};return new c({productType:e},o)}}}},{"../DemandSource/DemandEntityBuilder.js":69}],95:[function(e,n,t){n.exports=function(i,a,r,o){var s="$$",c="MSFAPI";return{handler:function(e){return!!((n=e)&&"string"==typeof n.data&&0<n.data.length)&&(0===e.data.indexOf(s)?function(e){var n=e.slice(s.length);if(!n)return!1;var t=r.getParams(n);return r.isDefined(t.event)?(a.log("received event: "+t.event,a.LogLevels.verbose),i.publish("SDKController."+t.event,[t]),!0):r.isDefined(t.name)&&r.isDefined(t.parameters)?(a.log("received event: "+t.name,a.LogLevels.verbose),i.publish("SDKController."+t.name,[t.parameters]),!0):void 0}(e.data):-1!==e.data.indexOf(c)?(t=e.data,a.log("MOAT message was fired: "+t.toString(),a.LogLevels.verbose),!0):function(n){try{var e=JSON.parse(n);return r.extend(e.arguments,{callback:o(e.id)}),i.publish("SDKController."+e.method,[e.arguments]),!0}catch(e){a.log("SDKController | unable to parse message: "+JSON.stringify(n),a.LogLevels.error)}return!1}(e.data));var n,t}}}},{}],96:[function(Li,e,n){function T(p,v,m){var i=Li("./MessageHandler"),n=Li("../../presenter/uiConfig.js"),a=Li("../../components/Logger.js")(p.Utils),r=Li("../AdUnitManager/AdUnitGlobals.js")(m),e=Li("../AdUnitManager/AdUnitLibsManager.js")(p.Utils),t=Li("../../components/DisplayedAdManager.js"),o=Li("../AdUnitUrl.js")(r),s=Li("./mainConfig.js")(),c=new(Li("../../components/ExternalConfig")),l=Li("./instancesManager.js")(p,m),d=new(Li("../../components/BlacklistService"))(m),b=new(Li("../../components/FrameHelper.js"))(p,a,v,m),u=Li("./ConfigurationHelper.js"),f=Li("../../components/AdOrientationManager.js"),g=Li("../../components/containers/ContainerManager.js"),h=Li("../../components/containers/ExternalContainer.js"),S=Li("./sessionConfig")(),y=Li("../../components/NativeLifeCycleEventsConstants.js"),C=Li("../../patches/PatchesIphoneX.js"),A=Li("../../components/inAppBidding/IABService.js"),D,I,w,L,P,T,O,F,U,x,N,M=!1,k,B,E=p.Utils,V=p.PubSub,R=null,K=null,j=[],W=!1,G=!0,q=!1,J="supersonicads",H="acknowledgeMessage",Q=m.CB,_=m.BC,z=m.RV,X=m.OW,$=m.IS,Y=m.BN,Z=m.errors,ee=m.videoStates,ne=m.closeButtonStates,te=m.featureCompatibilityMap,ie=m.confirmCloseMsg,ae=m.requiredDeviceInfo,re=m.requiredAppInfo,oe=m.optionalAppInfo,se={v:"3.0.33",controllerId:(new Date).getTime()+"_"+Math.random(),controllerTimeLoaded:(new Date).getTime(),mobileSDKSettings:{protocol:null,defaultProtocol:null,securedProtocol:null,domain:null,overrideDebug:!1,defaultDebug:0,debug:0,appOrientation:null,mobileCarrier:null,connectionType:null,iphoneAppOnIpadDevice:null,deviceOs:"",SDKVersion:null,deviceOSVersion:null,deviceApiLevel:null,bundleId:null,deviceOEM:null,deviceScreenScale:null,"deviceScreenSize[width]":null,"deviceScreenSize[height]":null,"deviceIds[OpenUDID]":null,"deviceIds[IFA]":null,"deviceIds[IDFV]":null,"deviceIds[SERIAL]":null,"deviceIds[AndroidID]":null,"deviceIds[IMEI]":null,"deviceIds[AID]":null,deviceWidthDP:null,deviceHeightDP:null,deviceLanguage:null,deviceModel:null,diskFreeSize:null,geoLocation:null,isLimitAdTrackingEnabled:null,unLocked:null,gpi:null,webviewType:null,allowArbitraryLoads:null,allowArbitraryLoadsInWebContent:null,mcc:null,mnc:null,appVersion:null,batteryLevel:null,androidIsVersion:null},applicationSettings:{preCache:"device",applicationKey:null,applicationUserId:null,numOfCampaigns:null,campaignId:null,pageSize:null,landingId:null,page:null,applicationUserGender:null,applicationUserAgeGroup:null,applicationUserCreationDate:null,applicationUserCreationDateSignature:null,useClientSideCallbacks:null,SDKPluginType:null,disableCache:null,showDeliveryLimitationsLog:null,country:null,admin:null,placementId:null,consent:null,moatSupported:null},configMapping:{jb:function(){return se.mobileSDKSettings.unLocked}},controllerConfig:{fpf:null,destinationMap:null,isSecured:null,segmentId:null,segmentName:null,instancesMap:null,abt:null,waterfallMap:null},userType:SuperSonicGlobalConfig.userType},ce={localTime:function(){return(new Date).getTime()},timezoneOffset:function(){return(new Date).getTimezoneOffset()}},le="mobileController.min.css",de=SuperSonicGlobalConfig.mobileSDKSettings.isProd?"/versions/"+se.v+"/"+le:se.v+"/"+le,ue,fe,ge,pe,ve,me,be,he=!1,Se=!1,ye=0,Ce=3,Ae,De={flag_none:0,flag_iap:1,flag_aia:2,flag_ugl:4,nflag_sl:8,flag_as:16},Ie={flag_iap:function(){return!1},flag_aia:function(){return!1},flag_ugl:function(){return!1},nflag_sl:function(){return!1},flag_as:function(){return se.mobileSDKSettings.deviceOs===m.deviceOs.android}},we={defaultBehavior:0,adunitResponsibility:1},Le={close:1,nextFrame:2},Pe=n.style.iconBGConfig,Te=m.defaultOrientation,Oe={none:0,device:1,controller:2},Fe=n.style.defaultControlFrames,Ue=m.blockedProductsPerApiLevel,xe=m.storeSearchKeys,Ne={scrollHeight:""},Me={BrandConnect:{},RewardedVideo:{},Interstitial:{},OfferWall:we.defaultBehavior,Banner:we.defaultBehavior},ke={BrandConnect:{},RewardedVideo:{},Interstitial:{},OfferWall:ne.close,Banner:ne.close},Be={BrandConnect:ne.close,RewardedVideo:ne.close,Interstitial:ne.close,OfferWall:ne.close,Banner:ne.close},Ee={cdns:[{cdnName:"a.akamaihd.net",assets:["https://akm.ssacdn.com/users/cdn/jsonFile.json","https://akm.ssacdn.com/users/cdn/videoFile.mp4","https://akm.ssacdn.com/users/cdn/imgFile.png"]},{cdnName:"cncn.ssacdn.com",assets:["https://cncn.ssacdn.com/users/cdn/jsonFile.json","https://cncn.ssacdn.com/users/cdn/videoFile.mp4","https://cncn.ssacdn.com/users/cdn/imgFile.png"]},{cdnName:"itcn.ssacdn.com",assets:["https://itcn.ssacdn.com/users/cdn/jsonFile.json","https://itcn.ssacdn.com/users/cdn/videoFile.mp4","https://itcn.ssacdn.com/users/cdn/imgFile.png"]}]},Ve=[{url:"https://pm-gateway.supersonicads.com/test",method:"GET",region:"all"},{url:"https://init.supersonicads.com/admin/healthCheck",method:"GET",region:"all"},{url:"https://ow-gateway.supersonicads.com/delivery/mobilePanel.php",method:"GET",region:"all"}],Re,Ke,je=!1,We={RewardedVideo:!1,Interstitial:!1,BrandConnect:!1},Ge={},qe=m.appConfigPath,Je=m.appExtConfigPath,He=m.appExtConfigPathStaging,Qe=Math.floor(100*Math.random()),_e=!1,ze=n.templates.mainDefaultTemplate,Xe=n.templates.defaultDialogBoxTemplate,$e=n.templates.defaultNavigationTemplate,Ye=n.templates.loaderOWTemplate,Ze=n.templates.loaderOWOfferTemplate,en=p.Eventics,nn=Li("../../modules/SDKController/EventCategories")(),tn=function(e){var n=O.getDisplayedAdType(),t={productType:"UnKnown",action:"stopTiming",eventParam:{eName:nn.adClosed,data:{eNameStart:nn.adVisibleToClose}}};if(e&&(t.eventParam.data.generalMessage=e),n){n===m.OW&&(t.eventParam.eName=nn.OWClosed),t.productType=n;var i=O.getDisplayedAdDemandName();i&&(t.demandSourceName=i),V.publish("SDKController.Analytics",[t]),V.publish("SDKController.adClosed",[{productType:t.productType,demandSourceName:t.demandSourceName}])}else V.publish("SDKController.Analytics",[t])},an=function(e,n,t,i){var a,r=e.length,o=!0,s=[],c=null;for(a=0;a<r;a++)E.isDefined(n[e[a]])||(s.push(e[a]),o=!1);return o||(c=Z.missing+JSON.stringify(s)+" in "+t,E.isDefined(i)&&i&&k.callSDKFunction(i,{errMsg:c}),k.log(c,k.LogLevels.error)),{didSucceed:o,errMsg:c}},rn=function(e){v.each(e,function(e,n){V.unsubscribe(n)})},on=function(){v.fn.textfill2=function(e){var n,t,i=e.maxFontPixels,a=e.maxHeight,r=e.maxWidth,o=void 0!==e.parentContainer?v(e.parentContainer):null,s=v(this),c=null!==o?o.height():v(this).parent().height(),l=null!==o?o.width():v(this).parent().width();return void 0!==a&&(c=a),void 0!==r&&(l=r),s.each(function(){for(i=e.maxFontPixels;v(this).css({"font-size":i}),i-=1,e.lineHeight&&o.css({"line-height":e.lineHeight+"em"}),n=v(this).height(),t=v(this).width(),c<n||l<t&&3<i;);}),this},v.fn.textWidth=function(){var e,n=v(this).children(),t=v('<span style="display: inline-block;" />');return n.wrap(t),e=n.parent().width(),n.unwrap(),e}},sn=function(){V.subscribe(Q+".initProducts",function(e,n,t){v.when(Cn(e)).then(function(){"use strict";E.isDefined(n)&&k.callSDKFunction(n),An(e)},function(e){"use strict";E.isDefined(t)&&k.callSDKFunction(t,{errMsg:e})})}),V.subscribe(Q+".nativeNavigationPressed",function(){if(O.isDisplayed()){var e=O.getDisplayedAdType(),n=O.getDisplayedAdDemandName();q||((n?Me[e][n]:Me[e])===we.adunitResponsibility?Fn("backButtonPressed"):Qn())}}),V.subscribe(Q+".engageEnd",function(e){un()||("forceClose"===e.action?(tn(),Vn(!1,!1),T.clearCountViewport()):"secondaryClose"===e.action&&(L.returnFromNavigationMode(Ln,Ne,Tn),O.getDisplayedAdType()===X&&V.publish("SDKController.AdClosed",[O.get()])))}),V.subscribe(Q+".failedToStartStoreActivity",function(e){if(e){k.log("failedToStartStoreActivity | params: "+JSON.stringify(e),k.LogLevels.info);var n={};n.rvnomoreoffersreason=decodeURIComponent(e.url);var t=O.getDisplayedAdType();t&&(n.productType=t),pe.trackEvent(nn.failedToStartStoreActivity,{generalMessage:decodeURIComponent(e.errMsg)},n)}}),V.subscribe(Q+".interceptedUrlToStore",function(e){O.isDisplayed()&&Fn("interceptedUrlToStore$$intercept=true")}),V.subscribe(Q+".enterBackground",function(e){k.log("entered BG",k.LogLevels.info);var n="";e&&E.isDefined(e.action)&&(n="$$action="+e.action),Fn("enterBackground"+n)}),V.subscribe(Q+".pageFinished",function(){Fn("pageFinished")}),V.subscribe(Q+".enterForeground",function(e){var n="enterForeground",t=L.getContainerState();k.log("line[1070]:entered FG, webview is "+JSON.stringify(t),k.LogLevels.info),e&&E.isDefined(e.active)&&(n+="$$active="+e.active),t.engaged&&t.opened&&se.mobileSDKSettings.deviceOs===m.deviceOs.android&&!t.standalone&&(O.isDisplayed()&&tn(),Vn(!1,!1)),Fn(n)}),V.subscribe(Q+".viewableChange",function(e){var n={name:"viewableChange"};if(e&&E.isDefined(e.isViewable)){if((he=e.isViewable)&&k.StoreKitService.isStoreKitVisible())return void k.log("viewableChange true but storeKit is visible - ignored",k.LogLevels.info);k.log("viewableChange to:"+e.isViewable,k.LogLevels.info),E.isDefined(e.webview)&&"main"!==e.webview||L.setContainerVisibility(e.isViewable),n.isViewable=e.isViewable,O.isDisplayed()&&Gn(),E.isDefined(e.webview)&&(n.webview=e.webview);var t=O.getDisplayedAdType();t&&(n.productType=t),e.changeReason&&(n.changeReason=e.changeReason)}Fn(JSON.stringify(n)),e&&E.isDefined(e.isViewable)&&cn()}),V.subscribe(Q+".deviceStatusChanged",function(e){var n=v.extend({name:"deviceStatusChanged"},e);Fn(JSON.stringify(n)),p.Utils.isDefined(e.connectionType)&&(en.updateBaseData({connectionType:e.connectionType}),G="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),V.subscribe(Q+".parseBandwidth",function(e){k.log(JSON.stringify(e),3)}),V.subscribe(Q+".getBandwidthFailed",function(e){k.log(JSON.stringify(e),3),k.log("getBandwidth Failed",k.LogLevels.error)}),V.subscribe(Q+".parseUDIA",function(e,n){k.log("retrieved UDIA"+JSON.stringify(e),k.LogLevels.verbose),E.isDefined(n)&&k.callSDKFunction(n)}),V.subscribe(Q+".getUDIAFailed",function(e){k.log("Failed to retrieve UDIA",k.LogLevels.error)}),V.subscribe(_+".CacheReady",function(e){k.log("Succeeded to init BC with:"+JSON.stringify(e),k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe(_+".NoMoreOffers",function(e){k.log("BC currently has no more offers",k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe(z+".CacheReady",function(e){k.log("Succeeded to init BC with:"+JSON.stringify(e),k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe(z+".NoMoreOffers",function(e){k.log("BC currently has no more offers",k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe(z+".AllOffersVast",function(e){k.log("RV rest of the feed is Vast",k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe($+".CacheReady",function(e){k.log("Succeeded to init IS with:"+JSON.stringify(e),k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe($+".NoMoreOffers",function(e){k.log("IS currently has no more offers",k.LogLevels.info),k.callSDKFunction("adUnitsReady",e)}),V.subscribe("SDKController.GetConfig",function(e){e&&e.productType&&V.publish(e.productType+".GetConfig",[e])}),V.subscribe("SDKController.GetCompletionOffers",function(e){e&&e.productType&&V.publish(e.productType+".GetCompletionOffers",[e])}),V.subscribe("SDKController.ActionClick",function(e){e&&e.productType&&V.publish(e.productType+".ActionClick",[e])}),V.subscribe("SDKController.OpenUrl",function(e){an(["url","method"],e,"openUrl").didSucceed?(k.log("Request to open external url",k.LogLevels.info),Pn(e)):k.log("error calling open url with "+JSON.stringify(e),k.LogLevels.error)}),V.subscribe("SDKController.nativePixel",function(e){an(["url"],e,"nativePixel").didSucceed?(k.log("Request to send click in native api",k.LogLevels.info),mi(e.url)):k.log("error sending safe click "+JSON.stringify(e),k.LogLevels.error)}),V.subscribe("SDKController.FirePixel",function(e){an(["url"],e,"FirePixel").didSucceed?(k.log("Request to fire pixel from controller",k.LogLevels.info),"native"===e.type&&mi(e.url)||bi(e)):k.log("error firing pixel "+JSON.stringify(e),k.LogLevels.error)}),V.subscribe("SDKController.adEventNotification",function(e){k.log("ad notified controller with event: "+JSON.stringify(e),k.LogLevels.info),k.isLegacy(te.postAdEventNotification)?k.log("postAdEventNotification on legacy SDK version",k.LogLevels.info):an(["eventName","productType","dsName"],e,"adEventNotification").didSucceed&&hi(e.eventName,e.productType,e.dsName,e.extData)}),V.subscribe("SDKController.hideClose",function(e){var n=Dn(k.AdUtils.getAdId(e),e);if(n){var t=L.getAdFrameByProductAndId(n);t.data("close",!1),b.isFrameDisplayed(t)&&In()}else k.log("line[1196]: ERROR",k.LogLevels.error)}),V.subscribe("SDKController.AdClose",function(e){e.ignoreClick?$n():Qn()}),V.subscribe("SDKController.closeAdunit",function(e){tn(),Vn(!1)}),V.subscribe("SDKController.setBackButtonState",function(e){if(e&&e.state&&e.productType){var n="default"===e.state?we.defaultBehavior:we[e.state];e.demandSourceName?Me[e.productType][e.demandSourceName]=n:Me[e.productType]=n}}),V.subscribe("SDKController.setCloseButtonState",function(e){Yt(e)}),V.subscribe("SDKController.ScrollHeight",function(e){var n,t,i;p.Utils.isDefined(e.value)&&(n=e.value,k.log("scroll height is: "+n,k.LogLevels.info),v.when(_n()).then(function(e){i=O.getDisplayedAdType(),t=i&&"application"===Te[i]&&I.isAppOrientation("portrait")?Math.max(e.height,e.width):i&&E.isDefined(i)&&"application"===Te[i]&&I.isAppOrientation("landscape")?Math.min(e.height,e.width):e.height,n<t&&(n=t),k.log("min scroll height is: "+t+"scroll height was set to: "+n+" screen height: "+e.height,k.LogLevels.verbose),Ne.scrollHeight=n,se.mobileSDKSettings.deviceOs!==m.deviceOs.android&&v("body").css("height",Ne.scrollHeight)}))}),V.subscribe("SDKController.scrollTop",function(){k.log("scrollTop",k.LogLevels.verbose),setTimeout(function(){v("html,body").scrollTop(0)},1e3)}),V.subscribe("SDKController.getScreenSize",function(){v.when(_n()).then(function(e){Fn("screenSize$$width="+e.width+"&height="+e.height+"&orientation="+e.orientation+"&scrollTop="+e.scrollTop)})}),V.subscribe("SDKController.showNoConnectionMessage",function(){var e={productType:X,message:"You are not connected to the internet, please connect and try again.",yes:"close",no:"OK"};k.alert(e)}),V.subscribe("SDKController.GetDeviceVolume",function(e){E.isDefined(e.callback)&&Qt(e.callback)}),V.subscribe(y.serviceCallback+"."+y.AndroidEvents.onDestroy,function(e){k.log("SDKController | received event | onDestroy",k.LogLevels.verbose),un()?k.log("SDKController | onDestroy - shouldAvoidHandleFrameClose, with params: "+JSON.stringify(e),k.LogLevels.verbose):fn()}),V.subscribe(m.CB+".unauthorizedMessage",function(e){pe.trackEvent(nn.unauthorizedMessage,{generalMessage:JSON.stringify(e)}),k.log("SDKController | Failed to authorize message",k.LogLevels.error)})};function cn(){if(se.mobileSDKSettings.deviceOs===m.deviceOs.android&&20<=w.getDeviceApiLevel()){var e=n.style.backgroundColors;L.setSDKWebviewBGColor(e.black),L.setSDKWebviewBGColor(e.transparent)}}function ln(){x=Li("./videoStateHandler.js")(p.PubSub,k),N=Li("./nativeConfigHandler.js")(p.PubSub,k)}function dn(){var e={productChance:(k.getEnv(),1),protocol:se.mobileSDKSettings.protocol?se.mobileSDKSettings.protocol:"https:",baseData:{productType:"controller"}};pe=en.createEventic(e)}function un(){var e=ni(O.get());return e&&"function"==typeof e.shouldAvoidHandleFrameClose&&e.shouldAvoidHandleFrameClose()}function fn(){k.log("SDKController.js | handleFrameDestroyed",k.LogLevels.verbose),O.isDisplayed()&&tn(m.adClosedErrorReason.unexpectedCloseActivityDestroy),Vn(!1,!1),Zn()}var gn=function(){v("body").append(ze+Xe+$e+Ye);for(var e="",n=0;n<10;n++)e+=Ze;v(".loaderOW .offers").prepend(e),tt()};function pn(){V.subscribe(Q+".acknowledgeMessage",function(e){k.acknowledgeMessage(e)})}function vn(e){var n=new i(p.PubSub,k,p.Utils,Ut);p.Msg.init(k,n.handler,it),V.init();var t=Li("../SDKInterface.js");fe=new t(se.mobileSDKSettings,m,k,e),pn()}function mn(){a.init(se.mobileSDKSettings.deviceOs,fe,se.mobileSDKSettings.debug,k.PixelTrackingService.firePixel),V.subscribe("SDKController.log",function(e){E.isDefined(e.debugLevel)&&E.isDefined(e.msg)&&("string"==typeof e.msg&&(e.msg=decodeURI(e.msg)),k.log(e.msg,e.debugLevel,e.origin))})}var bn=function(){e.init(a,v,k.Cache),r.init(a,se.mobileSDKSettings,v,k.Cache,ot(),o,e,k.getEnv(),p),l.init(se.controllerConfig,a),d.init(a),O=new t(k.AdUtils),k.ProductRouter=Li("../ProductRouter.js")(p,k,m),k.ProductRouter.initModule(),k.OfferWall.init()};function hn(){k.HTTPService.init(!k.isLegacy(te.nativeHttpEngine)),k.OrientationService.init(!k.isLegacy(m.featureCompatibilityMap.appOrientationRestrictions),pe),k.GDPRService.init(!k.isLegacy(m.featureCompatibilityMap.GDPRSupport)),Sn()&&k.RingerSwitchService.init(),k.NativeLifeCycleEventsService.init(),bt(),T=new C(m,se,v),L=new g(p,k,se,m,v,k.AdUtils,k.ViewsManager,D,n,c,k.OrientationService,k.DemandUtils,b,T,k.RingerSwitchService,yn(),k.AppOrientationManager,O),(P=new h(p,k,m,v,O)).initExternalContainer(),k.AndroidNomediaFileHandler.init(pe),F=new A(p,k,m,pe,nn)}function Sn(){return!k.isLegacy(m.featureCompatibilityMap.ringerSwitch)&&se.mobileSDKSettings.deviceOs===m.deviceOs.ios&&"wk"===se.mobileSDKSettings.webviewType}function yn(){return{supportImmersive:k.isLegacy(te.supportImmersive),supportOrientation:k.isLegacy(te.supportOrientation),translucent:k.isLegacy(te.translucent),supportAdCloseCB:!k.isLegacy(te.adCloseCB)}}var Cn=function(e){var n=new v.Deferred;k.log("Products info received: "+JSON.stringify(e),k.LogLevels.info);var t,i,a,r=oe.length,o=[];for(t=0;t<r;t++)E.isDefined(e[oe[t]])||(se.applicationSettings[oe[t]]=null);for(i in e)e.hasOwnProperty(i)&&i.match(/^custom/)&&o.push(i);return st(o),(a=w.parseConfiguration(e,re,se.applicationSettings)).didSucceed?n.resolve():n.reject(a.errMsg),n.promise()},An=function(e){v.each(e.products,function(e,n){p.hasOwnProperty(n)&&E.isFunction(p[n].init)&&p[n].init()})},Dn=function(e,n){var t=null;return v.each(j,function(){return!!(k.AdUtils.getAdId(this)!=e||this.productType!==n.productType||n.demandSourceName&&this.demandSourceName!==n.demandSourceName)||(t=this,!1)}),t},In=function(){ge.addClass("ssaOnAdUnitCloseVisible")},wn=function(){ge.removeClass("ssaOnAdUnitCloseVisible")},Ln=function(e,n,t){if(En()){var i=JSON.stringify({name:"dialogBoxAboutToClose",shouldResume:e});Fn(i)}if(!n||!En())return v(".dialogBox").css("visibility","hidden"),v("#ssaDialogBoxOverlay").css("display","none"),E.isFunction(t)&&t.call(),void(b.getDisplayedAdFrame()&&Fn("showFrame"));ve.fadeOut(100,function(){v(".dialogBox").css("visibility","hidden"),v("#ssaDialogBoxOverlay").fadeOut(100,function(){E.isFunction(t)&&t.call(),b.getDisplayedAdFrame()&&Fn("showFrame")})})},Pn=function(e,n){var i,a=[],t=null,r=null;function o(){var e=O.getDisplayedAdType();O.isDisplayed()&&V.publish("SDKController.AdOpened",[{productType:e}]),n&&n.call(null)}r=V.subscribe(Q+".openUrlFailure",function(e){clearTimeout(i),rn(a),V.unsubscribe(r);var n=E.isDefined(e.errMsg)?e.errMsg:"Unknown reason for error",t=O.getDisplayedAdType()||"";pe.trackEvent(nn.openUrlError,{generalMessage:n},{productType:t}),k.log("SDK failed to open url",k.LogLevels.verbose)}),t=se.mobileSDKSettings.deviceOs===m.deviceOs.ios&&"webview"===e.method?V.subscribe(Q+".openUrlSuccess",function(){clearTimeout(i),rn(a),e.controls&&L.changeToNavigationMode(Ln,ge,Ne,Tn),o()}):V.subscribe(Q+".viewableChange",function(e){clearTimeout(i),rn(a),!E.isDefined(e.isViewable)||e.isViewable||se.mobileSDKSettings.deviceOs===m.deviceOs.android&&"main"!==e.webview||o()}),a.push(r),a.push(t),"storeKit"===e.method&&(se.mobileSDKSettings.deviceOs!==m.deviceOs.ios||k.isLegacy({ios:"5.17",android:"99"})?e.method="external_browser":e.method="store"),"webview"===e.method&&e.controls?se.mobileSDKSettings.deviceOs===m.deviceOs.android?k.callSDKFunction("openUrl",{url:e.url,method:"webview"},"openUrlSuccess","openUrlFailure"):k.callSDKFunction("openUrl",{url:e.url,method:e.method,controlFrames:Fe},"openUrlSuccess","openUrlFailure"):k.callSDKFunction("openUrl",{url:e.url,method:e.method,appId:e.appId,viewUniqueId:e.viewUniqueId},"openUrlSuccess","openUrlFailure"),i=setTimeout(function(){V.unsubscribe(t),"ios"===k.getApiData({deviceOs:1}).deviceOs&&parseFloat(k.getConfigurationHelper().getDeviceOsVersion())<8&&n&&n.call(null)},500)},Tn=function(){ge.unbind("touchend").bind("touchend",Qn),On(Le.close),be.unbind("click").bind("click",function(e){e.stopPropagation(),e.preventDefault(),V.publish("SDKController.dialogBoxResume",[O.get()]),Ln(!0,!0)})},On=function(t){me.unbind("click").bind("click",function(e){e.stopPropagation(),e.preventDefault();var n=G?t:Le.close;switch(V.publish("SDKController.dialogBoxExit",[O.get()]),n){case Le.nextFrame:Fn("moveToNextFrame"),Ln(!1,!0);break;case Le.close:O.isDisplayed()?(Fn("confirmCloseClicked"),Ln(!1,!0)):Vn(!0)}})},Fn=function(n,e){if(k.log("postAdUnitEvent | should be posting to ad unit: "+n,k.LogLevels.verbose),e)k.log("postAdUnitEvent | posting to ALL ad unit frames: "+n,k.LogLevels.verbose),v.each(v(".ssaAdUnit"),function(){p.Msg.postMessage(n,"*",this.contentWindow)}),P.checkStatusOfAdView().then(function(e){e&&e.isExternalAdViewInitiated&&P.sendMessageToExternalAdView(n)});else{var t=b.getDisplayedAdFrame(),i=O.get();i&&i.settings.viewType===m.viewTypes.externalView?P.sendMessageToExternalAdView(n):i&&t?(k.log("postAdUnitEvent | posting to DISPLAYED ad unit: "+n,k.LogLevels.verbose),p.Msg.postMessage(n,"*",t[0].contentWindow)):k.log("postAdUnitEvent | can't find displayed ad: "+n,k.LogLevels.verbose)}};function Un(){var e=O.getDisplayedAdType(),n=O.getDisplayedAdDemandName();k.log("in setDefaultBackAndCloseBehavior with product "+e+" and demand "+n,k.LogLevels.verbose),e&&(n?(ke[e][n]=ne.close,Me[e][n]=we.defaultBehavior):(ke[e]=ne.close,Me[e]=we.defaultBehavior))}function xn(e){for(var n=v("#ssaDialogBox"),t=n[0]&&n[0].className.split(" "),i=0;i<t.length;i++){var a=t[i];a!==m.styleAccordingToProtocol.secured&&a!==m.styleAccordingToProtocol.unsecured||n.removeClass(a),a.match(/template.*/)&&n.removeClass(a)}var r=se.mobileSDKSettings.protocol===m.protocol.https?m.styleAccordingToProtocol.secured:m.styleAccordingToProtocol.unsecured;n.addClass(r),e.settings.templateid&&n.addClass("template"+e.settings.templateid)}function Nn(e){e?wn():In()}function Mn(){Bn()}var kn=function(e,n){var t=v.Deferred(),i=b.getDisplayedAdFrame();return On(Le.close),L.displayContainer(e),v.when(zn(e)).then(function(){Yn(),xn(e),T.addIphoneXAdjustClass(),L.handleScreenVisible(n,i,e),t.resolve()}),t.promise()},Bn=function(){var e=O.get(),n=O.getDisplayedAdType();Se=!0,clearTimeout(Ae),e&&qn(),e&&e.settings&&k.LastSeenCampaignService.setLastDisplayedAdCampaignId(e.cid,e.settings.landingId,n),k.log("SDKController | onAdVisible",k.LogLevels.verbose),V.publish("SDKController.AdVisible",[e]),Fn("adVisible$$productType="+n)};function En(){return E.isVisible(ve)}var Vn=function(e,n){k.RingerSwitchService.isInitiated()&&k.RingerSwitchService.stopListener(),Ne.scrollHeight="",v("body").css("height",Ne.scrollHeight);var t=function(){Rn(n)};En()?Ln(!1,e,t):t()};function Rn(e){var n=function(){},t=O.get();O.reset(),e&&L.displayLoader(t.productType),k.callSDKFunction("setBackButtonState",{state:Oe.controller}),e?wn():n=Kn.bind(this,t),t?At(t,{preloadNextInBG:!e},n):(L.unloadProductFromContainer(),n())}var Kn=function(e){k.log("SDKController | ad unit close done",k.LogLevels.verbose),e&&e.settings&&e.settings.setContainerBGColorBlack&&L.setContainerBGColorTransparent(),setTimeout(function(){k.log("SDKController | closing webview with currentAd "+JSON.stringify(e),k.LogLevels.verbose),L.hideContainer(e)},250)},jn=function(n){v.each(j,function(e){return k.AdUtils.getAdId(this)!=n||(j.splice(e,1),!1)})},Wn=function(e){var n=k.AdUtils.getAdId(e);v.each(j,function(e){return k.AdUtils.getAdId(this)==n})},Gn=function(){if(!q){var e,n=O.getDisplayedAdType(),t=O.getDisplayedAdDemandName(),i=O.getDisplayedAdSettings();e=n===m.OW?i&&(i.OLXD||0===i.OLXD)?1e3*i.OLXD:m.closeAndBackDisabledTimerOW:m.closeAndBackDisabledTimer;var a={eventParam:{eName:nn.userClosedBeforeAdVisible},action:"startTiming",productType:n,demandSourceName:t};V.publish("SDKController.Analytics",[a]),Jn(),q=!0,Ae=setTimeout(function(){qn()},e)}},qn=function(){Hn(),q=!1},Jn=function(){v("#ssaNavigatorCloseButton").addClass("invisible")},Hn=function(){v("#ssaNavigatorCloseButton").removeClass("invisible")},Qn=function(){L.hideLoader(),$n();var e=O.getDisplayedAdType(),n=O.getDisplayedAdDemandName();if(!e)return tn(),void Vn(!1);if(!Se&&!q){var t={eventParam:{eName:nn.userClosedBeforeAdVisible},action:"stopTiming",productType:e,demandSourceName:n};V.publish("SDKController.Analytics",[t])}switch(et(e)){case ne.close:k.ViewsManager.waitForAllViews().then(function(){Zn(),tn(),Vn(!1)});break;case ne.confirm:On(Le.close),k.alert(nt(e,n));break;case ne.confirmNextFrame:On(Le.nextFrame),k.alert(nt(e,n));break;case ne.nextFrame:Fn("moveToNextFrame");break;case ne.ignore:}},_n=function(){var t="deviceScreenSize[width]",i="deviceScreenSize[height]",a=m.appInfo.orientation.portrait,r=m.appInfo.orientation.landscape,o=m.defaultOrientation,s=se.mobileSDKSettings[t],c=se.mobileSDKSettings[t],l=new v.Deferred;return v.when(k.OrientationService.oldGetOrientation()).then(function(e){var n=O.getDisplayedAdType();!n||o[n]!==r&&o[n]!==a||(e=o[n]),e===r&&(s=Math.max(se.mobileSDKSettings[t],se.mobileSDKSettings[i]),c=Math.min(se.mobileSDKSettings[t],se.mobileSDKSettings[i])),e===a&&(s=Math.min(se.mobileSDKSettings[t],se.mobileSDKSettings[i]),c=Math.max(se.mobileSDKSettings[t],se.mobileSDKSettings[i])),se.mobileSDKSettings.deviceOs===m.deviceOs.android&&(s/=se.mobileSDKSettings.deviceScreenScale,c/=se.mobileSDKSettings.deviceScreenScale),l.resolve({width:s,height:c,orientation:e,scrollTop:v(window).scrollTop()})}),l.promise()},zn=function(){var n,t=new v.Deferred;return he?t.resolve():n=V.subscribe(Q+".viewableChange",function(e){e&&E.isDefined(e.isViewable)&&e.isViewable&&(k.log("SDKController | viewableChange(screenVisible) to:"+e.isViewable,k.LogLevels.info),V.unsubscribe(n),t.resolve())}),t.promise()},Xn=function(e){k.AdUtils.getViewType(e)===m.viewTypes.externalView?(P.setAdIsLoadedInContainer(!0),P.onExternalViewLoaded(function(){O.set(e)},Mn)):L.onAdUnitLoaded(e,Nn,Mn)},$n=function(){k.callSDKFunction("removeCloseEventHandler",k.ViewsManager.getDisplayWebViewParams(!1))};function Yn(){k.NativeLifeCycleEventsService.startNotify(y.AndroidEvents.onDestroy)}function Zn(){k.NativeLifeCycleEventsService.stopNotify(y.AndroidEvents.onDestroy)}function et(e){var n=O.getDisplayedAdDemandName();if(e)return(n?ke[e][n]:ke[e])||Be[e]}function nt(e,n){var t=k[e];return t&&t.getConfirmCloseMsg&&t.getConfirmCloseMsg(n)||ie}var tt=function(){ge=v("#ssaNavigatorCloseButton"),ve=v("#ssaDialogBox"),me=v("#ssaDialogConfirmBtn"),be=v("#ssaDialogCancelBtn"),ue=v("#ssaViewWrap"),Tn()},it=function(){return!0},at=function(e){k.log(e,k.LogLevels.error)},rt=function(e){var n,t={};return E.isString(e)?(n=e.split(/\?(.+)/),t.name=n[0],t.parameters=e.split(/parameters=(.+)/)[1],t):null},ot=function(){return se.mobileSDKSettings.deviceOs===m.deviceOs.android?"supersonicads":"SSAPublisher"},st=function(n){v.each(se.applicationSettings,function(e){e.match(/^custom/)&&-1===v.inArray(e,n)&&delete se.applicationSettings[e]})},ct=function(){var n={};return v.each(se.applicationSettings,function(e){e.match(/^custom/)&&(n[e]=se.applicationSettings[e])}),n},lt=function(e){var n=se.mobileSDKSettings.protocol+"//"+se.mobileSDKSettings.domain+"/l/?type={{logType}}&count={{count}}&applicationKey={{applicationKey}}&applicationUserId={{applicationUserId}}&SDKVersion={{SDKVersion}}&deviceOs={{deviceOs}}&deviceOSVersion={{deviceOSVersion}}&{{customQueryString}}",t=new Image,i={},a={logType:"",count:1,applicationKey:se.applicationSettings.applicationKey,applicationUserId:se.applicationSettings.applicationUserId,SDKVersion:se.mobileSDKSettings.SDKVersion,deviceOs:se.mobileSDKSettings.deviceOs,deviceOSVersion:se.mobileSDKSettings.deviceOSVersion,customQueryString:""};e=v.extend({"deviceIds[OpenUDID]":se.mobileSDKSettings["deviceIds[OpenUDID]"],"deviceIds[IFA]":se.mobileSDKSettings["deviceIds[IFA]"],"deviceIds[IDFV]":se.mobileSDKSettings["deviceIds[IDFV]"],"deviceIds[SERIAL]":se.mobileSDKSettings["deviceIds[SERIAL]"],"deviceIds[AndroidID]":se.mobileSDKSettings["deviceIds[AndroidID]"],"deviceIds[IMEI]":se.mobileSDKSettings["deviceIds[IMEI]"]},a,e),v.each(e,function(e,n){E.isDefined(a[e])||(i[e]=n)}),v.isEmptyObject(i)||(e.customQueryString+=E.serialize(i)),t.src=E.renderTemplate(n,e)},dt=function(){var t=0;return v.each(Ie,function(e,n){n()&&(t|=De[e])}),t},ut=function(e){var t="";return E.isDefined(e)||(e=se),v.each(e,function(e,n){return!e.match(/^deviceIds/)||!E.isDefined(n)||null===n||(t=n,!1)}),t},ft=function(){var e=se.mobileSDKSettings;if(e.deviceScreenScale)try{var n=parseInt(e["deviceScreenSize[width]"])/(e.deviceOs!==m.deviceOs.ios?e.deviceScreenScale:1),t=parseInt(e["deviceScreenSize[height]"])/(e.deviceOs!==m.deviceOs.ios?e.deviceScreenScale:1);e.deviceHeightDP=parseInt(t),e.deviceWidthDP=parseInt(n)}catch(e){k.log("SDKController | Failed to parse screen DP",k.LogLevels.error)}},gt=function(){var n=new v.Deferred,t=!1,i=se.mobileSDKSettings;return U.checkIfAppInstallOnDevice(["com.google.market","com.android.vending"]).then(function(e){v.each(e,function(e,n){n.isInstalled&&(t=!0)}),i.gpi=t,n.resolve()},function(){i.gpi=t,n.reject("Unable to check if Google play services is installed on the device")}),n.promise()},pt=function(){var e,n,t,i=[],a=new v.Deferred;return e=V.subscribe(Q+".parseDeviceStatus",function(e,n){rn(i),k.log("SDKController | Device status received: "+JSON.stringify(e),k.LogLevels.info),(t=w.parseConfiguration(e,ae,se.mobileSDKSettings)).didSucceed?(k.callSDKFunction(n),I.init(se.controllerConfig.appOrientation,se.mobileSDKSettings),se.mobileSDKSettings.appOrientation=I.getOrientation(),se.mobileSDKSettings.displaySizeWidth=se.mobileSDKSettings["deviceScreenSize[width]"],se.mobileSDKSettings.displaySizeHeight=se.mobileSDKSettings["deviceScreenSize[height]"],ft(),T.adjustSizeForIphoneX(),ri(se.mobileSDKSettings),a.resolve()):a.reject(t.errMsg)}),i.push(e),n=V.subscribe(Q+".getDeviceStatusFailed",function(e){rn(i),at(e),a.reject(Z.device)}),i.push(n),k.callSDKFunction("getDeviceStatus",{},"parseDeviceStatus","getDeviceStatusFailed"),a.promise()};function vt(e){if(e){var n=E.sortDataByDateKey(e);if(1<n.length){var t=n[1]?new Date(n[1][0]).getTime():n[0]?new Date(n[0][0]).getTime():null;isNaN(t)||(se.mobileSDKSettings.androidIsVersion=t)}}k.log("SDKController | androidIsVersion "+se.mobileSDKSettings.androidIsVersion,k.LogLevels.info)}var mt=function(){var e,n,t=[],i=new v.Deferred;return k.isLegacy(te.androidIsVersion)?i.resolve():(e=V.subscribe(Q+".handleAppsInstallTimeSuccess",function(e,n){rn(t),vt(e),i.resolve()}),t.push(e),n=V.subscribe(Q+".handleAppsInstallTimeFailed",function(e){rn(t),i.reject()}),t.push(n),k.callSDKFunction("getAppsInstallTime",{systemApps:"false"},"handleAppsInstallTimeSuccess","handleAppsInstallTimeFailed")),i.promise()},bt=function(){se.mobileSDKSettings.deviceOs!==m.deviceOs.ios&&k.callSDKFunction("setStoreSearchKeys",{searchKeys:xe[se.mobileSDKSettings.deviceOs]})},ht=function(e){return E.isDefined(se[e])&&null!==se[e]||E.isDefined(se.applicationSettings[e])&&null!==se.applicationSettings[e]||E.isDefined(se.mobileSDKSettings[e])&&null!==se.mobileSDKSettings[e]||E.isDefined(se.controllerConfig[e])&&null!==se.controllerConfig[e]||E.isDefined(se.configMapping[e])&&null!==se.configMapping[e]()},St=function(e){return E.isDefined(ce[e])},yt=function(e){var n;return E.isDefined(se[e])?n=se[e]:E.isDefined(se.applicationSettings[e])?n=se.applicationSettings[e]:E.isDefined(se.mobileSDKSettings[e])?n=se.mobileSDKSettings[e]:E.isDefined(se.controllerConfig[e])?n=se.controllerConfig[e]:E.isDefined(se.configMapping[e])?n=se.configMapping[e]():"customParam"===e&&(n=ct()),n},Ct=function(){var e,n,t=[],o=new v.Deferred;return e=V.subscribe(Q+".parseCachedFilesMap",function(e,n){var t,i,a,r={};(a=an(["path"],e,"parseCachedFileMap")).didSucceed?(t=decodeURIComponent(e.path).split("/"),""!==e.path?r[i=t[t.length-1]]=E.isDefined(e[i])?e[i]:e:r=e,k.log("SDKController | successfully received files map:"+JSON.stringify(e),k.LogLevels.info),delete e.path,Ft(r).then(function(e){return k.log("SDKController | Finished purging cache on controller init, calling init with sorted:"+JSON.stringify(B.cachePriorityArray),k.LogLevels.verbose),k.log("SDKController | The file map after:"+JSON.stringify(e),k.LogLevels.verbose),k.Cache.init(e,B.cachePriorityArray)}).then(function(){k.log("SDKController | Cache module initiated",k.LogLevels.info),k.callSDKFunction(n),o.resolve()}).fail(function(e){e="SDKController | Cache module failed to initiated",k.log(e,k.LogLevels.error),o.reject(e)})):o.reject(a.errMsg)}),t.push(e),n=V.subscribe(Q+".getCachedFilesMapFailed",function(e){k.log("SDKController | failed to receive files map:"+e,k.LogLevels.error),o.reject(Z.filemap)}),t.push(n),k.callSDKFunction("getCachedFilesMap",{path:""},"parseCachedFilesMap","getCachedFilesMapFailed"),o.promise()},At=function(n,t,i){t=t||{preloadNextInBG:!0},L.unloadAdFrame(n),jn(k.AdUtils.getAdId(n));var a=ni(n),r=!1;p.Utils.isFunction(a.prepareAdToEngageEnd)&&a.prepareAdToEngageEnd(n).then(function(){r=a.getNextAd(!t.preloadNextInBG,n.inventoryId)}),k.log("engageEnd on controller with :"+n.engaged,k.LogLevels.verbose),p.PubSub.publish("SDKController.engageEnd",[n,function(){n.engaged&&L.unloadProductFromContainer(n);var e=!t.preloadNextInBG;p.Utils.isFunction(a.attemptToPreloadAd)&&r&&a.attemptToPreloadAd(e,n.inventoryId),i&&i(),x.getState()===ee.play&&x.handleOnEngageEnd(n)}])},Dt=function(){k.callSDKFunction("toggleUDIA",{toggle:dt()})},It=function(){k.callSDKFunction("getUDIA",{getByFlag:dt(),2:1},"parseUDIA","getUDIAFailed")},wt=function(){var e=Oe.controller;return se.mobileSDKSettings.deviceOs===m.deviceOs.android&&10==w.getDeviceApiLevel()&&(e=Oe.device),e},Lt=function(e){return Pt(e),Ot(e),Tt(e),e&&e.applicationKey&&(se.applicationSettings.applicationKey=e.applicationKey),w.parseConfiguration(e,re,se.applicationSettings)},Pt=function(e){var n,t=oe.length;for(n=0;n<t;n++)E.isDefined(e[oe[n]])||(se.applicationSettings[oe[n]]=null)},Tt=function(e){var n,t=[];for(n in e)e.hasOwnProperty(n)&&n.match(/^custom/)&&t.push(n);st(t)};function Ot(e){e.moatSupported=k.MOATService.isInitialized()}function Ft(a){var e,r,n,o=[],t=new v.Deferred,s=[],c=["temp","files","assets","libs","graphicAssets"],i=function(){var n=new v.Deferred,t=0;function i(){var e;(e=new v.Deferred,0<s.length&&v.each(s,function(e,n){B.cachePriorityArray&&B.cachePriorityArray[n]&&delete B.cachePriorityArray[n],delete a[n]}),"0"!==B.controllerVersion?(B.controllerVersion=se.v,k.setGlobalAppData(B).then(function(){e.resolve()},function(){e.reject("NewController: Save app global data failed")})):e.resolve(),e.promise()).then(function(){n.resolve(a)},function(e){n.reject(e)}),rn(o)}return e=V.subscribe(Q+".deleteFolderSuccess",function(){k.log("NewController: A new controller version detected. Folder deleted successfully",k.LogLevels.verbose),++t>=s.length&&i()}),r=V.subscribe(Q+".deleteFolderFailed",function(e){if(rn(o),p.Utils.isDefined(e.errCode)&&1==e.errCode)k.log("NewController: The folder requested for deletion was not found. Continue...",k.LogLevels.verbose),++t>=s.length&&i();else{rn(o),n.reject("NewController: Purge cache for new controller version failed.")}}),function(){var e="purgeCampaignsCache",n="purgeGlobalsCache",t=se.mobileSDKSettings;if(t.hasOwnProperty(e)&&!1===t[e])for(var i in a)-1===i.indexOf("RewardedVideo")&&-1===i.indexOf("Interstitial")||c.push(i);t.hasOwnProperty(n)&&!1===t[n]&&c.push("globals")}(),o.push(e),o.push(r),v.each(a,function(e,n){-1===c.indexOf(e)&&s.push(e)}),k.log(s+JSON.stringify(s),k.LogLevels.verbose),0<s.length?v.each(s,function(e,n){k.deleteFolder(n)}):i(),n.promise()};return function(){if(k.isLegacy(te.userData)){k.log("NewController: Old controller version. UserData is not supported. Will purge anyway",k.LogLevels.verbose);var e=new v.Deferred;return e.resolve({controllerVersion:"0"}),e}return k.getGlobalAppData()}().then(function(e){k.log("SDKController | getGlobalAppData: "+JSON.stringify(e),k.LogLevels.verbose),n=(B=e).controllerVersion,E.isDefined(n)&&n!==se.v||!E.isDefined(n)?(k.log("NewController: A new controller version detected. Purging cache... old: "+n+"new: "+se.v,k.LogLevels.verbose),je=!0,i().then(function(e){t.resolve(e)},function(){t.reject()})):(k.log("NewController: Controller version did not change. Saved version: "+n+" Current version: "+se.v,k.LogLevels.verbose),t.resolve(a))},function(){k.log("SDKController | getGlobalAppData: failed! ",k.LogLevels.verbose),t.reject("getGlobalAppData: failed! ")}),t.promise()}function Ut(n){return function(e){Fn(JSON.stringify({data:e,id:n}),!0)}}function xt(){return se.controllerConfig&&void 0!==se.controllerConfig.abTest?se.controllerConfig.abTest:-4}function Nt(e){Re||k.getApplicationInfo(e).then(null,function(){var e=v.Deferred();return e.resolve(k.getConfig()),e.promise()}).always(function(e){var n=Mt(e);en.init(n),Re=!0})}function Mt(e){var n=-1;try{n=parseInt(w.getDeviceApiLevel())}catch(e){k.log("getEventicsBaseData | Error converting deviceApiLevel to Integer "+e,k.LogLevels.verbose)}return{sdkVersion:e.mobileSDKSettings.SDKVersion,controllerVersion:e.v,bfn:sonicVersionByConfig.buildNumber,bundleId:e.mobileSDKSettings.bundleId,connectionType:e.mobileSDKSettings.connectionType,applicationKey:e.applicationSettings.applicationKey,deviceId:ii(e.mobileSDKSettings),applicationUserId:e.applicationSettings.applicationUserId,deviceOs:e.mobileSDKSettings.deviceOs,deviceOsVersion:w.getDeviceOsVersion(),deviceApiLevel:n,deviceOEM:e.mobileSDKSettings.deviceOEM,deviceModel:e.mobileSDKSettings.deviceModel,appOrientation:I.getOrientation(),env:wi.getEnv(),lat:"true"===e.mobileSDKSettings.isLimitAdTrackingEnabled,abTest:xt(),usertype:e.userType}}function kt(){var e;switch(window.orientation){case-90:case 90:e="landscape";break;default:e="portrait"}return e}function Bt(){countViewport<10&&setTimeout(function(){addViewportFixMeta(),countViewport++,Bt()},100)}function Et(e,n){var t,i=[],a=new v.Deferred,r=n.length;for(t=0;t<r;t++)i.push(Vt(e,n[t]));return v.when.apply(null,i).always(function(){k.deleteFolder(e),a.resolve(0)}),a.promise()}function Vt(a,r){var o=new v.Deferred,e=function(e){var n={timingValue:(new Date).getTime()-void 0,success:e},t=n.success?nn.cdnABTestSuccess:nn.cdnABTestFail,i={eNameStart:nn.cdnABTestSuccess,timingValue:n.timingValue,rvnomoreoffersreason:a,generalMessage:r};pe.trackTimingStop(t,i),o.resolve()};return pe.trackTimingStart(nn.cdnABTestSuccess),k.cacheAsset(a,r).then(e.bind(null,!0),e.bind(null,!1)),o.promise()}function Rt(){try{var e=Ee,t=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},n=(r=c.getExtConfig()).Interstitial&&r.Interstitial.abtest&&r.Interstitial.abtest[3e3]&&r.Interstitial.abtest[3e3].cdnPercent?r.Interstitial.abtest[3e3].cdnPercent:0;if(0<n&&t(0,100)<n&&se&&se.controllerConfig&&"CN"===se.controllerConfig.country){var i=e.cdns,a=function(){if(0!==i.length){var e=t(0,i.length-1),n=i[e];i.splice(e,1),Et(n.cdnName,n.assets).then(a)}};a()}}catch(e){k.log("_manageCdnABTest | catch: "+e,k.LogLevels.verbose),pe.trackEvent(nn.cdnABTestException,null,{generalMessage:e})}var r}function Kt(i){var a=new v.Deferred,e=function(e){var n=e?nn.latencyTestSuccess:nn.latencyTestFail,t={eNameStart:nn.latencyTestSuccess,generalMessage:i.url};pe.trackTimingStop(n,t),a.resolve()};return pe.trackTimingStart(nn.latencyTestSuccess),v.ajax({url:i.url,type:i.method?i.method:"GET",cache:!0,timeout:6e4}).then(e.bind(null,!0),e.bind(null,!1)),a.promise()}function jt(){try{var e=Ve,t=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},n=(r=c.getExtConfig()).Interstitial&&r.Interstitial.abtest&&r.Interstitial.abtest[5e3]&&r.Interstitial.abtest[5e3].latencyTestPercent?r.Interstitial.abtest[5e3].latencyTestPercent:0;if(0<n&&t(0,100)<n){var i=e,a=function(){if(0!==i.length){var e=t(0,i.length-1),n=i[e];i.splice(e,1),Kt(n).then(a)}};a()}}catch(e){k.log("_manageLatencyABTest | catch: "+e,k.LogLevels.verbose),pe.trackEvent(nn.latencyTestException,null,{generalMessage:e})}var r;return p.Utils.returnResolvedPromise()}function Wt(){if(K&&"rejected"!==K.state())return p.Utils.returnResolvedPromise();var e="prod"===k.getEnv()?Je:He,n=k.getBaseCdnUrl()+e;return K=v.ajax({url:n,type:"GET",dataType:"jsonp",cache:!0,jsonpCallback:"getExtConfig",timeout:2e4}).then(function(e,n,t){k.log("SDKController | MicroJob | Got Application configuration"+JSON.stringify(e)),c.setConfig(e);var i=e&&e.general&&e.general.eventProb||0;_e=Qe<i},function(e,n,t){var i="SDKController | MicroJob | Failed to receive configuration from server "+t;k.log(i,k.LogLevels.verbose),pe.trackEvent(nn.getExternalApplicationConfigurationError,{generalMessage:i})}).then(jt).then(Rt),p.Utils.returnResolvedPromise()}function Gt(e){var n;k.isLegacy(k.featureMap.MOAT)||((n=e)&&n.moat&&n.moat===m.moat.disabled||(k.MOATService.initWithOptions(),p.PubSub.subscribe("SDKController.MOATStartTracking",function(){k.MOATService.createAdTracker(),k.MOATService.startTracking()}),p.PubSub.subscribe("SDKController.MOATStopTracking",function(){k.MOATService.stopTracking()})))}function qt(){if(R&&"rejected"!==R.state())return R;var e=k.apiWithCdn()+qe,n=(k.getConfig().mobileSDKSettings.deviceOs,k.getApiData({bundleId:1,deviceOs:1}));if(n.errMsg)return p.Utils.returnRejectedPromise(n.errMsg);if(!n.bundleId)return p.Utils.returnRejectedPromise("Missing bundleId");if(!n.deviceOs)return p.Utils.returnRejectedPromise("Missing deviceOs");var i="Failed to receive configuration from server";return R=v.ajax({url:e,data:n,type:"GET",dataType:"jsonp",cache:!0,jsonpCallback:"getAppConfigReqCallBack",timeout:2e4}).then(function(e,n,t){return e&&e.errorCode?p.Utils.returnRejectedPromise(e.errorMessage||i):(k.log("Got application configuration from server"),p.Utils.returnResolvedPromise(e))},function(e,n,t){return p.Utils.returnRejectedPromise(n||i)}).then(k._parseReceivedApplicationConfiguration,function(e){return k.log("Failed to get application configuration from server - "+e,k.LogLevels.verbose),pe.trackEvent(nn.getApplicationConfigurationError,{generalMessage:e}),p.Utils.returnResolvedPromise()})}function Jt(e){Ge=e||{},e&&e.generalConfiguration&&e.generalConfiguration.applicationKey&&!se.applicationSettings.applicationKey&&(se.applicationSettings.applicationKey=e.generalConfiguration.applicationKey),e&&e.offerWallConfiguration&&(e.offerWallConfiguration.baseServerUrl&&(se.mobileSDKSettings.baseServerUrl=e.offerWallConfiguration.baseServerUrl),e.offerWallConfiguration.serverType&&(se.mobileSDKSettings.serverType=e.offerWallConfiguration.serverType))}function Ht(){return Ge.offerWallConfiguration||{}}function Qt(n){if(!k.isLegacy(te.MOAT)){var e="deviceVolumeSuccess";V.subscribe(Q+"."+e,function(e){k.log("Device volume received: "+(e?JSON.stringify(e):"empty"),k.LogLevels.verbose),n&&e&&n.call(null,{deviceVolume:e.deviceVolume||"0"})}),k.callSDKFunction("getDeviceVolume",{},e,e)}}function _t(){var t,i,a=new v.Deferred;return t=V.subscribe(Q+".getDebugParamsSuccess",function(e){k.log("getDebugParamsSuccess "+JSON.stringify(e),k.LogLevels.verbose);try{var n={};se.mobileSDKSettings.deviceOs===m.deviceOs.android?n=E.parseJSON(decodeURIComponent(e.SDK5DebugParams)):"object"==typeof e.SDK5DebugParams&&(n=e.SDK5DebugParams),a.resolve(n)}catch(e){k.log("getSDKDebugParams | getDebugParamsSuccess | parseJSONFailed |"+e,k.LogLevels.verbose),a.reject("failed to parse received SDK5 params")}rn([t,i])}),i=V.subscribe(Q+".getDebugParamsFailed",function(e){var n="failed to get debug param";k.log("getSDKDebugParams | getDebugParamsFailed | "+n,k.LogLevels.verbose),a.reject(n),rn([t,i])}),k.callSDKFunction("getUserData",{key:"SDK5DebugParams"},"getDebugParamsSuccess","getDebugParamsFailed"),a.promise()}function zt(n){var t=new v.Deferred;return _t().then(function(e){return p.Utils.returnResolvedPromise(v.extend(n,e))}).always(function(e){t.resolve(e||n)}),t.promise()}function Xt(e){var n="false";!0===e&&(n="true"),k.callSDKFunction("setAllowFileAccessFromFileURLs",{allowFileAccess:n})}function $t(){return se.mobileSDKSettings&&se.mobileSDKSettings.bundleId&&-1!==m.testAppBundleIds.indexOf(se.mobileSDKSettings.bundleId)}function Yt(e){k.log("setCloseButtonState params "+JSON.stringify(e),k.LogLevels.verbose),e&&e.state&&e.productType&&(e.demandSourceName?ke[e.productType][e.demandSourceName]=ne[e.state]:ke[e.productType]=ne[e.state])}function Zt(){if(!Ke){var e=k.getApiData(s.deviceDataRequestObject);e&&0<Object.keys(e).length&&(Ke={os:e.deviceOs,osv:e.deviceOSVersion,apilvl:w.getDeviceApiLevel(),sdkv:e.SDKVersion,webviewType:se.mobileSDKSettings.webviewType})}return Ke||{}}function ei(){var e;return se.controllerConfig&&!0===se.controllerConfig.isSecured?e=m.protocol.https:se.mobileSDKSettings.deviceOs===m.deviceOs.android?e=m.protocol.http:se.mobileSDKSettings.deviceOs===m.deviceOs.ios&&(se.mobileSDKSettings.deviceOSVersion&&0<=E.versionCompare(se.mobileSDKSettings.deviceOSVersion,"10")?se.mobileSDKSettings.allowArbitraryLoadsInWebContent?(e=m.protocol.http,M=!0):se.mobileSDKSettings.allowArbitraryLoads?e=m.protocol.http:(e=m.protocol.https,M=!0):e=se.mobileSDKSettings.allowArbitraryLoads?m.protocol.http:m.protocol.https),e}function ni(e){var n=null;return e?(e.productType&&(n=k[e.productType],e.demandSourceName&&n&&(n=n[e.demandSourceName])),n):null}function ti(e){var n={class:"ssaAdUnit ",selector:".ssaAdUnit"};return e&&e.productType?(n.class+=e.productType+" ",n.selector+="."+e.productType,e.demandSourceName&&(n.class+=e.demandSourceName+" ",n.selector+="."+e.demandSourceName)):k.log("In getAdUnitClass with no ad",k.LogLevels.error),n}function ii(e){return e.deviceOs===m.deviceOs.ios?ai(e):e["deviceIds[AID]"]}function ai(e){return 0<=E.versionCompare(e.deviceOSVersion,"10")&&"true"===e.isLimitAdTrackingEnabled?e["deviceIds[IDFV]"]:e["deviceIds[IFA]"]}var ri=function(e){e.deviceOs!==m.deviceOs.ios||-1!==E.versionCompare(e.deviceOSVersion,"10")&&"false"!==e.isLimitAdTrackingEnabled||(e["deviceIds[IDFV]"]=null)};function oi(){var e=k.Cache.getCacheByType({cacheBase:"assets"}),n=se.mobileSDKSettings.jQueryUrls;e&&-1<k.Cache.getFileIndexInCache(e.cache,n[0])?k.log("jQuery file already cache",k.LogLevels.verbose):(k.log("Start save jQuery to cache",k.LogLevels.verbose),k.cacheAsset("assets",n).then(function(){k.log("jQuery file saved successfully",k.LogLevels.verbose)},function(){k.log("jQuery file cache failed",k.LogLevels.verbose)}))}function si(){var e=se.mobileSDKSettings.controllerPathFolder+se.v,n=k.Cache.getCacheByType({cacheBase:e});n&&-1<k.Cache.getFileIndexInCache(n.cache,se.mobileSDKSettings.controllerJSUrl)?k.log("controller js file already cache",k.LogLevels.verbose):li(e,se.mobileSDKSettings.controllerJSUrl)}function ci(){var e=se.mobileSDKSettings.controllerPathFolder+se.v,n=k.Cache.getCacheByType({cacheBase:e}),t=se.mobileSDKSettings.rootPath+de,i=se.mobileSDKSettings.cacheFolderPath+"/"+le;n&&-1<k.Cache.getFileIndexInCache(n.cache,t)?di(i):li(e,t).then(function(){k.log("updateControllerCssToCache - cache css file succeeded",k.LogLevels.verbose),di(i)},function(){k.log("updateControllerCssToCache - cache css file failed",k.LogLevels.verbose),di(t)})}function li(e,n){return k.log("Start saving file to cache, url: "+n,k.LogLevels.verbose),k.cacheAsset(e,n).then(function(){k.log("File saved successfully",k.LogLevels.verbose)},function(e){return k.log("File cache failed: "+e,k.LogLevels.verbose),e})}function di(e){var n=v("head");0<v("#ssaMobileControllerCss").length||n.prepend('<link rel="stylesheet" id="ssaMobileControllerCss" type="text/css" />'),v("#ssaMobileControllerCss").attr("href",e)}function ui(){oi(),si(),ci(),se.mobileSDKSettings.deviceOs===m.deviceOs.android&&k.AndroidNomediaFileHandler.updateNomediaFileToCache()}function fi(n){if(!n)return p.Utils.returnRejectedPromise("productType is empty");var e=null,t=null,i=new v.Deferred,a="getUserUniqueIdSuccess",r="getUserUniqueIdFailure";function o(){p.PubSub.unsubscribe(e),p.PubSub.unsubscribe(t)}return e=p.PubSub.subscribe(Q+"."+a,function(e){e&&e.productType===n&&(k.log("succeeded to get "+n+" unique user "+JSON.stringify(e),k.LogLevels.verbose),o(),i.resolve(e))}),t=p.PubSub.subscribe(Q+"."+r,function(e){e&&e.productType===n&&(k.log("failed to get "+n+" unique user",k.LogLevels.verbose),o(),pe.trackEvent(nn.getUserUniqueIdFailure),i.reject(e))}),k.callSDKFunction("getUserUniqueId",{productType:n},a,r),i.promise()}function gi(e){if(!e)return p.Utils.returnRejectedPromise("productType empty");var n=null,t=null,i=new v.Deferred;function a(){p.PubSub.unsubscribe(n),p.PubSub.unsubscribe(t)}return n=p.PubSub.subscribe(Q+".setUserUniqueIdSuccess",function(e){k.log("succeeded to set RV unique user",k.LogLevels.verbose),a(),i.resolve()}),t=p.PubSub.subscribe(Q+".setUserUniqueIdFailure",function(e){k.log("failed to set RV unique user",k.LogLevels.verbose),a(),pe.trackEvent(nn.setUserUniqueIdFailure),i.reject("Failed to set user unique id")}),k.callSDKFunction("setUserUniqueId",{userUniqueId:k.getFixedUserIdForCache(),productType:e},"setUserUniqueIdSuccess","setUserUniqueIdFailure"),i.promise()}function pi(n){if(!n)return p.Utils.returnRejectedPromise("productType is empty");if(se.mobileSDKSettings.deviceOs===m.deviceOs.ios)return p.Utils.returnResolvedPromise();var e=new v.Deferred;return n===z&&k.isLegacy(k.featureMap.MDS[m.RV])&&(n=_),fi(n).then(function(e){if(!e||!e.userUniqueId)return k.log("UserId in "+n+"is empty. try to set default userId",k.LogLevels.verbose),We[n]=!0,gi(n)}).always(function(){e.resolve()}),e.promise()}function vi(){li(se.mobileSDKSettings.assetsCachePath,"http://local.ssacdn.com/users/staging/local/adunit/dist/assets/obfuscators/obfuscateV1.4bdd1f85.html").then(function(){k.log("downloadObfuscator - cache obfuscateV1 succeeded",k.LogLevels.verbose)},function(){k.log("downloadObfuscator - cache obfuscateV1 failed",k.LogLevels.verbose)})}function mi(e){if(!k.HTTPService.getIsNativeEngineExist())return!1;return k.HTTPService.GETRequest(e,{allowNative:!0,background:!0,retries:3}),!0}function bi(e){k.PixelTrackingService.firePixel(e)}function hi(e,n,t,i){var a,r,o=new v.Deferred,s=[];if(!E.isString(e)||!E.isString(n))return E.returnRejectedPromise("missing or corrupted params");a=V.subscribe(Q+".postAdEventNotificationSuccess",function(e){k.log("postAdEventNotificationSuccess"+JSON.stringify(e),k.LogLevels.info),rn(s),o.resolve()}),s.push(a),r=V.subscribe(Q+".postAdEventNotificationFailed",function(e){var n=e.errMsg?e.errMsg:"unknown reason";k.log("error calling postAdEventNotificationFailed: "+n,k.LogLevels.error),rn(s),o.reject(n)}),s.push(r);var c={eventName:e,dsName:t,productType:n,extData:i||{}};return k.log("Controller - Notifies SDK on Event: "+c.eventName+" in Product: "+c.productType,k.LogLevels.info),k.callSDKFunction("postAdEventNotification",c,"postAdEventNotificationSuccess","postAdEventNotificationFailed"),o.promise()}function Si(e){var n,t=v("#ssaDialogBox");switch(e){case"template4":n={dialogText:{maxFontPixels:29,maxHeight:87,parentContainer:t},buttonText:{maxFontPixels:24,maxHeight:43,maxWidth:yi(e).maxDialogBtnTextWidth,parentContainer:me}};break;default:n={dialogText:{maxFontPixels:24,maxHeight:87,parentContainer:t},buttonText:{maxFontPixels:20,maxHeight:44,maxWidth:yi(e).maxDialogBtnTextWidth,parentContainer:me}}}return n}function yi(e){return m.templateStyle[e]?m.templateStyle[e]:m.templateStyle.defaultTemplate}function Ci(){var t="",e=v("#ssaDialogBox"),n=e[0]&&e[0].classList;return v.each(n,function(e,n){n.match(/template.*/)&&(t=n)}),t}function Ai(e,n,t,i){p.PubSub.publish(Q+"."+e,[n,t,i])}function Di(){for(;0<nativeQueue.length;){var e=nativeQueue.shift();Ai(e.name,e.parameters,e.successCallback,e.errorCallback)}}function Ii(e){return k.SDKLimitations.getLimitData(e)}window.onerror=function(e,n,t,i,a){try{if(!a||!a.message)return;var r={url:n,lineNo:t,colNo:i,error:a&&a.message.substring(0,500)||""};Re&&_e&&pe.trackEvent(nn.controllerException,{generalMessage:e},{rvnomoreoffersreason:JSON.stringify(r)}),k.log("onError handler. Exception:"+JSON.stringify(r),k.LogLevels.verbose)}catch(e){}};var wi={adUnitGlobals:r,adUnitLibsManager:e,adUnitUrl:o,LogLevels:{none:0,error:1,info:2,verbose:3},featureMap:te,debugMsg:a.debugMsg,decideUrlProtocolAccordingToHTTPSCompliance:ei,instancesManager:l,blacklistService:d,jQuery:function(){return v},api:function(){return ei()+"//"+se.mobileSDKSettings.domain},apiWithCdn:function(){return se.mobileSDKSettings.protocol+"//"+se.mobileSDKSettings.serviceCdn},getBaseCdnUrl:function(){return se.mobileSDKSettings.protocol+"//"+se.mobileSDKSettings.cdn},getBaseServerUrl:function(){return se.mobileSDKSettings.baseServerUrl&&k.getEnv()===m.environment.production?se.mobileSDKSettings.protocol+"//"+se.mobileSDKSettings.baseServerUrl:""},getServerType:function(){return se.mobileSDKSettings.serverType||"new"},init:function(e,n){var t;return k=this,v=window.jQuery,U=Li("../../components/CampaignsFilter.js")(p,k).factory("Controller"),W||(v.extend(se.mobileSDKSettings,e.mobileSDKSettings),v.extend(se.controllerConfig,e.controllerConfig),se.mobileSDKSettings.overrideDebug&&(se.mobileSDKSettings.debug=se.mobileSDKSettings.defaultDebug),k.APIConfigurations.init(),w=new u(se,v,p.Utils,m),I=k.AppOrientationManager,D=new f(a,m,I),vn(n),mn(),t=mt(),dn(),on(),gn(),bn(),hn(),sn(),ln(),Gt(se.controllerConfig),k.log("Controller initiated",k.LogLevels.info),N.setNativeConfiguration(S.native[se.mobileSDKSettings.deviceOs]),v.when(pi(z),pi($),pi(Y)).then(function(){v.when(pt(),Ct()).then(function(){r.setProtocol(ei()),window.queueValidMessages={},Di()},function(e){k.callSDKFunction("initController",{stage:"failed",errMsg:e})}).then(Wt).then(function(){v.when(k._getApplicationConfigurationFromServer(),ui(),gt(),t).always(function(){var e={gpi:se.mobileSDKSettings.gpi};se.mobileSDKSettings.androidIsVersion&&(e.androidIsVersion=se.mobileSDKSettings.androidIsVersion),F.updateToken(e)})}).fail(function(e){e?k.log(e,k.LogLevels.verbose):k.log("failed promise on get app config",k.LogLevels.verbose)})}),Dt(),It(),W=!0),W},getConfigurationHelper:function(){return w},initProducts:function(t){v.each(t.products,function(e,n){k[n].init(t[n])})},getAPIRequiredData:function(){var e=k.APIConfigurations.getCommonRequiredData(),n=k.getApiData(e),t=new v.Deferred;return n&&n!=={}?p.Utils.isDefined(n.errMsg)?t.reject(n.errMsg):t.resolve(n):t.reject("Failed to get required parameters"),t.promise()},getApiData:function(e){var n,t={};for(n in e)if(e.hasOwnProperty(n)){if(1===e[n]&&!ht(n)&&!St(n)){t={errMsg:Z.missing+n};break}ht(n)?t[n]=yt(n):"customParams"===n?v.extend(t,ct()):St(n)&&(t[n]=ce[n]())}return t},getSDKDataByKey:function(e){return yt(e)},runFunction:function(e,n,t){var i=rt(e);if(queueValidMessages[i.name])nativeCommunicator.runFunction(e,n,t);else{if("acknowledgeMessage"!==i.name||!window.shouldReportReady){var a,r=!0;a=E.parseJSON(i.parameters);try{E.isDefined(i.name)&&Ai(i.name,a,n,t)}catch(e){k.log("error running function:"+i.name+", error:"+e,k.LogLevels.error),r=!1}return r}nativeCommunicator.runFunction(e,n,t)}},callSDKFunction:function(e,n,t,i){if(E.isString(e)&&""!==e&&k){k.DemandUtils&&k.DemandUtils.isManualRewardedVideoIntegration()&&n&&(n=k.DemandUtils.setManualRewardedVideoTypeForNative(n));var a=E.isDefined(t)&&E.isString(t)?t:"",r=E.isDefined(i)&&E.isString(i)?i:"";k.postMessage({eventName:e,parameters:v.extend({success:a,fail:r},n)})}},callSDKService:function(e,n,t,i,a){t&&(t.functionName=n),k.callSDKFunction(e,t,i,a)},postMessage:function(e,n,t){e.prefix=J,E.isDefined(e.parameters)||(e.parameters={}),v.extend(e.parameters,{acknowledgeWith:E.isDefined(n)?n:H,declineWith:E.isDefined(t)?t:"errorTest"}),fe.postMessage(e)},acknowledgeMessage:function(e){fe.acknowledgeMessage(e)},getApplicationInfo:function(a,e){var t,i,r=v.Deferred(),o=function(e,n){rn([t,i]),e?r.resolve(se):r.reject(Z.appInfo,n)};if(t=V.subscribe(Q+".parseApplicationInfo",function(e,n,t){var i;E.isDefined(e.productType)&&e.productType!==a.productType&&e.demandSourceName!==a.demandSourceName?k.log("application info send for the wrong product",k.LogLevels.verbose):(k.log("App info received: "+JSON.stringify(e),k.LogLevels.info),delete e.productType,delete e.demandSourceName,(i=Lt(e)).didSucceed?(E.isDefined(n)&&k.callSDKFunction(n),o(!0)):(E.isDefined(t)&&k.callSDKFunction(t,{errMsg:i.errMsg}),o(!1,i.errMsg)))}),i=V.subscribe(Q+".getApplicationInfoFailed",function(e){at(e),o(!1,"Failed retrieving application info")}),E.isDefined(e)&&e){var n=Lt(e);n.didSucceed?o(!0):(k.log(n.errMsg,k.LogLevels.error),o(!1,n.errMsg))}else k.callSDKFunction("getApplicationInfo",a,"parseApplicationInfo","getApplicationInfoFailed");return r.promise()},setCloseButtonState:Yt,getEnv:function(){m.environment.production;return se.mobileSDKSettings.debug&&0<parseInt(se.mobileSDKSettings.debug)&&se.mobileSDKSettings.domain!==m.domainUrls.prod?se.mobileSDKSettings.domain===m.domainUrls.local?m.environment.develop:m.environment.stage:m.environment.production},getProtocol:function(){return se.mobileSDKSettings.protocol},isLegacy:function(e){var n=-1;try{var t="android"===se.mobileSDKSettings.deviceOs?e.android:e.ios;n=E.versionCompare(se.mobileSDKSettings.SDKVersion,t)}catch(e){k.log(e,k.LogLevels.error)}return k.log("isLegacy: "+(n<0)+" Feature: "+JSON.stringify(e),k.LogLevels.verbose),n<0},getFixedUserIdForCache:function(){return"UniqueUser"},setFixedUserIdForCache:gi,cacheAdUnitAssets:function(n,e){var t,i=e.assets,a=e.lastUpdateTime,r=i.length,o=new v.Deferred,s=[],c=0;for(0===r&&o.resolve(0),t=0;t<r;t++)s.push(k.cacheAsset(n,i[t],a));return v.when.apply(null,s).always(function(){var e=arguments;for(t in e)k.log("path: "+n+" res: "+e[t],3),e[t]&&c++;o.resolve(c)}),o.promise()},cacheAsset:function(n,t,e,i){var a,r,o,s=[],c=new v.Deferred;if(E.isString(t)&&(t=[t]),"device"===se.applicationSettings.preCache){var l,d={path:E.isString(n)?n:n.toString(),overrideExistingFile:i},u=-1,f=function(e){c.reject(e),rn(s)},g=function(e){++u>=t.length?f(e||"Index error in array assets url"):(l=t[u],d.file=M?E.changeUrlProtocol(l,m.protocol.https):l,k.log("trying to save file: "+d.file+". To path: "+decodeURIComponent(d.path),k.LogLevels.info),k.callSDKFunction("saveFile",d,"preCacheFileSuccess","preCacheFileFailed"))};E.isDefined(e)&&(d.lastUpdateTime=e.toString()),a=V.subscribe(Q+".assetCached",function(e){if(!an(["path","file"],e,"preCacheFileSuccess").didSucceed)return k.log("error calling assetCached "+JSON.stringify(e),k.LogLevels.error),void f("error calling assetCached");decodeURIComponent(e.path)===n&&l.match(e.file)&&(rn(s),k.log("successfully saved file: "+decodeURIComponent(e.path)+"/"+e.file,k.LogLevels.info),c.resolve(!0))}),r=V.subscribe(Q+".assetCachedFailed",function(e){decodeURIComponent(e.path)===n&&l.match(e.file)&&(k.log("failed saved file: "+decodeURIComponent(e.path)+"/"+e.file,k.LogLevels.info),g("failed saved file"))}),o=V.subscribe(Q+".preCacheFileFailed",function(e){decodeURIComponent(e.path)===n&&l.match(e.file)&&(k.log(e.errMsg+": "+decodeURIComponent(e.path)+"/"+e.file,k.LogLevels.error),g(e.errMsg))}),s.push(a),s.push(r),s.push(o),g()}else c.resolve(!0);return c.promise()},deleteFolder:function(e){E.isString(e)||e.toString(),k.callSDKFunction("deleteFolder",{path:e},"deleteFolderSuccess","deleteFolderFailed")},deleteAsset:function(n,t){var e,i,a=new v.Deferred,r=[];return E.isString(n)||n.toString(),E.isString(t)||t.toString(),e=V.subscribe(Q+".deleteFileSuccess",function(e){if(!an(["path","file"],e,"deleteFileSuccess").didSucceed)return k.log("error calling deleteFileSuccess "+JSON.stringify(e),k.LogLevels.error),a.reject("failed to delete file: "+e.file),void rn(r);decodeURIComponent(e.path)===n&&t.match(e.file)&&(rn(r),k.log("successfully deleted file: "+decodeURIComponent(e.path)+"/"+e.file,k.LogLevels.info),a.resolve())}),r.push(e),i=V.subscribe(Q+".deleteFileFailed",function(e){if(!an(["path","file"],e,"deleteFileFailed").didSucceed)return k.log("error calling deleteFileFailed "+JSON.stringify(e),k.LogLevels.error),a.reject("failed to delete file: "+e.file),void rn(r);decodeURIComponent(e.path)===n&&t.match(e.file)&&(rn(r),k.log("failed to delete file: "+e.file,k.LogLevels.info),a.reject("failed to delete file: "+e.file))}),r.push(i),k.callSDKFunction("deleteFile",{path:n,file:t},"deleteFileSuccess","deleteFileFailed"),a.promise()},setBackButtonState:function(e){var n=e?wt():Oe.none;k.callSDKFunction("setBackButtonState",{state:n})},addAdToLoadedCreatives:function(e){return!(!e||Wn(e))&&(j.push(e),!0)},isContainerLoaded:function(e){return L.isContainerLoaded(e)},loadAdUnitUrl:function(e,n,t,i){L.createAndLoadAdFrame(e,n,t,i),k.addAdToLoadedCreatives(e)},displayAdUnitFrame:function(e){L.displayAdFrame(e,Nn,Mn,kn)},updateAdUnitUrl:function(e,n,t,i){L.updateFrameUrl(e,n,t,i),k.addAdToLoadedCreatives(e)},onAdLoaded:function(e){var n=function(){k.log("line[2787]: ad loaded mismatch",k.LogLevels.error),ye<Ce&&(V.publish("SDKController.AdLoadError",[e]),ye++)};if(e&&e.productType)if(Dn(k.AdUtils.getAdId(e),e))Xn(e);else{var t={eventParam:{eName:nn.mismatchAdLoadError},action:"fireEvent",productType:e.productType};e.demandSourceName&&(t.demandSourceName=e.demandSourceName),V.publish("SDKController.Analytics",[t]),k.log("mismatch from not being in loadedcreatives",3),n()}else n()},removeAdUnit:function(e){if(O.isAdDisplayed(e)){var n=ni(e);Un();var t=!(!n||!E.isFunction(n.getNextAd))&&n.getNextAd(!0,e.inventoryId);Vn(!1,t)}else At(Dn(k.AdUtils.getAdId(e),e),{preloadNextInBG:!0})},removeAdUnitFromExternal:function(e){jn(k.AdUtils.getAdId(e)),p.PubSub.publish("SDKController.engageEnd",[e])},unloadFramesByProduct:function(e){var t,n=b.getDisplayedAdFrame();k.log("Removing all current "+e.productType+" frames"),n&&n.hasClass(ti(e).class)&&O.isDisplayed()&&(tn(),Vn()),v.each(v(ti(e).selector),function(e,n){t=v(n).data("id"),jn(t),n.parentNode.removeChild(n)})},isRootFolder:function(e){return se.mobileSDKSettings.deviceOs===m.deviceOs.ios?"SSAPublisher"===e:"supersonicads"===e},getCurrentDisplayedAd:function(){return O.get()},setCurrentDisplayedAd:function(e){return O.set(e)},getCurrentDisplayedAdType:function(){return O.getDisplayedAdType()},isAdDisplayed:function(e){return O.isAdDisplayed(e)},getGlobalAppData:function(){var n,t,i,a,r=new v.Deferred;return n=V.subscribe(Q+".parseGlobalData",function(e){if(a="string"==typeof e.ssaGlobalAppData?E.parseJSON(decodeURIComponent(e.ssaGlobalAppData)):e.ssaGlobalAppData,k.log("Full global app data is: "+JSON.stringify(a),k.LogLevels.verbose),!a)return r.reject("Invalid Global Data response"),void rn([n,t]);r.resolve(a),rn([n,t])}),t=V.subscribe(Q+".getGlobalDataFailed",function(e){i=an(["errMsg"],e,"getGlobalDataFailed").didSucceed?e.errMsg:an(["errMsg"],e,"getGlobalDataFailed").errMsg,r.reject(i),rn([n,t])}),k.callSDKFunction("getUserData",{key:"ssaGlobalAppData"},"parseGlobalData","getGlobalDataFailed"),r.promise()},setCachePriorityArrayKey:function(n,t){return t?k.getGlobalAppData().then(function(e){return e.cachePriorityArray=e.cachePriorityArray||{},e.cachePriorityArray[n.cacheBase]=t,k.setGlobalAppData(e)}):p.Utils.returnResolvedPromise()},setGlobalAppData:function(e){var n,t,i,a=new v.Deferred;return n=V.subscribe(Q+".setGlobalDataSuccess",function(){a.resolve(),rn([n,t])}),t=V.subscribe(Q+".setGlobalDataFailed",function(e){i=an(["errMsg"],e,"setGlobalDataFailed").didSucceed?e.errMsg:an(["errMsg"],e,"setGlobalDataFailed").errMsg,a.reject(i),rn([n,t])}),k.callSDKFunction("setUserData",{key:"ssaGlobalAppData",value:JSON.stringify(e)},"setGlobalDataSuccess","setGlobalDataFailed"),a.promise()},getUserData:function(n,t){var i,a,r,o,s=new v.Deferred;return E.isDefined(t)&&!E.isDefined(n)?s.reject("Missing info to retrieve user data."):(i=V.subscribe(Q+".parseUserData",function(e){return an(["ssaUserData"],e,"parseUserData").didSucceed?(o="string"==typeof e.ssaUserData?E.parseJSON(decodeURIComponent(e.ssaUserData)):e.ssaUserData,k.log("Full user data is: "+JSON.stringify(o),k.LogLevels.verbose),o?(E.isDefined(n)&&(o=o[n]||{},E.isDefined(t)&&(o=o[t]||{})),k.log("Get user data response: "+JSON.stringify(o)+" for appKey "+n+" and userId "+t+" (if no specific user return all)",k.LogLevels.verbose),s.resolve(o)):s.reject("Invalid User Data response"),void rn([i,a])):(r=an(["errMsg"],e,"parseUserData").errMsg,s.reject(r),void rn([i,a]))}),a=V.subscribe(Q+".getUserDataFailed",function(e){r=an(["errMsg"],e,"getUserDataFailed").didSucceed?e.errMsg:an(["errMsg"],e,"getUserDataFailed").errMsg,s.reject(r),rn([i,a])}),k.callSDKFunction("getUserData",{key:"ssaUserData"},"parseUserData","getUserDataFailed")),s.promise()},setUserData:function(n,t,i){var a,r,o,s,c=new v.Deferred;return E.isDefined(n)&&E.isDefined(t)?v.when(k.getUserData()).then(function(e){s=e,E.isDefined(s[n])||(s[n]={}),E.isDefined(s[n][t])||(s[n][t]={}),i==={}?s[n][t]={}:v.extend(s[n][t],i),a=V.subscribe(Q+".setUserDataSuccess",function(){c.resolve(),rn([a,r])}),r=V.subscribe(Q+".setUserDataFailed",function(e){o=an(["errMsg"],e,"setUserDataFailed").didSucceed?e.errMsg:an(["errMsg"],e,"setUserDataFailed").errMsg,c.reject(o),rn([a,r])}),k.callSDKFunction("setUserData",{key:"ssaUserData",value:JSON.stringify(s)},"setUserDataSuccess","setUserDataFailed")},function(e){c.reject(e)}):c.reject("Missing info to set user data."),c.promise()},getConfig:function(){return se},getApplicationExternalConfig:function(){return c},isSupportedOsVersion:function(e){return null===w.getDeviceApiLevel().match(Ue[e][se.mobileSDKSettings.deviceOs])},isLimitedDeviceModel:function(){if(!se.controllerConfig||-1===m.applicationsLimitations.indexOf(se.controllerConfig.applicationKey))return!1;var e=decodeURIComponent(se.mobileSDKSettings.deviceModel);return-1!==m.deviceLimitations.indexOf(e)},checkRequiredCallbackParams:function(e,n,t,i){return an(e,n,t,i)},clearHandlers:function(e){rn(e)},alert:function(e){var n,t=v("#ssaDialogText"),i=v(".dialogBox"),a=Ci(),r=Si(a),o=yi(a),s=!1,c=v("#ssaDialogConfirmBtnText"),l=v("#ssaDialogCancelBtnText"),d=v("#ssaDialogBtns");Fn("dialogBoxAboutToOpen"),i.removeAttr("style"),i.css("display","block"),(!he||e&&e.alwaysClose)&&(L.hideLoader(),wn(),s=!0),he||L.displayContainer(e);var u=b.getDisplayedAdFrame();if(u&&p.Msg.postMessage("hideFrame","*",u[0].contentWindow),d.removeClass("singleBtn"),"object"==typeof e&&(be.removeClass("hidden").removeAttr("style"),me.removeClass("hidden").removeAttr("style"),E.isDefined(e.close)?(n=e.close,c.text(e.yes),l.text(e.no),me.textWidth()>o.minDialogBtnWidth||be.textWidth()>o.minDialogBtnWidth?(be.css({width:o.maxDialogBtnWidth+"px",left:"20px"}),me.css({width:o.maxDialogBtnWidth+"px",right:"20px"})):(be.css({width:o.baseDialogBtnWidth+"px",left:"55px"}),me.css({width:o.baseDialogBtnWidth+"px",right:"55px"})),(me.textWidth()>o.maxDialogBtnTextWidth||be.textWidth()>o.maxDialogBtnTextWidth||-1!==v.inArray(" ",e.yes)||-1!==v.inArray(" ",e.no))&&(c.textfill2(r.buttonText),r.buttonText.parentContainer=be,l.textfill2(r.buttonText))):E.isDefined(e.message)?(n=e.message,E.isDefined(e.yes)&&c.text(e.yes),E.isDefined(e.no)&&l.text(e.no)):n=JSON.stringify(e),s)){d.addClass("singleBtn"),be.addClass("hidden");var f=me[0].offsetWidth/2;me.css("margin-left",-1*f+"px")}t.text(n),t.textfill2(r.dialogText),i.css("visibility","visible");var g=v("#ssaDialogBoxOverlay");g.fadeIn(100),g.bind("click",function(e){e.preventDefault()}),ve.fadeIn(300)},log:a.log,logEvent:function(e,n){lt(e)},openUrl:function(e,n){Pn(e,n)},postAdUnitEvent:function(e,n){Fn(e,n)},initEventics:Nt,getOfferWallConfiguration:Ht,getFormattedDeviceData:Zt,shouldExtendApiDataWithDebugData:$t,extendApiDataWithDebugParams:zt,getSDKDebugParams:_t,getPatchesIphoneXObj:function(){return T},setAllowFileAccessFromFileURLs:Xt,getDeviceId:function(){return ii(k.getConfig().mobileSDKSettings)},getSDKLimitationData:Ii,addExternalAdViewIdAndSetStatus:function(e){P.addExternalAdViewIdAndSetStatus(e)},getExternalContainer:function(){return P},onAdVisible:Bn,saveFileToCache:li};return v.extend(wi,{_getApplicationConfigurationFromServer:qt,_parseReceivedApplicationConfiguration:Jt}),k=wi,wi}e.exports=function(e){var n=Li("../../components/Constants.js"),t=Li("../Cache.js"),i=Li("../InterstitialFactory.js"),a=Li("../OfferWall.js"),r=Li("../RewardedAdFactory.js"),o=Li("../BannerFactory.js"),s=Li("../../components/HTTPService.js"),c=Li("../../components/AdUtils.js"),l=Li("../../components/DemandUtils.js"),d=Li("../../components/SupplyUtils.js"),u=Li("../../components/HybridService.js"),f=Li("../../components/StoreKitService.js"),g=Li("../../components/ViewsManager.js"),p=Li("../../components/PixelTrackingService.js"),v=Li("../../components/OpenURLService.js"),m=Li("../../components/MOATService.js"),b=Li("../../components/RingerSwitchService.js"),h=Li("../../components/OrientationService.js"),S=Li("../../components/GDPRservice.js"),y=Li("../../components/orientation/AppOrientationManager.js"),C=Li("../../components/PermissionService"),A=Li("./SDKLimitations"),D=Li("../../components/APIConfigurations.js"),I=Li("../../components/NativeLifeCycleEventsService.js"),w=Li("../../components/LastSeenCampaignService"),L=Li("../../components/AndroidNomediaFileHandler.js"),P=new T(e,window.jQuery,n);return P.Cache=new t(e,P),P.SDKLimitations=new A(P),P.OfferWall=new a(e,P),P.InterstitialFactory=new i(e,P),P.RewardedAdFactory=new r(e,P),P.BannerFactory=new o(e,P),P.HTTPService=new s(e,P),P.AdUtils=new c(e,P,window.jQuery),P.DemandUtils=new l(e,P,n),P.SupplyUtils=new d(P,n),P.HybridService=new u(e,P),P.StoreKitService=new f(e,P,n),P.ViewsManager=new g(e),P.PixelTrackingService=new p(P),P.OpenURLService=new v(P),P.MOATService=new m(e,P),P.RingerSwitchService=new b(e,P),P.OrientationService=new h(e,P,n),P.GDPRService=new S(e,P,n),P.AppOrientationManager=new y(e,P,n),P.PermissionService=new C(e,P),P.APIConfigurations=new D(P),P.NativeLifeCycleEventsService=new I(e,P,n),P.LastSeenCampaignService=new w(P,n),P.AndroidNomediaFileHandler=new L(P),P}},{"../../components/APIConfigurations.js":1,"../../components/AdOrientationManager.js":2,"../../components/AdUtils.js":3,"../../components/AndroidNomediaFileHandler.js":6,"../../components/BlacklistService":7,"../../components/CampaignsFilter.js":8,"../../components/Constants.js":9,"../../components/DemandUtils.js":10,"../../components/DisplayedAdManager.js":11,"../../components/ExternalConfig":12,"../../components/FrameHelper.js":15,"../../components/GDPRservice.js":17,"../../components/HTTPService.js":18,"../../components/HybridService.js":19,"../../components/LastSeenCampaignService":22,"../../components/Logger.js":23,"../../components/MOATService.js":24,"../../components/NativeLifeCycleEventsConstants.js":27,"../../components/NativeLifeCycleEventsService.js":28,"../../components/OpenURLService.js":30,"../../components/OrientationService.js":32,"../../components/PermissionService":34,"../../components/PixelTrackingService.js":36,"../../components/RingerSwitchService.js":39,"../../components/StoreKitService.js":40,"../../components/SupplyUtils.js":41,"../../components/ViewsManager.js":44,"../../components/containers/ContainerManager.js":45,"../../components/containers/ExternalContainer.js":48,"../../components/inAppBidding/IABService.js":50,"../../components/orientation/AppOrientationManager.js":51,"../../modules/SDKController/EventCategories":93,"../../patches/PatchesIphoneX.js":113,"../../presenter/uiConfig.js":115,"../AdUnitManager/AdUnitGlobals.js":60,"../AdUnitManager/AdUnitLibsManager.js":62,"../AdUnitUrl.js":64,"../BannerFactory.js":67,"../Cache.js":68,"../InterstitialFactory.js":80,"../OfferWall.js":81,"../ProductRouter.js":85,"../RewardedAdFactory.js":86,"../SDKInterface.js":104,"./ConfigurationHelper.js":92,"./MessageHandler":95,"./SDKLimitations":97,"./instancesManager.js":99,"./mainConfig.js":100,"./nativeConfigHandler.js":101,"./sessionConfig":102,"./videoStateHandler.js":103}],97:[function(e,n,t){n.exports=function(t){var i=" is not supported";return{getLimitData:function(e){var n={errMsg:"",didSucceed:!0};return t.isSupportedOsVersion(e)?t.isLimitedDeviceModel()&&(n.errMsg="Device"+i,n.didSucceed=!1):(n.errMsg="Operating system version "+t.getApiData({deviceOSVersion:1}).deviceOSVersion+i,n.didSucceed=!1),n}}}},{}],98:[function(e,n,t){n.exports=function(s,n,c){var l={v:function(e){return e.match(/^[0-9]+?[.]?[0-9]+?[.]?[0-9]+$/)},appOrientation:function(e){var n=e;return"portrait"===(n=n.toLowerCase())||"landscape"===n||"none"===n},connectionType:function(e){var n=decodeURIComponent(e);return"wifi"===(n=n.toLowerCase())||n.match(/^mobile\[.+\]$/)||"3g"===n||"none"===n},iphoneAppOnIpadDevice:function(e){var n=parseInt(e);return 0===n||1===n},deviceOs:function(e){return e&&""!==e},SDKVersion:function(e){return e&&""!==e},deviceOSVersion:function(e){return e&&""!==e},deviceApiLevel:function(e){return e&&""!==e},bundleId:function(e){return e&&""!==e},"deviceIds[OpenUDID]":function(e){return s.isDefined(e)},"deviceIds[IFA]":function(e){return s.isDefined(e)},"deviceIds[SERIAL]":function(e){return s.isDefined(e)},"deviceIds[AndroidID]":function(e){return s.isDefined(e)},"deviceIds[IMEI]":function(e){return s.isDefined(e)},"deviceIds[AID]":function(e){return s.isDefined(e)},deviceScreenScale:function(){return!0},"deviceScreenSize[width]":function(){return!0},"deviceScreenSize[height]":function(){return!0},diskFreeSize:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},showDeliveryLimitationsLog:function(){return!0},country:function(e){return e&&""!==e},debug:function(e){return s.isDefined(n[e])},disableCache:function(e){var n=parseInt(e);return 0===n||1===n},disableSession:function(e){var n=parseInt(e);return 0===n||1===n},applicationKey:function(e){return e&&""!==e},applicationUserId:function(e){return e&&""!==e},applicationUserGender:function(e){return"unknown"===e||"female"===e||"females"===e||"male"===e||"males"===e||"both"===e},applicationUserAgeGroup:function(e){var n=parseInt(e);return 0<=n&&n<=9},applicationUserCreationDate:function(e){return e.match(/^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$/)},maxVideoLength:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},itemCount:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},minimumOfferCommission:function(e){var n=parseFloat(e);return!isNaN(n)&&0<=n},demoCampaigns:function(e){var n=parseInt(e);return 0===n||1===n},numOfCampaigns:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},campaignId:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},pageSize:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},landingId:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},page:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},admin:function(e){var n=parseInt(e);return 0===n||1===n},useClientSideCallbacks:function(e){var n=e.toString();return"true"===n||"false"===n},unLocked:function(e){var n=e.toString();return"true"===n||"false"===n},isLimitAdTrackingEnabled:function(e){return s.isDefined(e)},placementId:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},allowArbitraryLoads:function(e){var n=e.toString();return"true"===n||"false"===n},allowArbitraryLoadsInWebContent:function(e){var n=e.toString();return"true"===n||"false"===n}};return function(e,n){var t,i,a,r=!0,o=null;for(t in e){if(s.isDefined(l[t])&&!1===l[t](e[t])){o=c.invalid+t,r=!1;break}a=e[i=t],n[i]=a}return{didSucceed:r,errMsg:o}}}},{}],99:[function(e,n,t){n.exports=function(l,f){var a,r=!1,g={},p={};g[f.RV]=[],g[f.IS]=[],g[f.BN]=[],p[f.RV]={},p[f.IS]={},p[f.BN]={};var v=e("../DemandSource/DemandEntityBuilder.js"),o=e("./ManualLoadInstancesBuilder.js");function m(e,n){for(var t=0;t<e.length;t++)if(e[t].demandSourceName===n)return t;return-1}function s(e,n){if(n&&0<n.length)for(var t=n,i=0;i<t.length;i++)t[i].instancesOrderList=[],t[i].instancesUninitializedList=[],g[e].push(t[i])}return{init:function(e,n){var t,i;r||(e&&((i=e.instancesMap)&&(i[f.sspProductNames.RewardedVideo]&&s(f.RV,i[f.sspProductNames.RewardedVideo]),i[f.sspProductNames.Interstitial]&&s(f.IS,i[f.sspProductNames.Interstitial]),i[f.sspProductNames.Banner]&&s(f.BN,i[f.sspProductNames.Banner])),(t=e.waterfallMap)&&(p[f.RV]=t[f.sspProductNames.RewardedVideo]||{},p[f.IS]=t[f.sspProductNames.Interstitial]||{},p[f.BN]=t[f.sspProductNames.Banner]||{})),a=new o(e,f),r=!0)},getManualLoadInstancesBuilder:function(){return a},createUninitializedDemandInstance:function(e,n,t){var i=g[e];if(i){for(var a,r=0;r<i.length;r++){var o=i[r],s=o&&o.instances;if(!s)break;var c=m(i[r].instancesUninitializedList,n);if(-1<c?a=i[r].instancesUninitializedList[c]:-1<s.indexOf(n)&&(a=new v({productType:e},{demandSourceName:n,demandGroupName:o.demandGroupName,demandType:f.demandSourceType.instance,isInAppBidding:t,integrationType:f.integrationType.automatic,waterfallPosition:p[e][n]}),i[r].instancesUninitializedList.push(a)),a)break}return a||(a=new v({productType:e},{demandSourceName:n,isInAppBidding:t,integrationType:f.integrationType.automatic,waterfallPosition:p[e][n]})),a}},initiateDemandInstance:function(e,n,t,i){var a,r,o,s,c,l,d,u=(o=new v({productType:a=e},{demandSourceName:r=n,demandGroupName:r,demandType:f.demandSourceType.demandSource,waterfallPosition:p[a][r]}),(s=g[a])&&s.forEach(function(e){var n=e.instances;if(n&&-1<n.indexOf(r)){var t=m(e.instancesUninitializedList,r);-1<t?o=e.instancesUninitializedList[t]:-1<(t=m(e.instancesOrderList,r))&&(o=e.instancesOrderList[t])}}),o);!function(e){var n=g[e.productType];if(n)for(var t=0;t<n.length;t++){var i=n[t],a=i&&i.instances;if(!a)break;var r=a.indexOf(e.demandSourceName);if(-1<r){var o=m(i.instancesUninitializedList,e.demandSourceName);if(-1<o&&i.instancesUninitializedList.splice(o,1),-1===m(i.instancesOrderList,e.demandSourceName))if(i.instanceOrderByActivation)i.instancesOrderList.push(e);else{var s=Math.min(i.instancesOrderList.length,r);i.instancesOrderList.splice(s,0,e)}break}}}(u),u.demandType===f.demandSourceType.instance?(u.initiationCallback=t,u.pendingInitiationCallback=i,c=n,l=!0,(d=g[e])&&d.forEach(function(e){var n=e.instances;if(n&&-1<n.indexOf(c)){var t=e.instanceOrderByActivation;l=e.instancesOrderList[0].demandSourceName===c&&(t||n[0]===c)}}),l?u.initiationCallback():u.pendingInitiationCallback()):t()},exhaustedDemandSource:function(e,n){if((!n.demandType||n.demandType===f.demandSourceType.instance)&&e&&n.demandGroupName&&n.demandSourceName&&g[e])for(var t=g[e],i=0;i<t.length;i++)if(t[i].demandGroupName&&t[i].demandGroupName===n.demandGroupName){var a=t[i].instances,r=t[i].instancesOrderList,o=m(r,n.demandSourceName);return void(0<=o&&(a.push(a.shift(n.demandSourceName)),r.splice(o,1),s=t[i],c=e,s&&s.instancesOrderList&&0<s.instancesOrderList.length&&l.Utils.isFunction(s.instancesOrderList[0].initiationCallback)&&(s.instancesOrderList[0].alreadyDispatchedInitiationCallback||(c===f.IS&&(s.instancesOrderList[0].alreadyDispatchedInitiationCallback=!0),s.instancesOrderList[0].initiationCallback()))))}var s,c}}}},{"../DemandSource/DemandEntityBuilder.js":69,"./ManualLoadInstancesBuilder.js":94}],100:[function(e,n,t){n.exports=function(){return{deviceDataRequestObject:{deviceOs:1,SDKVersion:1,deviceOSVersion:1,deviceApiLevel:0}}}},{}],101:[function(i,e,n){function t(e,n){var t=i("../../components/Constants.js");return e.subscribe(t.CB+".nativeConfigSuccess",function(e){n.log("nativeConfig update successfully.",n.LogLevels.error)}),e.subscribe(t.CB+".nativeConfigFailed",function(e){n.log("nativeConfig failed to update.",n.LogLevels.error)}),{setNativeConfiguration:function(e){e&&n.callSDKFunction("setNativeConfiguration",e,"nativeConfigSuccess","nativeConfigFailed")}}}var a;e.exports=function(e,n){return a||(a=new t(e,n)),a}},{"../../components/Constants.js":9}],102:[function(e,n,t){n.exports=function(){return{native:{ios:{supportViewControllerFromAdapter:!0,allowOrientationFromAppDelegate:!0}}}}},{}],103:[function(s,e,n){function t(e,n){var t=s("../../components/Constants.js"),i=t.videoStates,a=t.BC,r=i.none,o=n.isLegacy(n.featureMap.MDS[t.RV]);return a=o?t.BC:t.RV,e.subscribe("SDKController.AdStarted",function(){n.log("VideoStateHandler | AdStarted",n.LogLevels.verbose),r=i.play,n.callSDKFunction("onVideoStatusChanged",{status:"started",productType:a})}),e.subscribe("SDKController.AdPlaying",function(){n.log("VideoStateHandler | AdPlaying",n.LogLevels.verbose),r=i.play,n.callSDKFunction("onVideoStatusChanged",{status:"playing",productType:a})}),e.subscribe("SDKController.AdPaused",function(){n.log("VideoStateHandler | AdPaused",n.LogLevels.verbose),r=i.stop,n.callSDKFunction("onVideoStatusChanged",{status:"paused",productType:a})}),e.subscribe("SDKController.AdVideoEnded",function(){n.log("VideoStateHandler | AdVideoEnded",n.LogLevels.verbose),r=i.stop,n.callSDKFunction("onVideoStatusChanged",{status:"ended",productType:a})}),{handleOnEngageEnd:function(){n.log("VideoStateHandler | handleOnEngageEnd onVideoStatusChanged stopped from engaged end",n.LogLevels.verbose),r=i.none,n.callSDKFunction("onVideoStatusChanged",{status:"stopped",productType:a})},getState:function(){return r}}}var i;e.exports=function(e,n){return i||(i=new t(e,n)),i}},{"../../components/Constants.js":9}],104:[function(e,n,t){var o=e("./iOSSDKInterface.js"),s=e("./iOSSDKInterface_WK.js"),c=e("./androidSDKInterface.js");n.exports=function(e,n,t,i){"use strict";var a,r="undefined";switch(i=t.isLegacy(n.featureCompatibilityMap.messageSecurity)?null:i,e.deviceOs){case n.deviceOs.android:a=new c(i,t,r);break;case n.deviceOs.ios:a="wk"===e.webviewType?new s(r):new o(r);break;default:a=new o(r)}return a}},{"./androidSDKInterface.js":108,"./iOSSDKInterface.js":109,"./iOSSDKInterface_WK.js":110}],105:[function(p,e,n){function v(i){var a,r,o={},s={},t=!1,c=function(n,e){var t=null;o=a.Utils,(s=a.PubSub).init(),o.isDefined(n.mobileSDKSettings)&&(t=(r=a.SDKController).init(n,e)),i.when(t).then(function(){n.products&&i.each(n.products,function(e){o.isDefined(e.init)&&e.init(n[e])})},function(){console.log("Failed to initiate controller")})},e={init:function(e,n){return a=this,c(e,n),t=!0},log:function(e,n){r&&r.log&&r.log(e,n||r.LogLevels.error)}};return e}e.exports=function(e,n,t,i){var a=p("../components/Utils.js"),r=p("../components/PubSub.js"),o=p("../components/Msg.js"),s=p("./AdAssets.js"),c=p("./VastUtils.js"),l=n.Eventics,d=new v(e),u={};d.Utils=new a(d,n,t,i),d.PubSub=new r(d),d.Msg=new o,d.AdAssets=new s,d.VastUtils=new c(d.AdAssets);var f,g=["KuduEventicsProvider"];return f=n.productionDebug||n.SuperSonicGlobalConfig&&n.SuperSonicGlobalConfig.mobileSDKSettings&&"www.supersonicads.com"!==n.SuperSonicGlobalConfig.mobileSDKSettings.domain?(g.push("QAEventicsProvider"),1):Math.random(),n.SuperSonicGlobalConfig&&n.SuperSonicGlobalConfig.mobileSDKSettings&&n.SuperSonicGlobalConfig.mobileSDKSettings.protocol&&(u.isSecured="https:"===n.SuperSonicGlobalConfig.mobileSDKSettings.protocol),d.Eventics=l(f),d.Eventics.setProvidersHandlers(g),d.Eventics.setProvidersConfig(u),d}},{"../components/Msg.js":25,"../components/PubSub.js":37,"../components/Utils.js":42,"./AdAssets.js":57,"./VastUtils.js":106}],106:[function(e,n,t){n.exports=function(n){function t(e){if(e)return!e.controllerSpace||e.controllerSpace.viewCount}function i(e,n){return e&&(e.controllerSpace||(e.controllerSpace={}),e.controllerSpace.viewCount=n),e}function a(e){return!!e&&(0<n.extractVastSource(e).length||e.ext&&e.ext.videoData&&!0===e.ext.videoData.isVast)}return{getVastViewCount:t,setVastViewCount:i,setMaxVastCount:function(e){e&&a(e)&&"number"==typeof e.ext.vastExhaustIndex&&0<e.ext.vastExhaustIndex&&i(e,e.ext.vastExhaustIndex)},isVastCampaign:a,isThereVastCampaign:function(e){if(!e||!jQuery.isArray(e))return!1;for(var n=!1,t=0;t<e.length;t++)if(a(e[t])){n=!0;break}return n},areAllCampaignTypesAreVast:function(e){if(!e||!jQuery.isArray(e)||0===e.length)return!1;for(var n=!0,t=0;t<e.length;t++)if(!a(e[t])){n=!1;break}return n},incrementVastViewCount:function(e){return e&&a(e)?(e.controllerSpace||(e.controllerSpace={}),e.controllerSpace.viewCount=e.controllerSpace.viewCount?e.controllerSpace.viewCount+1:1,e.controllerSpace.viewCount):-1},isVastCanPlayAgain:function(e){return!!e&&a(e)&&e.ext.vastExhaustIndex&&t(e)<e.ext.vastExhaustIndex},getVastViewCountForEvent:function(e){return"number"==typeof e?e:-1}}}},{}],107:[function(a,e,n){(function(e){"use strict";var n=a("./SonicCore.js"),t=a("./SDKController/SDKController.js");var i=e.SonicCore=e.SSA_CORE=new n(e.jQuery,e,document,"undefined");i.SDKController=new t(i,"undefined"),"function"==typeof sonicAsyncInit&&sonicAsyncInit()})(window)},{"./SDKController/SDKController.js":96,"./SonicCore.js":105}],108:[function(e,n,t){function i(i,t,n){function a(e,n){var t=i.hashMessage(e,n);Android.messageHandler(e,JSON.stringify(n),t)}function r(e,n){Android[e](JSON.stringify(n))}function o(e,n){return void 0!==e&&e[n]}var s={postMessage:function(n,e){if(o(window.Android,i?"messageHandler":n))try{i?a(n,e):r(n,e)}catch(e){t.log("Error running function "+n+" error:"+JSON.stringify(e),t.LogLevels.error)}else t.log("Error calling SDK function "+n,t.LogLevels.error)}},e={postMessage:function(e){typeof e.eventName!==n&&typeof e.prefix!==n&&typeof e.parameters!==n&&("function"==typeof s[e.eventName]?s[e.eventName](e.parameters):s.postMessage(e.eventName,e.parameters))},acknowledgeMessage:function(){return!0}};return e}n.exports=i},{}],109:[function(e,n,t){function i(n){var i=function(e,n,t){var i,a=e+"://"+n+"?";jQuery.each(t,function(e,n){"object"==typeof n&&(t[e]=JSON.stringify(n))}),i=a+jQuery.param(t),r(i)},t=function(e){var n=document.createElement("IFRAME");n.setAttribute("src",e),document.documentElement.appendChild(n),n.parentNode.removeChild(n),n=null},r=function(e){0===o.length?(o.push("1"),t(e)):o.push(e)},a={postMessage:function(e,n,t){i(e,n,t)}},o=[],e={postMessage:function(e){typeof e.eventName!==n&&typeof e.prefix!==n&&typeof e.parameters!==n&&("function"==typeof a[e.eventName]?a[e.eventName](e.parameters):a.postMessage(e.prefix,e.eventName,e.parameters))},acknowledgeMessage:function(){if(0!==o.length){var e=o.shift();"1"===e&&0!==o.length&&(e=o.shift()),void 0!==e&&"1"!==e&&t(e)}}};return e}n.exports=i},{}],110:[function(e,n,t){function i(n){var i=function(e,n,t){var i,a=e+"://"+n+"?";jQuery.each(t,function(e,n){"object"==typeof n&&(t[e]=JSON.stringify(n))}),i=a+jQuery.param(t),r(i)},t=function(e){void 0!==window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.supersonicMainMsgHandler&&window.webkit.messageHandlers.supersonicMainMsgHandler.postMessage(e)},r=function(e){0===o.length?(o.push("1"),t(e)):o.push(e)},a={postMessage:function(e,n,t){i(e,n,t)}},o=[],e={postMessage:function(e){typeof e.eventName!==n&&typeof e.prefix!==n&&typeof e.parameters!==n&&("function"==typeof a[e.eventName]?a[e.eventName](e.parameters):a.postMessage(e.prefix,e.eventName,e.parameters))},acknowledgeMessage:function(){if(0!==o.length){var e=o.shift();"1"===e&&0!==o.length&&(e=o.shift()),void 0!==e&&"1"!==e&&t(e)}}};return e}n.exports=i},{}],111:[function(e,n,t){n.exports=function(t,n,i,a){var e=!1,r=!1,o=!1,s=!0,c=a.CB+".enterBackground",l=a.CB+".enterForeground",d=a.CB+".deviceStatusChanged",u="prdTaskManager | ";return{init:function(){e||(t.PubSub.subscribe(a.taskManager+".Engaged",function(e){!t.Utils.isDefined(e.duringEngage)||e.productType!==i&&e.productType!==a.BC||(r=e.duringEngage,n.log(u+"duringEngage "+r))}),t.PubSub.subscribe(c,function(){n.log(u+c),o=!0}),t.PubSub.subscribe(l,function(){n.log(u+l),o=!1}),t.PubSub.subscribe(d,function(e){t.Utils.isDefined(e.connectionType)&&(s="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),e=!0)},canEngage:function(){return!r&&s},isConnected:function(){return s},setConnection:function(e){s=e},canInitCallToApi:function(){var e=new jQuery.Deferred;return o?t.PubSub.subscribeOnce(l,function(){e.resolve()}):e.resolve(),e.promise()},getStatusMsg:function(){return"product TM - duringEngage:"+r+" appInBackground:"+o+" isConnected:"+s},getStatus:function(){return{duringEngage:r,appInBackground:o,isConnected:s}},publish:function(e,n){t.PubSub.publish(a.taskManager+"."+e,n)}}}},{}],112:[function(e,n,t){n.exports=function(n,t,i){var a="ios"===t.getConfig().mobileSDKSettings.deviceOs&&i&&"M"===i.integrationType;return a&&(t.log("PATCH | LoadAfterLoad | create listener for instance: "+JSON.stringify(i)),n.PubSub.subscribe("freeSDK5StateToAllowLoadAfterLoad",function(e){var n;n=e,t.log("PATCH | LoadAfterLoad | subscribe called for: "+JSON.stringify(i)+" , with params:"+JSON.stringify(n)),n&&i&&i.demandGroupName===n.demandGroupName&&i.productType===n.productType&&i.demandSourceName!==n.demandSourceName&&(t.log("PATCH | LoadAfterLoad | perform callSDKFunction with: "+JSON.stringify(e)),t.callSDKFunction("loadInterstitialFail",{demandSourceName:i.demandSourceName}))})),{onShowSuccess:function(e){a&&n.PubSub.publish("freeSDK5StateToAllowLoadAfterLoad",[{productType:e.productType,demandGroupName:e.demandGroupName,demandSourceName:e.demandSourceName}])}}}},{}],113:[function(e,n,t){n.exports=function(a,t,e){var n=0;function i(){var e=decodeURIComponent(t.mobileSDKSettings.deviceModel);return-1!==a.iphoneXDeviceModels.indexOf(e)}function r(){var e=t.mobileSDKSettings.deviceWidthDP,n=t.mobileSDKSettings.deviceHeightDP;return i()&&function(e,n){var t=a.iphoneXDeviceResolution;for(var i in t)if(t.hasOwnProperty(i)&&t[i].width&&t[i].height&&(e===t[i].width&&n===t[i].height||e===t[i].height&&n===t[i].width))return!0;return!1}(e,n)}function o(){var e=document.getElementById("viewport"),n="viewport-fit=cover";-1===e.content.indexOf(n)&&(e.content+=","+n)}return{isIphoneX:i,adjustSizeForIphoneX:function(){r()&&window.addEventListener("resize",function(){(0===n||10<=n)&&(n=0,function e(){n<10&&setTimeout(function(){o(),n++,e()},100)}())})},clearCountViewport:function(){r()&&(n=0)},ifShouldSetIphoneXBG:function(e){return i()&&(n=e).settings&&n.settings.standaloneView;var n},addIphoneXAdjustClass:function(){r()&&!e("body").hasClass("iphoneXAdjustPadding")&&(e("body").addClass("iphoneXAdjustPadding"),o())}}}},{}],114:[function(e,n,t){n.exports=function(n){var t={android:/^\b[1][0-9]\b|\b[2][0]\b/,ios:/^[8|9]/},i=["6abeab6d","6863f09d","499b4845","4cbeec05","70fc4915"].concat(["6c982dc5","6c97f43d"]);return{shouldFail:function(e){return!(!e.controllerConfig||-1===i.indexOf(e.controllerConfig.applicationKey))&&null!==n.getDeviceApiLevel().match(t[e.mobileSDKSettings.deviceOs])}}}},{}],115:[function(e,n,t){n.exports={templates:{mainDefaultTemplate:'<div id="ssaLoaderWrap" class="hidden">                <div id="spin" class="container">                    <div class="spinner">                        <div class="bar1"></div>                        <div class="bar2"></div>                        <div class="bar3"></div>                        <div class="bar4"></div>                        <div class="bar5"></div>                        <div class="bar6"></div>                        <div class="bar7"></div>                        <div class="bar8"></div>                        <div class="bar9"></div>                        <div class="bar10"></div>                        <div class="bar11"></div>                        <div class="bar12"></div>                    </div>                </div>            </div>',defaultDialogBoxTemplate:'<div id="ssaDialogBoxOverlay"></div>            <div id="ssaDialogBox" class="dialogBox">            <div id="ssaDialogBoxTextContainer">            <div><p id="ssaDialogText">Are you sure you want to quit the offer?</p></div>            </div>        <footer id="ssaDialogBtns">            <a id="ssaDialogCancelBtn" class="dialogBtn"><span id="ssaDialogCancelBtnText">Cancel</span></a>            <a id="ssaDialogConfirmBtn"" class="dialogBtn"><span id="ssaDialogConfirmBtnText">OK</span></a>        </footer>        </div>',defaultNavigationTemplate:'            <div id="ssaNavigator" class="defaultNavigation">                <ul class="ssaList">                    <li><div data-edge="top|left" id="ssaNavigatorBackButton" class="ssaNavigationBtn ssaControllerButton ssaBackButton"><div class="innerWrapper"></div></div></li>                    <li><div data-edge="top|right" id="ssaNavigatorCloseButton" class="ssaNavigationBtn ssaControllerButton ssaCloseButton"><div class="innerWrapper"></div></div></li>                </ul>            </div>',loaderOWTemplate:'<div class="loaderOW hidden">        <div class="header">        </div>        <div class="progressbarWrap">            <div class="progressbar"></div>        </div>        <div class="offers">        <div class="shine"></div>        </div>    </div>',loaderOWOfferTemplate:'<div class="offer">        <div class="offerWrap">        <div class="offerImg"></div>        <div class="offerDetails">        <div>        <span class="offerText">Loading Info...</span>        </div>        <div class="offerEarn">        <div class="badge"></div>        <div class="callToAction">Loading...</div>        </div>        </div>        <div class="offerBtn"></div>        </div>        </div>'},style:{forceCloseProperties:{androidNeutral:{width:25,height:25,position:"top-right"},androidInterstitial:{width:0,height:0,position:"top-right"},androidNavigation:{width:25,height:25,position:"top-right"},iosNeutral:{width:24,height:24,position:"top-right"},iosNavigation:{width:50,height:50,position:"top-right"},disable:{width:0,height:0,position:"top-right"}},backgroundColors:{transparent:"transparent",black:"#000000",darkGrey:"#1A1A1A",semiTransparent:"rgba(0,0,0,0.7)"},iconBGConfig:{},defaultControlFrames:[{width:28,height:28,position:"top-right"},{width:30,height:30,position:"top-left"}]},settings:{}}},{}]},{},[107]);